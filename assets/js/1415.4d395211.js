(window.webpackJsonp=window.webpackJsonp||[]).push([[1415],{1809:function(t,a,r){"use strict";r.r(a);var s=r(13),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"_0-github"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0-github"}},[t._v("#")]),t._v(" 0 "),r("a",{attrs:{href:"https://github.com/Wasabi1234",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github"),r("OutboundLink")],1)]),t._v(" "),r("h1",{attrs:{id:"_1-面试题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-面试题"}},[t._v("#")]),t._v(" 1 面试题")]),t._v(" "),r("p",[t._v("如何保证消息的顺序性？")]),t._v(" "),r("h1",{attrs:{id:"_2-考点分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-考点分析"}},[t._v("#")]),t._v(" 2 考点分析")]),t._v(" "),r("p",[t._v("MQ必问话题")]),t._v(" "),r("ul",[r("li",[t._v("考察你是否了解顺序性")]),t._v(" "),r("li",[t._v("考察你是否有办法保证消息的顺序性,因为这是生产系统中常见的一个问题.")])]),t._v(" "),r("h1",{attrs:{id:"_3-详解"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-详解"}},[t._v("#")]),t._v(" 3 详解")]),t._v(" "),r("h2",{attrs:{id:"_3-0-案例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-案例"}},[t._v("#")]),t._v(" 3.0 案例")]),t._v(" "),r("p",[t._v("一个MySQL binlog同步系统,日同步数据达到上亿.")]),t._v(" "),r("ul",[r("li",[t._v("在MySQL里"),r("code",[t._v("增删改")]),t._v("一条数据")]),t._v(" "),r("li",[t._v("即对应出增删改3条binlog")]),t._v(" "),r("li",[t._v("接着这三条binlog发送到MQ里面")]),t._v(" "),r("li",[t._v("消费出来依次执行")])]),t._v(" "),r("p",[t._v("应该得保证消息按照顺序执行的吧!\n不然本来是：增加->修改->删除\n你楞是换了顺序给执行成:删除->修改->增加\n全错!!!")]),t._v(" "),r("p",[t._v("该数据同步过来，最后本该被删除,结果你搞错顺序,最后它却被保留下来了，数据同步出错!")]),t._v(" "),r("h2",{attrs:{id:"_3-1-顺序错乱的场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-顺序错乱的场景"}},[t._v("#")]),t._v(" 3.1 顺序错乱的场景")]),t._v(" "),r("h3",{attrs:{id:"_3-1-1-rabbitmq"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-rabbitmq"}},[t._v("#")]),t._v(" 3.1.1 rabbitmq")]),t._v(" "),r("p",[t._v("一个queue，多个consumer，这不明显乱了\n"),r("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190625/5088755_1561478162632_2019062514582939.png",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"_3-1-2-kafka"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-kafka"}},[t._v("#")]),t._v(" 3.1.2  kafka")]),t._v(" "),r("p",[t._v("一个topic，一个partition，一个consumer，内部多线程，这也明显乱了\n"),r("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190625/5088755_1561478162743_20190625154839683.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"_3-2-保证消息的顺序性"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-保证消息的顺序性"}},[t._v("#")]),t._v(" 3.2 保证消息的顺序性")]),t._v(" "),r("h3",{attrs:{id:"_3-2-1-rabbitmq"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-rabbitmq"}},[t._v("#")]),t._v(" 3.2.1 rabbitmq")]),t._v(" "),r("p",[t._v("拆分多个queue，每个queue一个consumer\n就是多一些queue而已，确实麻烦点\n或者就一个queue但是对应一个consumer，然后这个consumer内部用内存队列做排队，然后分发给底层不同的worker来处理\n"),r("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190625/5088755_1561478162589_20190625154145295.png",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"_3-2-2-kafka"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-kafka"}},[t._v("#")]),t._v(" 3.2.2 kafka")]),t._v(" "),r("p",[t._v("一个topic，一个partition，一个consumer，内部单线程消费，写N个内存queue，然后N个线程分别消费一个内存queue即可\n"),r("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190625/5088755_1561478162731_20190625155015191.png",alt:""}})]),t._v(" "),r("h1",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),r("p",[t._v("《Java工程师面试突击第1季-中华石杉老师》")]),t._v(" "),r("h1",{attrs:{id:"x-交流学习"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#x-交流学习"}},[t._v("#")]),t._v(" X 交流学习")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190504005601174.jpg",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"java交流群"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#java交流群"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://jq.qq.com/?_wv=1027&k=5UB4P1T",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java交流群"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"博客"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#博客"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://blog.csdn.net/qq_33589510",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"github"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://github.com/Wasabi1234",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github"),r("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);