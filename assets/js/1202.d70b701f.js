(window.webpackJsonp=window.webpackJsonp||[]).push([[1202],{1597:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("explain或者desc获取MySQL如何执行select语句的信息。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200830055230457.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70#pic_center",alt:""}}),s._v("\n结果包含很多列")]),s._v(" "),t("h1",{attrs:{id:"_1-各列字段说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-各列字段说明"}},[s._v("#")]),s._v(" 1 各列字段说明")]),s._v(" "),t("h2",{attrs:{id:"_1-1-id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-id"}},[s._v("#")]),s._v(" 1.1 id")]),s._v(" "),t("p",[s._v("SELECT标识符。这是查询中SELECT的序列号，表示查询中执行select子句或者操作表的顺序。如果该行引用其他行的并集结果，则该值可为NULL。")]),s._v(" "),t("p",[s._v("id号分为三种情况:")]),s._v(" "),t("ol",[t("li",[s._v("id相同，那么执行顺序从上到下")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" se1ect "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp e "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" dept d "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno \n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" salgrade sg "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sa1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("between")]),s._v(" sg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("osal "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" sg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hisal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("id不同，如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp e "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dept d "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SALES'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("id相同和不同的，同时存在：相同的可以认为是一组，从上往下顺序执行，在所有组中，id值越大， 越先执行")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("exp1ain "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp e "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" dept d "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" salgrade sg "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sa1\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("between")]),s._v(" sg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("osal "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" sg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hisal "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" deptno "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dept d "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\nd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SALES'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nselect_ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"_1-2-select-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-select-type"}},[s._v("#")]),s._v(" 1.2 select_type")]),s._v(" "),t("p",[s._v("区分SELECT的类型，是普通查询还是联合查询还是子查询:")]),s._v(" "),t("ul",[t("li",[s._v("simple（简单表，不用表连接或子查询）")]),s._v(" "),t("li",[s._v("primary（主查询，外部查询）")]),s._v(" "),t("li",[s._v("union（union中的第二个或者后面的查询语句）")]),s._v(" "),t("li",[s._v("subquery（子查询中的第一个select）")])]),s._v(" "),t("h2",{attrs:{id:"_1-3-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-table"}},[s._v("#")]),s._v(" 1.3 table")]),s._v(" "),t("p",[s._v("输出结果集。对应行正在访问哪个表，表名或者别名，可能是临时表或者union合并结果集。")]),s._v(" "),t("ol",[t("li",[s._v("如果是具体表名，则表明从实际的物理表中获取数据，当然也可是表的别名")]),s._v(" "),t("li",[s._v("表名是derivedN的形式，表示使用了id为N的查询产生的衍生表")]),s._v(" "),t("li",[s._v("当有union result时，表名是union n1,n2等的形式，n1,n2表示参与union的id")])]),s._v(" "),t("h2",{attrs:{id:"_1-4-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-type"}},[s._v("#")]),s._v(" 1.4 type")]),s._v(" "),t("p",[s._v("type列描述如何连接表。")]),s._v(" "),t("p",[s._v("表示MySQL在表中找到所需行的方式，或者叫"),t("code",[s._v("访问类型")]),s._v("。\n常见类型：all,index,range,ref,eq_ref,const,system,null，性能由差到好。")]),s._v(" "),t("p",[s._v("一般需要保证查询至少达到range级，最好能达到ref。")]),s._v(" "),t("h3",{attrs:{id:"_1-4-1-all"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-all"}},[s._v("#")]),s._v(" 1.4.1 ALL")]),s._v(" "),t("p",[s._v("最简单暴力的全表扫描，MySQL遍历全表找到匹配行，效率最差。\n对来自先前表的行的每个组合进行全表扫描。若该表是未标记为const的第一个表，则通常不好，并且在所有其他情况下通常性能也非常糟糕。")]),s._v(" "),t("p",[s._v("一般可以通过增加索引来避免ALL，这些索引允许基于早期表中的常量值或列值从表中检索行。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" film "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rating "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_1-4-2-index"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-index"}},[s._v("#")]),s._v(" 1.4.2 index")]),s._v(" "),t("p",[s._v("连接类型与ALL相同，除了扫描索引树外。这发生于两种方式：")]),s._v(" "),t("ol",[t("li",[s._v("若索引是查询的覆盖索引，并且可用于满足表中所需的所有数据，则仅扫描索引树\n这种情况下，"),t("code",[s._v("Extra")]),s._v("列显示"),t("code",[s._v("Using index")]),s._v("。仅索引扫描通常比ALL更快，因索引大小通常小于表数据")]),s._v(" "),t("li",[s._v("使用对索引的读取执行全表扫描，以按索引顺序查找数据行。Extra列不显示 "),t("code",[s._v("Using index")]),s._v("。")])]),s._v(" "),t("p",[s._v("当查询仅使用属于单个索引一部分的列时，MySQL可以使用此连接类型。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" title "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" film"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_1-4-3-range"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-range"}},[s._v("#")]),s._v(" 1.4.3 range")]),s._v(" "),t("p",[s._v("使用索引查询行，仅检索给定范围内的行。\n"),t("code",[s._v("key")]),s._v("列指示使用的哪个索引。"),t("code",[s._v("key_len")]),s._v("包含使用的最长的键部分。\n此类型的"),t("code",[s._v("ref")]),s._v("="),t("code",[s._v("NULL")]),s._v("。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2021060216003320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_16,color_FFFFFF,t_70",alt:""}})]),s._v(" "),t("p",[s._v("当使用 "),t("code",[s._v("=, <>, >, >=, <, <=, IS NULL, <=>, BETWEEN, LIKE, or IN()")]),s._v("操作符将"),t("code",[s._v("key")]),s._v("列与常量进行比较时，可以使用range：\n索引范围扫描，常见<,<=,>,>=,between")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_part1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" key_part2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_1-4-4-index-subquery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-index-subquery"}},[s._v("#")]),s._v(" 1.4.4 index_subquery")]),s._v(" "),t("p",[s._v("此连接类型类似于unique_subquery。它代替了"),t("code",[s._v("IN")]),s._v("子查询，但适用于以下形式的子查询中的非唯一索引：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" key_column "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" single_table "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" some_expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_1-4-5-unique-subquery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-5-unique-subquery"}},[s._v("#")]),s._v(" 1.4.5 unique_subquery")]),s._v(" "),t("p",[s._v("此类型将eq_ref替换为以下形式的某些IN子查询：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" primary_key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" single_table "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" some_expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("unique_subquery只是一个索引查找函数，可以完全替换子查询以提高效率。")]),s._v(" "),t("h3",{attrs:{id:"_1-4-6-index-merge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-6-index-merge"}},[s._v("#")]),s._v(" 1.4.6 index_merge")]),s._v(" "),t("p",[s._v("此联接类型指示使用索引合并优化。在这种情况下，输出行中的键列包含使用的索引列表，而key_len包含使用的索引的最长键部分的列表。")]),s._v(" "),t("h3",{attrs:{id:"_1-4-7-ref-or-null"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-7-ref-or-null"}},[s._v("#")]),s._v(" 1.4.7 ref_or_null")]),s._v(" "),t("p",[s._v("这种连接类型类似于ref，但是MySQL会额外搜索包含NULL值的行。此联接类型优化最常用于解析子查询。在以下示例中，MySQL可以使用ref_or_null连接来处理ref_table：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_column"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("expr "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" key_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-4-8-fulltext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-8-fulltext"}},[s._v("#")]),s._v(" 1.4.8 fulltext")]),s._v(" "),t("p",[s._v("使用FULLTEXT索引执行连接。")]),s._v(" "),t("h3",{attrs:{id:"_1-4-9-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-9-ref"}},[s._v("#")]),s._v(" 1.4.9 ref")]),s._v(" "),t("p",[s._v("对于先前表中的每个行组合，将从该表中读取具有匹配索引值的所有行。\n如果连接仅使用键的最左前缀，或者如果该键不是PRIMARY KEY（主键）或UNIQUE（唯一）索引（即如果连接无法根据键值选择单行），则会使用ref。\n如果使用的键仅匹配几行，则这是一种很好的联接类型。")]),s._v(" "),t("p",[s._v("ref可以用于使用= or <=> 运算符进行比较的索引列。在以下示例中，MySQL可以使用ref联接来处理"),t("code",[s._v("ref_table")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" key_column"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("other_table\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("other_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("other_table\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column_part1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("other_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column_part2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_1-4-10-eq-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-10-eq-ref"}},[s._v("#")]),s._v(" 1.4.10 eq_ref")]),s._v(" "),t("p",[s._v("对于先前表中的每行组合，从此表中读取一行。除了system和const类型，这是最好的连接类型。\n当连接使用索引的所有部分并且索引是PRIMARY KEY或UNIQUE NOT NULL索引时，将使用它。")]),s._v(" "),t("p",[s._v("类似ref，区别在于所用索引是唯一索引，对于每个索引键值，表中有一条记录匹配；\n简单来说就是多表连接使用primary key或者unique index作为关联条件。")]),s._v(" "),t("p",[s._v("eq_ref可用于使用=运算符进行比较的索引列。比较值可以是常量，也可以是使用在此表之前读取的表中列的表达式。在以下示例中，MySQL可以使用eq_ref连接来处理ref_table：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("other_table\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("other_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("other_table\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column_part1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("other_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" ref_table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key_column_part2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_1-4-11-const"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-11-const"}},[s._v("#")]),s._v(" 1.4.11 const")]),s._v(" "),t("p",[s._v("表最多有一个匹配行，该行在查询开始时读取。因为只有一行，所以优化器的其余部分可以将这一行中列的值视为常量。 const表非常快，因为它们仅读取一次。")]),s._v(" "),t("p",[s._v("当将PRIMARY KEY或UNIQUE索引的所有部分与常量值进行比较时，将使用const。在以下查询中，tbl_name可以用作const表：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" primary_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tbl_name\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" primary_key_part1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" primary_key_part2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_1-4-12-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-12-system"}},[s._v("#")]),s._v(" 1.4.12 system")]),s._v(" "),t("p",[s._v("该表只有一行（系统表）。这是const 连接类型的特例。")]),s._v(" "),t("blockquote",[t("p",[s._v("type null，MySQL不用访问数据库直接得到结果。")])]),s._v(" "),t("h2",{attrs:{id:"_1-5-possible-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-possible-keys"}},[s._v("#")]),s._v(" 1.5 possible_keys")]),s._v(" "),t("p",[s._v("此次查询中可能选用的索引")]),s._v(" "),t("h2",{attrs:{id:"_1-6-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-key"}},[s._v("#")]),s._v(" 1.6 key")]),s._v(" "),t("p",[s._v("此次查询中确切使用到的索引")]),s._v(" "),t("h2",{attrs:{id:"_1-7-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-ref"}},[s._v("#")]),s._v(" 1.7 ref")]),s._v(" "),t("p",[s._v("哪个字段或常数与 key 一起被使用")]),s._v(" "),t("h2",{attrs:{id:"_1-8-rows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-rows"}},[s._v("#")]),s._v(" 1.8 rows")]),s._v(" "),t("p",[s._v("该查询一共扫描了多少行。\n这是一个估计值，不准确。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" d "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("force")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" c "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+--------------------------------------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+--------------------------------------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" t     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("                                 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" t     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" c    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Backward "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" scan"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("temporary")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+--------------------------------------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"_1-9-filtered"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-filtered"}},[s._v("#")]),s._v(" 1.9 filtered")]),s._v(" "),t("p",[s._v("此查询条件所过滤的数据的百分比")]),s._v(" "),t("h2",{attrs:{id:"_1-10-extra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-10-extra"}},[s._v("#")]),s._v(" 1.10 extra")]),s._v(" "),t("p",[s._v("额外信息：")]),s._v(" "),t("h3",{attrs:{id:"using-filesort"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-filesort"}},[s._v("#")]),s._v(" using filesort")]),s._v(" "),t("p",[s._v("性能消耗大，需要额外的一次查询（排序）。\n使用EXPLAIN可以检查MySQL是否可以使用索引来解析ORDER BY子句：")]),s._v(" "),t("ul",[t("li",[s._v("Extra列不包含Using filesort，则使用索引，并且不执行文件排序")]),s._v(" "),t("li",[s._v("Extra列包含Using filesort，则不使用索引，而是执行全文件排序\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200830055447215.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70#pic_center",alt:""}}),s._v("\nEXPLAIN不能区分优化器是否在内存中执行文件排序。在优化程序trace输出中可以看到内存文件排序的使用。查找filesort_priority_queue_optimization即可。")])]),s._v(" "),t("p",[s._v("对于单索引，若")]),s._v(" "),t("ul",[t("li",[s._v("排序和查找是同一字段，则不会出现该方式")]),s._v(" "),t("li",[s._v("不是，则会出现。")])]),s._v(" "),t("p",[s._v("对于联合索引，不能跨列（最左匹配原则）")]),s._v(" "),t("h3",{attrs:{id:"using-temporary"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-temporary"}},[s._v("#")]),s._v(" using temporary")]),s._v(" "),t("ul",[t("li",[s._v("建立临时表保存中间结果，查询完成之后把临时表删除。")])]),s._v(" "),t("h3",{attrs:{id:"using-index-性能提升"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-index-性能提升"}},[s._v("#")]),s._v(" using index（性能提升）")]),s._v(" "),t("p",[s._v("表示当前的查询是覆盖索引，直接从索引中读取数据，而无需访问原数据表（回表）。即需要使用到的列，全部都在索引中。")]),s._v(" "),t("ul",[t("li",[s._v("若同时出现"),t("strong",[s._v("using where")]),s._v("，则索引被用来执行索引键值的查找")]),s._v(" "),t("li",[s._v("若没有，则索引被用来读取数据，而不是真的查找")])]),s._v(" "),t("h3",{attrs:{id:"using-index-condition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-index-condition"}},[s._v("#")]),s._v(" using index condition")]),s._v(" "),t("p",[s._v("MySQL 5.6后加入的新特性（Index Condition Pushdown）。会先条件过滤索引，过滤完索引后找到所有符合索引条件的数据行，随后用 WHERE 子句中的其他条件去过滤这些数据行。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2021060216160788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_16,color_FFFFFF,t_70",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"using-where-需回表查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-where-需回表查询"}},[s._v("#")]),s._v(" using where（需回表查询）")]),s._v(" "),t("p",[s._v("使用where进行条件过滤。\n假设 age 为索引，如下 SQL")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" age "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"using-join-buffer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-join-buffer"}},[s._v("#")]),s._v(" using join buffer")]),s._v(" "),t("p",[s._v("使用连接缓存")]),s._v(" "),t("h3",{attrs:{id:"impossible-where"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#impossible-where"}},[s._v("#")]),s._v(" impossible where")]),s._v(" "),t("p",[s._v("where语句的结果总是false")]),s._v(" "),t("h3",{attrs:{id:"no-matching-row-in-const-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#no-matching-row-in-const-table"}},[s._v("#")]),s._v(" no matching row in const table")]),s._v(" "),t("p",[s._v("对于具有联接的查询，存在一个空表或没有满足唯一索引条件的行的表。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200830080723671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),t("p",[s._v("其实还有很多，不再过多描述。")]),s._v(" "),t("h2",{attrs:{id:"explain-extended"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#explain-extended"}},[s._v("#")]),s._v(" explain extended")]),s._v(" "),t("p",[s._v("MySQL 4.1引入explain extended命令，通过explain extended 加上show warnings可以查看MySQL 真正被执行之前优化器所做的操作")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可从warning字段看到，会去除一些恒成立的条件，可以利用explain extended的结果来迅速的获取一个更清晰易读的sql语句。")]),s._v(" "),t("h1",{attrs:{id:"_2-show-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-show-profile"}},[s._v("#")]),s._v(" 2 show profile")]),s._v(" "),t("p",[s._v("SHOW PROFILE和SHOW PROFILES语句显示概要信息，该信息指示在当前会话过程中执行的语句的资源使用情况。")]),s._v(" "),t("p",[s._v("SHOW PROFILE和SHOW PROFILES语句已被弃用，并将在以后的MySQL版本中删除，而改用性能模式。此处我们就简单介绍一下，大家知道有这个东西就行了。")]),s._v(" "),t("ul",[t("li",[s._v("查看是否开启profile\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020083005031578.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70#pic_center",alt:""}}),s._v("\n可见，默认profiling是关闭的。")])]),s._v(" "),t("p",[s._v("可通过set语句在session级别启动profiling：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" profiling"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("可查看执行过程中每个线程的状态和耗时。\n其中的 sendingdata 状态表示MySQL线程开始访问数据行并把结果返回给客户端，而不仅仅是返回给客户端，由于在sending data状态下，MySQL线程往往需要做大量的磁盘读取操作；所以经常是整个查询中最耗时的状态。")]),s._v(" "),t("p",[s._v("支持选择all,cpu,block io,context,switch,page faults等明细，来查看MySQL在使用什么资源上耗费了过高的时间，例如，选择查看cpu的耗费时间")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profile cpu "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("对比MyISAM的操作，同样执行count(*)操作，检查profile，Innodb表经历了Sending data状态，而MyISAM的表完全不需要访问数据")]),s._v(" "),t("p",[t("strong",[s._v("如果对MySQL 源码感兴趣")]),s._v("，可以通过show profile source for query查看sql解析执行过程的每个步骤对应的源码文件")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" profile source "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" query "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"_3-trace分析优化器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-trace分析优化器"}},[s._v("#")]),s._v(" 3 trace分析优化器")]),s._v(" "),t("p",[s._v("MySQL 5.6提供。通过trace文件能够进一步了解优化器的选择，更好地理解优化器的行为。")]),s._v(" "),t("h2",{attrs:{id:"使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[s._v("#")]),s._v(" 使用方式")]),s._v(" "),t("p",[s._v("开启trace，设置格式为json，设置trace最大能够使用的内存，避免解析过程中因为默认内存小而不能完整显示")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" optimizer_trace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"enabled=on"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("end_markers_in_json"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" optimizer_trace_max_mem_size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("接下来执行trace的sql语句")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("最后检查information_schema.optimizer_trace就可以知道Mysql如何执行sql")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" information_schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("optimizer_trace\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("参考")]),s._v(" "),t("ul",[t("li",[s._v("https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain-join-types")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);