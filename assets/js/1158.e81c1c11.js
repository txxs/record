(window.webpackJsonp=window.webpackJsonp||[]).push([[1158],{1554:function(a,t,s){"use strict";s.r(t);var e=s(13),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[a._v("#")]),a._v(" 1 概述")]),a._v(" "),s("p",[a._v("百度：我们比如说想找寻任何的信息的时候，就会上百度去搜索一下，比如说找一部自己喜欢的电影，或者说找一本喜欢的书，或者找一条感兴趣的新闻（提到搜索的第一印象）\n百度 != 搜索，这是不对的")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191022010647905.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"垂直搜索-站内搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#垂直搜索-站内搜索"}},[a._v("#")]),a._v(" 垂直搜索（站内搜索）")]),a._v(" "),s("ul",[s("li",[a._v("互联网的搜索：电商网站，招聘网站，新闻网站，各种app")]),a._v(" "),s("li",[a._v("IT系统的搜索：OA软件，办公自动化软件，会议管理，日程管理，项目管理，员工管理，搜索“张三”，“张三儿”，“张小三”；有个电商网站，卖家，后台管理系统，搜索“牙膏”，订单，“牙膏相关的订单”")])]),a._v(" "),s("p",[a._v("搜索，就是在任何场景下，找寻你想要的信息，这个时候，会输入一段你要搜索的关键字，然后就期望找到这个关键字相关的有些信息")]),a._v(" "),s("hr"),a._v(" "),s("h1",{attrs:{id:"_2-数据库搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据库搜索"}},[a._v("#")]),a._v(" 2 数据库搜索")]),a._v(" "),s("p",[a._v("数据都是存储在数据库里面的\n很自然的，如果从技术的角度去考虑，如何实现搜索，电商网站内部的搜索功能的话，就可以考虑，去使用数据库去进行搜索。")]),a._v(" "),s("h2",{attrs:{id:"_2-1-案例-电商系统的搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-案例-电商系统的搜索"}},[a._v("#")]),a._v(" 2.1 案例 - 电商系统的搜索")]),a._v(" "),s("ul",[s("li",[a._v("搜索含有牙膏的商品")]),a._v(" "),s("li",[a._v("在数据库中商品名称字段中存储有关键字")])]),a._v(" "),s("p",[a._v("数据库来处理的话，不考虑数据库的全文索引什么的，假如商品有 1000万 个，那么基本上就要查找 1000 万次，且每次都需要加载商品的名称字段的整段字符串，并挨个寻找。\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/201910220054339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("每条记录的指定字段的文本，可能会很长\n比如“商品描述”字段的长度，有长达数千个，甚至数万个字符，这个时候，每次都要对每条记录的所有文本进行扫描，懒判断说，你包不包含我指定的这个关键词（比如说“牙膏”）")]),a._v(" "),s("li",[a._v("无法将搜索词拆分开来\n尽可能去搜索更多的符合你的期望的结果，比如输入“生化机”，就搜索不出来“生化危机”")])]),a._v(" "),s("p",[a._v("用数据库来实现搜索，是不太靠谱的。通常来说，性能会很差的。")]),a._v(" "),s("hr"),a._v(" "),s("h1",{attrs:{id:"_3-全文检索-lucene"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-全文检索-lucene"}},[a._v("#")]),a._v(" 3 全文检索 & Lucene")]),a._v(" "),s("h2",{attrs:{id:"_3-1-全文检索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-全文检索"}},[a._v("#")]),a._v(" 3.1 全文检索")]),a._v(" "),s("h3",{attrs:{id:"_3-1-1-场景-搜索-生化机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-场景-搜索-生化机"}},[a._v("#")]),a._v(" 3.1.1 场景：搜索“生化机”")]),a._v(" "),s("ul",[s("li",[a._v("全文检索\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191022114619954.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70",alt:""}})])]),a._v(" "),s("p",[a._v("（有可能是手抖打错了，本来是生化危机），但是期望需要出来右侧的 4条 记录")]),a._v(" "),s("p",[a._v("有 4条 数据\n将每条数据进行词条拆分。如“生化危机电影”拆成：生化、危机、电影 关键词（拆分结果与策略算法有关）\n每个关键词将对应包含此关键词的数据 ID\n搜索的时候，直接匹配这些关键词，就能拿到包含关键词的数据\n这个过程就叫做全文检索。而词条拆分和词条对应的 ID 这个就是倒排索引的的基本原理")]),a._v(" "),s("h4",{attrs:{id:"对比数据库的缺陷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对比数据库的缺陷"}},[a._v("#")]),a._v(" 对比数据库的缺陷")]),a._v(" "),s("p",[a._v("数据库里的数据，共有100万条,按照之前的思路,其实就要扫描100万次，而且每次扫描,都需要匹配那个文本所有的字符，确认是否包含搜索的关键词，而且还不能将搜索词拆解开来进行检索")]),a._v(" "),s("h4",{attrs:{id:"利用倒排索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用倒排索引"}},[a._v("#")]),a._v(" 利用倒排索引")]),a._v(" "),s("p",[a._v("进行搜索的话，假设100万条数据,拆分出来的词语,假设有1000万个词语，那么在倒排索引中,就有1000万行,我们可能并不需要搜索1000万次。\n很可能说,在搜索到第一次的时候,我们就可以找到这个搜索词对应的数据。\n也可能是第100次,或者第1000次")]),a._v(" "),s("h2",{attrs:{id:"_3-2-lucene"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-lucene"}},[a._v("#")]),a._v(" 3.2 lucene")]),a._v(" "),s("p",[a._v("就是一个jar包，里面包含了封装好的各种建立倒排索引，以及进行搜索的代码，包括各种算法")]),a._v(" "),s("p",[a._v("java开发的时候，引入lucene jar，然后基于lucene的API进行去进行开发就可以了\n用lucene，我们就可以去将已有的数据建立索引，lucene会在本地磁盘上面，给我们组织索引的数据结构\n另外的话，我们也可以用lucene提供的一些功能和API来针对磁盘上额")]),a._v(" "),s("h1",{attrs:{id:"elasticsearch的适用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的适用场景"}},[a._v("#")]),a._v(" Elasticsearch的适用场景")]),a._v(" "),s("h2",{attrs:{id:"国外"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#国外"}},[a._v("#")]),a._v(" 国外")]),a._v(" "),s("p",[a._v("（1）维基百科，类似百度百科，牙膏，牙膏的维基百科，全文检索，高亮，搜索推荐\n（2）The Guardian（国外新闻网站），类似搜狐新闻，用户行为日志（点击，浏览，收藏，评论）+社交网络数据（对某某新闻的相关看法），数据分析，给到每篇新闻文章的作者，让他知道他的文章的公众反馈（好，坏，热门，垃圾，鄙视，崇拜）\n（3）Stack Overflow（国外的程序异常讨论论坛），IT问题，程序的报错，提交上去，有人会跟你讨论和回答，全文检索，搜索相关问题和答案，程序报错了，就会将报错信息粘贴到里面去，搜索有没有对应的答案\n（4）GitHub（开源代码管理），搜索上千亿行代码\n（5）电商网站，检索商品\n（6）日志数据分析，logstash采集日志，ES进行复杂的数据分析（ELK技术，elasticsearch+logstash+kibana）\n（7）商品价格监控网站，用户设定某商品的价格阈值，当低于该阈值的时候，发送通知消息给用户，比如说订阅牙膏的监控，如果高露洁牙膏的家庭套装低于50块钱，就通知我，我就去买\n（8）BI系统，商业智能，Business Intelligence。比如说有个大型商场集团，BI，分析一下某某区域最近3年的用户消费金额的趋势以及用户群体的组成构成，产出相关的数张报表，**区，最近3年，每年消费金额呈现100%的增长，而且用户群体85%是高级白领，开一个新商场。ES执行数据分析和挖掘，Kibana进行数据可视化")]),a._v(" "),s("h2",{attrs:{id:"国内"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#国内"}},[a._v("#")]),a._v(" 国内")]),a._v(" "),s("p",[a._v("（9）国内：站内搜索（电商，招聘，门户，等等），IT系统搜索（OA，CRM，ERP，等等），数据分析（ES热门的一个使用场景）")]),a._v(" "),s("h1",{attrs:{id:"elasticsearch的特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的特点"}},[a._v("#")]),a._v(" Elasticsearch的特点")]),a._v(" "),s("p",[a._v("（1）可以作为一个大型分布式集群（数百台服务器）技术，处理PB级数据，服务大公司；也可以运行在单机上，服务小公司\n（2）Elasticsearch不是什么新技术，主要是将全文检索、数据分析以及分布式技术，合并在了一起，才形成了独一无二的ES；lucene（全文检索），商用的数据分析软件（也是有的），分布式数据库（mycat）\n（3）对用户而言，是开箱即用的，非常简单，作为中小型的应用，直接3分钟部署一下ES，就可以作为生产环境的系统来使用了，数据量不大，操作不是太复杂\n（4）数据库的功能面对很多领域是不够用的（事务，还有各种联机事务型的操作）；特殊的功能，比如全文检索，同义词处理，相关度排名，复杂数据分析，海量数据的近实时处理；Elasticsearch作为传统数据库的一个补充，提供了数据库所不不能提供的很多功能")]),a._v(" "),s("h1",{attrs:{id:"elasticsearch的功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的功能"}},[a._v("#")]),a._v(" Elasticsearch的功能")]),a._v(" "),s("h2",{attrs:{id:"_1-分布式的搜索引擎和数据分析引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-分布式的搜索引擎和数据分析引擎"}},[a._v("#")]),a._v(" （1）分布式的搜索引擎和数据分析引擎")]),a._v(" "),s("p",[a._v("搜索：百度，网站的站内搜索，IT系统的检索\n数据分析：电商网站，最近7天牙膏这种商品销量排名前10的商家有哪些；新闻网站，最近1个月访问量排名前3的新闻版块是哪些\n分布式，搜索，数据分析")]),a._v(" "),s("h2",{attrs:{id:"_2-全文检索-结构化检索-数据分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-全文检索-结构化检索-数据分析"}},[a._v("#")]),a._v(" （2）全文检索，结构化检索，数据分析")]),a._v(" "),s("p",[a._v("全文检索：我想搜索商品名称包含牙膏的商品，select * from products where product_name like \"%牙膏%\"\n结构化检索：我想搜索商品分类为日化用品的商品都有哪些，select * from products where category_id='日化用品'\n部分匹配、自动完成、搜索纠错、搜索推荐\n数据分析：我们分析每一个商品分类下有多少个商品，select category_id,count(*) from products group by category_id")]),a._v(" "),s("h2",{attrs:{id:"_3-对海量数据进行近实时的处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-对海量数据进行近实时的处理"}},[a._v("#")]),a._v(" （3）对海量数据进行近实时的处理")]),a._v(" "),s("p",[a._v("分布式：ES自动可以将海量数据分散到多台服务器上去存储和检索\n海联数据的处理：分布式以后，就可以采用大量的服务器去存储和检索数据，自然而然就可以实现海量数据的处理了\n近实时：检索个数据要花费1小时（这就不要近实时，离线批处理，batch-processing）；在秒级别对数据进行搜索和分析")]),a._v(" "),s("p",[a._v("跟分布式/海量数据相反的：lucene，单机应用，只能在单台服务器上使用，最多只能处理单台服务器可以处理的数据量")]),a._v(" "),s("h1",{attrs:{id:"_4-elasticsearch的意义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-elasticsearch的意义"}},[a._v("#")]),a._v(" 4  Elasticsearch的意义")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191022114857908.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmF2YUVkZ2U=,size_1,color_FFFFFF,t_70",alt:""}})]),a._v(" "),s("p",[a._v("我们可以使用 lucene 开发搜索服务，部署在一台机器上面，但是无法解决当数据量增大的时候出现的问题（图上右侧）。\n那么 elasticsearch 就是解决这种场景的工具；")]),a._v(" "),s("ul",[s("li",[a._v("自动维护数据的分布到多个节点的索引建立、检索请求分布到多个节点的执行")]),a._v(" "),s("li",[a._v("自动维护数据的冗余副本，保证一些机器宕机了，不会丢失任何数据")]),a._v(" "),s("li",[a._v("封装了更多的高级功能")]),a._v(" "),s("li",[a._v("给我们提供更多高级的支持，让我们快速的开发应用，开发更加复杂的应用")]),a._v(" "),s("li",[a._v("复杂的搜索功能，聚合分析的功能，基于地理位置的搜多（距离我当前位置 1公里 以内的烤肉店）")])]),a._v(" "),s("h1",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E#%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[a._v("搜索引擎"),s("OutboundLink")],1)]),a._v(" "),s("li",[a._v("[Elasticsearch顶尖高手]")])])])}),[],!1,null,null,null);t.default=r.exports}}]);