(window.webpackJsonp=window.webpackJsonp||[]).push([[1187],{1586:function(t,a,_){"use strict";_.r(a);var s=_(13),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,_=t._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_1-简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1 简介")]),t._v(" "),_("p",[t._v("数据库设计(Database Design)是指对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能够有效地存储数据，满足各种用户的应用需求（信息要求和处理要求）。在数据库领域内，常常把使用数据库的各类系统统称为数据库应用系统。\n数据库设计的设计内容包括：需求分析、概念结构设计、逻辑结构设计、物理结构设计、数据库的实施和数据库的运行和维护。")]),t._v(" "),_("h1",{attrs:{id:"_2-数据库建模五部曲"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据库建模五部曲"}},[t._v("#")]),t._v(" 2 数据库建模五部曲")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035496_20190624224257923.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_3-需求总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-需求总结"}},[t._v("#")]),t._v(" 3 需求总结")]),t._v(" "),_("p",[t._v("◆ 课程的属性:{主标题,副标题,方向,分类，难度最新最热,时长,简介,人数,需知，收获,讲师名讲师职位,课程图片综合评分,内容实用,简洁易懂,逻辑清晰}")]),t._v(" "),_("p",[t._v("◆ 课程列表的属性:{章名,小节名, 说明,小节时长,章节URL,视频格式}")]),t._v(" "),_("p",[t._v("◆ 讲师的属性:{讲师昵称,说明，性别,省,市,职位说明,经验,积分,关注人数,粉丝人数}")]),t._v(" "),_("p",[t._v("◆ 问答评论属性:{类型,标题,内容，关联章节,浏览量,发布时间,用户昵称}")]),t._v(" "),_("p",[t._v("◆ 笔记的属性:{用户昵称,关联章节 笔记标题,笔记内容,发布时间}。")]),t._v(" "),_("p",[t._v("◆ 用户的属性:{用户昵称密码,说明,性别，省，市,职位，说明,经验,积分,关注人数粉丝人数}")]),t._v(" "),_("p",[t._v("◆评价的属性:{用户,课程主标题,内容,综合评分,内容实用,简洁易懂，逻辑清晰,发布时间}")]),t._v(" "),_("h1",{attrs:{id:"_4-宽表模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-宽表模式"}},[t._v("#")]),t._v(" 4 宽表模式")]),t._v(" "),_("p",[t._v("字段比较多的数据库表。")]),t._v(" "),_("p",[t._v("通常指业务主题相关的指标、维度、属性关联在一起的一张数据库表。由于把不同的内容都放在同一张表存储，宽表已经不符合三范式，随之带来的主要坏处就是数据大量冗余，与之相对应的好处就是查询性能的提高与便捷。这种宽表的设计广泛应用于数据挖掘模型训练前的数据准备，通过把相关字段放在同一张表中，可以大大提高数据挖掘模型训练过程中迭代计算时的效率问题。")]),t._v(" "),_("p",[t._v("◆ 课程的属性:{主标题,副标题,方向,分类难度最新，最热,时长,简介,人数,需知,收获,讲师名,讲师职位,课程图片综合评分，内容实用,简洁易懂,逻辑清晰}")]),t._v(" "),_("ul",[_("li",[t._v("实例\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174257_20190623051003118.png",alt:""}})])]),t._v(" "),_("h2",{attrs:{id:"_4-1-模式存在的问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-模式存在的问题"}},[t._v("#")]),t._v(" 4.1 模式存在的问题")]),t._v(" "),_("h3",{attrs:{id:"_4-1-1-更新异常"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-更新异常"}},[t._v("#")]),t._v(" 4.1.1  更新异常")]),t._v(" "),_("h4",{attrs:{id:"修改一行中某列的值时-同时修改了多行数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#修改一行中某列的值时-同时修改了多行数据"}},[t._v("#")]),t._v(" 修改一行中某列的值时,同时修改了多行数据")]),t._v(" "),_("p",[t._v("例如当使用\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174441_20190623121010918.png",alt:""}}),t._v("\n想修改其职位时,不止影响一条数据\n那么,我们再加个限定条件\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174522_20190623121200518.png",alt:""}}),t._v("\n就可以只修改一行数据,因此我们可以将主标题作为该数据表的唯一标识,即主键!\n通过主键更新数据,虽然可以避免数据的更新异常,但也可能会造成表中的数据不一致现象,比如该实例中,讲师的职称就会产生多义.")]),t._v(" "),_("h3",{attrs:{id:"_4-1-2-插入异常"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-插入异常"}},[t._v("#")]),t._v(" 4.1.2 插入异常")]),t._v(" "),_("h4",{attrs:{id:"部分数据由于缺失主键信息而无法写入表中"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#部分数据由于缺失主键信息而无法写入表中"}},[t._v("#")]),t._v(" 部分数据由于缺失主键信息而无法写入表中")]),t._v(" "),_("p",[t._v("例如,我们想新增Java开发方向的课程\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174311_20190623122447989.png",alt:""}}),t._v("\n由于执行该语句时,PK为空,即违反了PK非空且唯一的约束条件,因此该语句无法成功.")]),t._v(" "),_("h3",{attrs:{id:"_4-1-3-删除异常"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-删除异常"}},[t._v("#")]),t._v(" 4.1.3 删除异常")]),t._v(" "),_("h4",{attrs:{id:"删除某一数据时不得不删除另一数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#删除某一数据时不得不删除另一数据"}},[t._v("#")]),t._v(" 删除某一数据时不得不删除另一数据")]),t._v(" "),_("p",[t._v("例如,我们想删除数据库方向\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174309_20190623122932623.png",alt:""}})]),t._v(" "),_("p",[t._v("我们只是单纯想删除数据库方向而已,但该语句却将许多课程也删除了,这并不符合我们的预期.")]),t._v(" "),_("h3",{attrs:{id:"_4-1-4-数据冗余"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-4-数据冗余"}},[t._v("#")]),t._v(" 4.1.4 数据冗余")]),t._v(" "),_("p",[t._v("相同的数据在一个表中出现了多次，那么是不是这么多问题就意味着宽表一无是处呢？\n存在即合理!")]),t._v(" "),_("h2",{attrs:{id:"_4-2-模式的适用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-模式的适用场景"}},[t._v("#")]),t._v(" 4.2 模式的适用场景")]),t._v(" "),_("h3",{attrs:{id:"配合列存储的数据报表应用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配合列存储的数据报表应用"}},[t._v("#")]),t._v(" 配合列存储的数据报表应用")]),t._v(" "),_("p",[t._v("由于宽表中,所有数据存在于一个表中,因此在查询时,无需多表查询,SQL执行效率较高,且存在的上述问题在报表应用中都不是大问题")]),t._v(" "),_("p",[t._v("既然宽表不适合我们的当前业务,那么怎么寻找合适的方法呢?")]),t._v(" "),_("p",[t._v("详见《MySQL数据库设计三范式》")]),t._v(" "),_("h1",{attrs:{id:"_6-课程实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-课程实体的逻辑建模"}},[t._v("#")]),t._v(" 6 课程实体的逻辑建模")]),t._v(" "),_("h3",{attrs:{id:"属性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("{主标题,副标题,方向,分类,难度,最新,最热,时长,简介,人数,需知，收获,讲师名讲师职位,课程图片综合评分,内容实用,简洁易懂,逻辑清晰}")]),t._v(" "),_("p",[t._v("我们显然可以将其拆分如下:")]),t._v(" "),_("h3",{attrs:{id:"课程表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程表"}},[t._v("#")]),t._v(" 课程表")]),t._v(" "),_("p",[t._v("主标题"),_("code",[t._v("(PK)")]),t._v(",副标题,方向,分类,难度,上线时间,学习人数,时长，简介,需知,收获,讲师昵称,课程图片,综合评分，内容实用,简洁易懂,逻辑清晰")]),t._v(" "),_("h3",{attrs:{id:"讲师表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#讲师表"}},[t._v("#")]),t._v(" 讲师表")]),t._v(" "),_("p",[t._v("讲师名及讲师的职称")]),t._v(" "),_("p",[t._v("其中"),_("code",[t._v("最新")]),t._v("属性即对应着上线时间计算得出,业务上可规定时间段判断是否为最新\n"),_("code",[t._v("最热")]),t._v("属性即可以学习人数字段排序来反映")]),t._v(" "),_("h3",{attrs:{id:"课程方向表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程方向表"}},[t._v("#")]),t._v(" 课程方向表")]),t._v(" "),_("p",[t._v("课程方向名称"),_("code",[t._v("(PK)")]),t._v(" : 在课程表中有对应的方向字段\n添加时间")]),t._v(" "),_("h3",{attrs:{id:"课程分类表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程分类表"}},[t._v("#")]),t._v(" 课程分类表")]),t._v(" "),_("p",[t._v("分类名称"),_("code",[t._v("(PK)")]),t._v(" : 在课程表中有对应的方向字段\n添加时间")]),t._v(" "),_("h3",{attrs:{id:"课程难度表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程难度表"}},[t._v("#")]),t._v(" 课程难度表")]),t._v(" "),_("p",[t._v("课程难度"),_("code",[t._v("(PK)")]),t._v(" : 在课程表中有对应的方向字段\n添加时间")]),t._v(" "),_("h1",{attrs:{id:"_7-课程列表实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_7-课程列表实体的逻辑建模"}},[t._v("#")]),t._v(" 7 课程列表实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-2"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("[章节名,小节名]"),_("code",[t._v("(联合PK)")]),t._v("\n说明,小节时长，章节URL,视频格式")]),t._v(" "),_("p",[t._v("其中,"),_("code",[t._v("说明")]),t._v("其实只依赖于"),_("code",[t._v("章节名")]),t._v(" "),_("code",[t._v("小节时长")]),t._v("，"),_("code",[t._v("小节URL")]),t._v(","),_("code",[t._v("视频格式")]),t._v("都只依赖于"),_("code",[t._v("小节名")]),t._v("\n违反第二范式,所以需要拆分字段")]),t._v(" "),_("h2",{attrs:{id:"课程章节表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程章节表"}},[t._v("#")]),t._v(" 课程章节表")]),t._v(" "),_("p",[t._v("章节名"),_("code",[t._v("(PK)")]),t._v(",说明,章节编号")]),t._v(" "),_("h2",{attrs:{id:"课程与章节的联系表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程与章节的联系表"}},[t._v("#")]),t._v(" 课程与章节的联系表")]),t._v(" "),_("p",[t._v("主标题,章节名")]),t._v(" "),_("h2",{attrs:{id:"课程小节表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程小节表"}},[t._v("#")]),t._v(" 课程小节表")]),t._v(" "),_("p",[t._v("小节名称(PK),小节视频url,视频格式,小节时长,小节编号")]),t._v(" "),_("h2",{attrs:{id:"课程章节与小节的联系表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#课程章节与小节的联系表"}},[t._v("#")]),t._v(" 课程章节与小节的联系表")]),t._v(" "),_("p",[t._v("主标题,章节名,小节名")]),t._v(" "),_("h1",{attrs:{id:"_8-讲师实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_8-讲师实体的逻辑建模"}},[t._v("#")]),t._v(" 8 讲师实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-3"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("讲师名,密码,性别,省,市,职称,说明,经验,积分,关注数,粉丝数")]),t._v(" "),_("h2",{attrs:{id:"讲师表-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#讲师表-2"}},[t._v("#")]),t._v(" 讲师表")]),t._v(" "),_("p",[t._v("讲师名"),_("code",[t._v("(PK)")]),t._v(",密码,性别,省,市,职称,说明,经验,积分,关注数,粉丝数")]),t._v(" "),_("h1",{attrs:{id:"_9-用户实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_9-用户实体的逻辑建模"}},[t._v("#")]),t._v(" 9 用户实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-4"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("用户昵称，密码，性别，省市,职位,说明,经验，积分,关注数,粉丝数")]),t._v(" "),_("h2",{attrs:{id:"用户表v1-0"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户表v1-0"}},[t._v("#")]),t._v(" 用户表V1.0")]),t._v(" "),_("p",[t._v("用户昵称"),_("code",[t._v("(PK)")]),t._v("，密码，性别，省市,职位,说明,经验，积分,关注数,粉丝数")]),t._v(" "),_("p",[t._v("和讲师表基本相同,且讲师其实也是一种用户,讲师的信息就会被存储两次,造成数据的冗余.,于是就难以保持数据一致性!考虑合并!")]),t._v(" "),_("h2",{attrs:{id:"用户表v2-0"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户表v2-0"}},[t._v("#")]),t._v(" 用户表V2.0")]),t._v(" "),_("p",[t._v("用户昵称"),_("code",[t._v("(PK)")]),t._v("，密码，性别，省市,职位,说明,经验，积分,关注数,粉丝数,讲师标识")]),t._v(" "),_("h1",{attrs:{id:"_10-问答评论实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_10-问答评论实体的逻辑建模"}},[t._v("#")]),t._v(" 10 问答评论实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-5"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("类型,标题,内容关联章节,浏览量,发布时间,用户昵称")]),t._v(" "),_("p",[t._v("其中标题文字是共享的,无法保持一致\n同一用户在不同章节提出的问题也可能相同\n因此决定采用"),_("code",[t._v("标题+用户昵称+关联章节")]),t._v("作为PK")]),t._v(" "),_("h2",{attrs:{id:"评论表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#评论表"}},[t._v("#")]),t._v(" 评论表")]),t._v(" "),_("p",[t._v("如何记录关联章节字段呢?\n是不是只能用课程章节的PK来记录呢?\n因此,不得不将课程章节的关联表PK加入\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174472_20190624040825552.png",alt:""}})]),t._v(" "),_("p",[_("code",[t._v("[标题,课程主标题,课程章名,小节名称,用户呢称](PK)")]),t._v("\n父评论(被回复的问题/标题)\n标题,内容,类型,浏览量,发布时间")]),t._v(" "),_("h1",{attrs:{id:"_11-笔记实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_11-笔记实体的逻辑建模"}},[t._v("#")]),t._v(" 11 笔记实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-6"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-6"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("用户昵称,关联章节,笔记标题,笔记内容，发布时间")]),t._v(" "),_("p",[t._v("和评论实体差不多,分析不再赘述")]),t._v(" "),_("h2",{attrs:{id:"笔记表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#笔记表"}},[t._v("#")]),t._v(" 笔记表")]),t._v(" "),_("p",[_("code",[t._v("[笔记标题,课程主标题,课程章名,小节名称,用户呢称](PK)")]),t._v("\n内容,发布时间")]),t._v(" "),_("h1",{attrs:{id:"_12-评价实体的逻辑建模"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_12-评价实体的逻辑建模"}},[t._v("#")]),t._v(" 12 评价实体的逻辑建模")]),t._v(" "),_("h2",{attrs:{id:"属性-7"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#属性-7"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),_("p",[t._v("用户呢称;课程主标题,内容,综合评分,内容实用,简洁易懂,逻辑清晰，发布时间")]),t._v(" "),_("h2",{attrs:{id:"评价表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#评价表"}},[t._v("#")]),t._v(" 评价表")]),t._v(" "),_("p",[_("code",[t._v("[用户呢称;课程主标题](PK)")]),t._v("\n内容,综合评分,内容实用,简洁易懂,逻辑清晰，发布时间")]),t._v(" "),_("blockquote",[_("p",[t._v("只有选择/购买了课程的用户才能评价!!!\n需要用户与所选课程的关联关系表")])]),t._v(" "),_("h2",{attrs:{id:"用户选课表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户选课表"}},[t._v("#")]),t._v(" 用户选课表")]),t._v(" "),_("p",[_("code",[t._v("[用户呢称;课程主标题](PK)")]),t._v("\n选课时间,累积听课时长")]),t._v(" "),_("h1",{attrs:{id:"_13-小结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_13-小结"}},[t._v("#")]),t._v(" 13 小结")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174450_20190624043607186.png",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174268_20190624043642167.png",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174204_20190624043734794.png",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174480_20190624043803145.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_14-范式化暴露的问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_14-范式化暴露的问题"}},[t._v("#")]),t._v(" 14 范式化暴露的问题")]),t._v(" "),_("p",[t._v("如果我们想要查询出一门课程包括所有章节和小节的相关信息\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174437_20190624045825787.png",alt:""}}),t._v("\n那么这些信息又是如何存储的呢,需要查询哪些表呢?如下所示\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174357_20190624045205689.png",alt:""}})]),t._v(" "),_("p",[t._v("我们就要关联5个表,查询效率极低!且查询课程信息的需求很大!\n为了提高性能,我们还需要对表结构进行优化操作")]),t._v(" "),_("h1",{attrs:{id:"_15-反范式化设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_15-反范式化设计"}},[t._v("#")]),t._v(" 15 反范式化设计")]),t._v(" "),_("p",[_("code",[t._v("空间换时间的思想")])]),t._v(" "),_("h2",{attrs:{id:"_15-1-课程章节表反范式化设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_15-1-课程章节表反范式化设计"}},[t._v("#")]),t._v(" 15.1 课程章节表反范式化设计")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174307_20190624050310144.png",alt:""}}),t._v("\n上述表存在一对多的关系")]),t._v(" "),_("p",[t._v("所以可以并不需要关联关系表,而是呢可以直接把课程表和课程&章节联系表合并\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174120_20190624050618756.png",alt:""}}),t._v("\n成为新的"),_("code",[t._v("课程章节表")]),t._v(" "),_("code",[t._v("[主标题,章节名](PK)")]),t._v(",说明,章节编号")]),t._v(" "),_("p",[t._v("虽然违反了第二范式,但是减少了一个表的查询,提高了查询性能,在频繁查询操作的系统中,这很值得!")]),t._v(" "),_("p",[t._v("经过反范式化后,我们只需要查询三个表即可\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174384_20190624065722137.png",alt:" "}})]),t._v(" "),_("h2",{attrs:{id:"_15-2-反范式化设计小结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-反范式化设计小结"}},[t._v("#")]),t._v(" 15.2 反范式化设计小结")]),t._v(" "),_("p",[t._v("课程相关表数量 5 -> 3\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174704_20190624065937687.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_16-常用存储引擎"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_16-常用存储引擎"}},[t._v("#")]),t._v(" 16 常用存储引擎")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174883_20190624070614662.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_17-innodb存储引擎的特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_17-innodb存储引擎的特点"}},[t._v("#")]),t._v(" 17 InnoDB存储引擎的特点")]),t._v(" "),_("ul",[_("li",[t._v("事务型存储引擎支持ACID")]),t._v(" "),_("li",[t._v("数据按主键聚集存储")]),t._v(" "),_("li",[t._v("支持行级锁及MVCC")]),t._v(" "),_("li",[t._v("支持Btree和自适应Hash索引")]),t._v(" "),_("li",[t._v("支持全文和空间索引")])]),t._v(" "),_("h1",{attrs:{id:"_18-根据-innodb特性优化后的表逻辑结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_18-根据-innodb特性优化后的表逻辑结构"}},[t._v("#")]),t._v(" 18 根据 InnoDB特性优化后的表逻辑结构")]),t._v(" "),_("p",[t._v("通过数据冗余避免数据不一致\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561332174605_20190624071739260.png",alt:""}})]),t._v(" "),_("p",[t._v("课程章节表:{章节ID(PK),课程ID，章节名称,章节说明,章节编号}")]),t._v(" "),_("p",[t._v("课程小节表:{小节ID(PK),课程ID,章节ID,小节名称,小节视频url,视频格式，小节时长,小节编号}。")]),t._v(" "),_("p",[t._v("课程方向表:{课程方向ID(PK),课程方向名称,填加时间}")]),t._v(" "),_("p",[t._v("课程分类表:{课程分类ID(PK),分类名称,填加时间}")]),t._v(" "),_("p",[t._v("课程难度表:{课程难度ID(PK) ,课程难度，填加时间}")]),t._v(" "),_("p",[t._v("用户表:{用户ID(PK)，用户昵称,密码，性别，省市,职位,说明，经验,积分,关注\n人数,粉丝人数,讲师标识}")]),t._v(" "),_("p",[t._v("问答评论表:{评论ID(PK),父评论ID ,课程ID，章节ID,小节ID ,评论标题,用户\nID,内容,类型,浏览量,发布时间}")]),t._v(" "),_("p",[t._v("笔记表:{笔记ID(PK),课程ID,章节ID,小节ID笔记标题,用户呢称,笔记内容,\n发布时间}")]),t._v(" "),_("p",[t._v("评价表:{评价ID(PK)，用户ID,课程ID,内容综合评分,内容实用,简洁易懂,逻\n辑清晰,发布时间}")]),t._v(" "),_("p",[t._v("用户选课表:{用户选课ID(PK),用户ID,课程ID,选课时间，累积听课时长}")]),t._v(" "),_("h1",{attrs:{id:"_19-常用的整数类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_19-常用的整数类型"}},[t._v("#")]),t._v(" 19 常用的整数类型")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035934_20190624072743609.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_20-常用的浮点类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_20-常用的浮点类型"}},[t._v("#")]),t._v(" 20 常用的浮点类型")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035732_20190624072929214.png",alt:""}})]),t._v(" "),_("ul",[_("li",[t._v("例如:\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035733_20190624073012554.png",alt:""}})])]),t._v(" "),_("h2",{attrs:{id:"实战实数类型的特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实战实数类型的特点"}},[t._v("#")]),t._v(" 实战实数类型的特点")]),t._v(" "),_("ul",[_("li",[t._v("建立测试数据库\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035635_20190624073903502.png",alt:""}})]),t._v(" "),_("li",[t._v("新建表\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035667_20190624073839792.png",alt:""}})]),t._v(" "),_("li",[t._v("插入数据至t表中\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035941_20190624074039757.png",alt:""}})])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035769_20190624074201326.png",alt:""}})]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035591_20190624074636804.png",alt:""}})]),t._v(" "),_("ul",[_("li",[t._v("查询和\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035689_20190624074812557.png",alt:""}})]),t._v(" "),_("li",[t._v("和的结果\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035595_20190624074841452.png",alt:""}}),t._v("\n所以只有decimal是精确的浮点类型")])]),t._v(" "),_("h2",{attrs:{id:"_21-常用的时间类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_21-常用的时间类型"}},[t._v("#")]),t._v(" 21 常用的时间类型")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035887_20190624075102750.png",alt:""}})]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035845_20190624213835599.png",alt:""}})]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035501_20190624213852511.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"实战时间类型的特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实战时间类型的特点"}},[t._v("#")]),t._v(" 实战时间类型的特点")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("新建表\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035775_20190624214347452.png",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("插入数据\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035615_20190624214436902.png",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("查询结果\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035625_20190624214516428.png",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("由于北京时间是东八区,因此我们更改时区\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035770_20190624214653573.png",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("新的查询结果\n"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035662_20190624214731759.png",alt:""}}),t._v(" "),_("code",[t._v("这就是timestamp具有时区性的特点")])])])]),t._v(" "),_("h1",{attrs:{id:"_22-字符串类型的特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_22-字符串类型的特点"}},[t._v("#")]),t._v(" 22 字符串类型的特点")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035547_20190624215009519.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_23-如何为数据选择合适的的数据类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-如何为数据选择合适的的数据类型"}},[t._v("#")]),t._v(" 23 如何为数据选择合适的的数据类型")]),t._v(" "),_("h2",{attrs:{id:"_23-1-优先选择符合存储数据需求的最小数据类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-1-优先选择符合存储数据需求的最小数据类型"}},[t._v("#")]),t._v(" 23.1 优先选择符合存储数据需求的最小数据类型")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("INET_ATON( '255.255.255.255' ) = 4294967295\nINET_ NTOA(4294967295) ='255.255.255.255'\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("h2",{attrs:{id:"_23-2-谨慎使用enum-text字符串类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-2-谨慎使用enum-text字符串类型"}},[t._v("#")]),t._v(" 23.2 谨慎使用ENUM,TEXT字符串类型")]),t._v(" "),_("h3",{attrs:{id:"_23-2-1-enum-的迁移"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-2-1-enum-的迁移"}},[t._v("#")]),t._v(" 23.2.1 ENUM 的迁移")]),t._v(" "),_("p",[t._v("数据迁移的时候，它几乎不可能被其他数据库所支持，如果 ENUM 里面是字符串，对于其他数据库来说就更郁闷了，还不能设为tinyint等类型的字段")]),t._v(" "),_("h3",{attrs:{id:"_23-2-2-enum-的索引"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-2-2-enum-的索引"}},[t._v("#")]),t._v(" 23.2.2 ENUM 的索引")]),t._v(" "),_("p",[t._v("纯数字类型的不建议用枚举类型，这是因为在 ENUM 内部维护有一个隐形的索引，也是按数字排列的，容易混淆；添加枚举值也是一个问题，如果添加在最后还好，如果添加在中间什么位置的话，原来的隐藏索引将不再起作用")]),t._v(" "),_("h3",{attrs:{id:"_23-2-3-enum-字段-的null-值"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-2-3-enum-字段-的null-值"}},[t._v("#")]),t._v(" 23.2.3 ENUM 字段 的NULL 值")]),t._v(" "),_("p",[t._v("ENUM 字段默认是可以插入 NULL 值的，这个就比较尴尬了，而且没有办法优化")]),t._v(" "),_("h3",{attrs:{id:"_23-2-4-插入的值"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-2-4-插入的值"}},[t._v("#")]),t._v(" 23.2.4 插入的值")]),t._v(" "),_("p",[t._v("如果插入的值比ENUM设定的值大，会默认保存成接近的那个值；插入的值不能包含函数，不能传递参数")]),t._v(" "),_("p",[t._v("所以如果插入的值是数字型的，建议用tinyint，如果插入的值是字符型的，建议用char。如果真想用 ENUM 也是可以得，前提是要了解到 ENUM 的弊端，就可以有效规避这些问题")]),t._v(" "),_("h2",{attrs:{id:"_23-4-同财务相关的数值型数据-必需使用decimal类型。"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_23-4-同财务相关的数值型数据-必需使用decimal类型。"}},[t._v("#")]),t._v(" 23.4 同财务相关的数值型数据,必需使用decimal类型。")]),t._v(" "),_("h1",{attrs:{id:"_24-为项目表们选择合适的数据类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-为项目表们选择合适的数据类型"}},[t._v("#")]),t._v(" 24 为项目表们选择合适的数据类型")]),t._v(" "),_("h2",{attrs:{id:"_24-1-课程表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-1-课程表"}},[t._v("#")]),t._v(" 24.1 课程表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035524_20190624220448864.png",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035544_20190624220532683.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-2-章节表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-2-章节表"}},[t._v("#")]),t._v(" 24.2 章节表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035868_20190624220751788.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-3-小节表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-3-小节表"}},[t._v("#")]),t._v(" 24.3 小节表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035851_20190624220947429.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-4-课程分类表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-4-课程分类表"}},[t._v("#")]),t._v(" 24.4 课程分类表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035606_2019062422130672.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-5-课程难度表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-5-课程难度表"}},[t._v("#")]),t._v(" 24.5 课程难度表"),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035688_20190624221327715.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-5-课程方向表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-5-课程方向表"}},[t._v("#")]),t._v(" 24.5 课程方向表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035688_2019062422140038.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-6-用户表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-6-用户表"}},[t._v("#")]),t._v(" 24.6 用户表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035843_20190624221731452.png",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035788_20190624221918613.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-7-问答评论表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-7-问答评论表"}},[t._v("#")]),t._v(" 24.7 问答评论表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035912_20190624222632658.png",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"_24-8-笔记表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-8-笔记表"}},[t._v("#")]),t._v(" 24.8 笔记表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035774_20190624222735488.png",alt:"在这里插入图片描述"}})]),t._v(" "),_("h2",{attrs:{id:"_24-9-用户选课表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-9-用户选课表"}},[t._v("#")]),t._v(" 24.9 用户选课表")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20190624/5088755_1561388035752_20190624222854243.png",alt:""}})]),t._v(" "),_("h1",{attrs:{id:"_30-如何为表和列选择合适的名字"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_30-如何为表和列选择合适的名字"}},[t._v("#")]),t._v(" 30 如何为表和列选择合适的名字")]),t._v(" "),_("ul",[_("li",[t._v("所有数据库对像名称必须使用小写字母可选用下划线分割")]),t._v(" "),_("li",[t._v("所有数据库对像名称定义禁止使用MySQL保留关建字")]),t._v(" "),_("li",[t._v("数据库对像的命名要能做到见名识义,并且最好不要超过32个字")]),t._v(" "),_("li",[t._v("临时库表必须以tmp为前缀并以日期为后缀")]),t._v(" "),_("li",[t._v("用于备份的库,表必须以bak为前缀并以日期为后缀")]),t._v(" "),_("li",[t._v("所有存储相同数据的列名和列类型必须一致。")])]),t._v(" "),_("h1",{attrs:{id:"_31-总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_31-总结"}},[t._v("#")]),t._v(" 31 总结")]),t._v(" "),_("h2",{attrs:{id:"工程师的必备技能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#工程师的必备技能"}},[t._v("#")]),t._v(" 工程师的必备技能")]),t._v(" "),_("p",[t._v("1、前奏：【业务分析】欲善其事，必三思而行；")]),t._v(" "),_("p",[t._v("2、高潮：【逻辑设计】范式化VS反范式化；")]),t._v(" "),_("p",[t._v("3、结束：【物理设计】存储引擎&数据类型&命名规约。")]),t._v(" "),_("h2",{attrs:{id:"内容综述"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内容综述"}},[t._v("#")]),t._v(" 内容综述")]),t._v(" "),_("ul",[_("li",[t._v("数据库的逻辑设计规范")]),t._v(" "),_("li",[t._v("MySQL的常用存储引擎及其选择方法")]),t._v(" "),_("li",[t._v("MySQL的常用数据类型及其选择方法")]),t._v(" "),_("li",[t._v("如何为表选择适合的存储类型")]),t._v(" "),_("li",[t._v("如何为表起一个好名")])]),t._v(" "),_("h1",{attrs:{id:"参考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据库设计"),_("OutboundLink")],1),t._v(" "),_("a",{attrs:{href:"https://my.oschina.net/u/3023401/blog/1439064",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL慎用 ENUM 字段"),_("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);