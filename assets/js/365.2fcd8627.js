(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{757:function(t,s,a){"use strict";a.r(s);var e=a(13),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"初步解析-document-的核心元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初步解析-document-的核心元数据"}},[t._v("#")]),t._v(" 初步解析 document 的核心元数据")]),t._v(" "),a("p",[t._v("初步解析 document 的核心元数据以及图解剖析 index 创建反例")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#index-元数据"}},[t._v("_index 元数据")])]),a("li",[a("a",{attrs:{href:"#type元数据"}},[t._v("_type元数据")])]),a("li",[a("a",{attrs:{href:"#id元数据"}},[t._v("_id元数据")])])])]),a("p"),t._v(" "),a("ol",[a("li",[a("code",[t._v("_index 元数据")])]),t._v(" "),a("li",[a("code",[t._v("_type元数据")])]),t._v(" "),a("li",[a("code",[t._v("_id元数据")])])]),t._v(" "),a("p",[t._v("插入一条数据查看返回来的元数据信息")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("PUT /test_index/test_type/"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test_content"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test test"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n------------ 响应\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_index"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test_index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"result"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_shards"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"total"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"successful"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"failed"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"created"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("h2",{attrs:{id:"index-元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-元数据"}},[t._v("#")]),t._v(" "),a("code",[t._v("_index 元数据")])]),t._v(" "),a("p",[t._v("简单说：可以看成是 mysql 中的一个库")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("代表一个 document 存放在哪个 index 中")])]),t._v(" "),a("li",[a("p",[t._v("类似的数据放在一个索引，非类似的数据放不同索引")]),t._v(" "),a("p",[t._v("product index（包含了所有的商品），")]),t._v(" "),a("p",[t._v("sales index（包含了所有的商品销售数据），")]),t._v(" "),a("p",[t._v("inventory index（包含了所有库存相关的数据）。")]),t._v(" "),a("p",[t._v("如果你把 product，sales，human resource（employee），全都放在一个大的 index 里面，比如说 company index，不合适的。")])]),t._v(" "),a("li",[a("p",[t._v("index 中包含了很多类似的 document")]),t._v(" "),a("p",[t._v("类似是什么意思?")]),t._v(" "),a("p",[t._v("其实指的就是说，这些 document 的 fields 很大一部分是相同的，你说你放了 3个 document，每个 document 的 fields 都完全不一样，这就不是类似了，就不太适合放到一个index里面去了。\n大致上的意思就是：在查询不相关数据的时候，相同 index 下所占用的资源是共享的，不相关的资源访问的时候就会影响它的访问（当然是在数据量很大的情况下容易感受到这种性能情况）")])]),t._v(" "),a("li",[a("p",[t._v("索引名称必须是小写的，不能用下划线开头，不能包含逗号；如：product，website，blog 都可以")])])]),t._v(" "),a("p",[t._v("下面图解不类似的情况下出现的性能问题")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://txxs.github.io/pic/imocc/elasticsearch-core/markdown-img-paste-20190101155232556.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"type元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type元数据"}},[t._v("#")]),t._v(" "),a("code",[t._v("_type元数据")])]),t._v(" "),a("p",[t._v("简单说：可以看成是 mysql 一个库中的表")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("代表 document 属于 index 中的哪个类别（type）")])]),t._v(" "),a("li",[a("p",[t._v("一个索引通常会划分为多个 type，逻辑上对 index 中有些许不同的几类数据进行分类")]),t._v(" "),a("p",[t._v("因为一批相同的数据，可能有很多相同的 fields，但是还是可能会有一些轻微的不同，可能会有少数 fields 是不一样的，举个例子，就比如说，商品，可能划分为电子商品，生鲜商品，日化商品，等等。")])]),t._v(" "),a("li",[a("p",[t._v("type 名称可以是大写或者小写，但是同时不能用下划线开头，不能包含逗号")])])]),t._v(" "),a("h2",{attrs:{id:"id元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#id元数据"}},[t._v("#")]),t._v(" "),a("code",[t._v("_id元数据")])]),t._v(" "),a("ol",[a("li",[t._v("代表 document 的唯一标识，与 index 和 type 一起，可以唯一标识和定位一个 document")]),t._v(" "),a("li",[t._v("我们可以手动指定 document 的 id（put /index/type/id），也可以不指定，由 es 自动为我们创建一个 id")])])])}),[],!1,null,null,null);s.default=n.exports}}]);