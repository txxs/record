(window.webpackJsonp=window.webpackJsonp||[]).push([[1247],{1639:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("æœ¬æ–‡ç”± "),a("a",{attrs:{href:"https://github.com/Snailclimb",target:"_blank",rel:"noopener noreferrer"}},[t._v("SnailClimb"),a("OutboundLink")],1),t._v(" å’Œ "),a("a",{attrs:{href:"https://github.com/guang19",target:"_blank",rel:"noopener noreferrer"}},[t._v("guang19"),a("OutboundLink")],1),t._v(" å…±åŒå®Œæˆã€‚")])]),t._v(" "),a("h2",{attrs:{id:"äº‹åŠ¡éš”ç¦»çº§åˆ«-å›¾æ–‡è¯¦è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡éš”ç¦»çº§åˆ«-å›¾æ–‡è¯¦è§£"}},[t._v("#")]),t._v(" äº‹åŠ¡éš”ç¦»çº§åˆ«(å›¾æ–‡è¯¦è§£)")]),t._v(" "),a("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯äº‹åŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯äº‹åŠ¡"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯äº‹åŠ¡?")]),t._v(" "),a("p",[t._v("äº‹åŠ¡æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("äº‹åŠ¡æœ€ç»å…¸ä¹Ÿç»å¸¸è¢«æ‹¿å‡ºæ¥è¯´ä¾‹å­å°±æ˜¯è½¬è´¦äº†ã€‚å‡å¦‚å°æ˜è¦ç»™å°çº¢è½¬è´¦1000å…ƒï¼Œè¿™ä¸ªè½¬è´¦ä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªå…³é”®æ“ä½œå°±æ˜¯ï¼šå°†å°æ˜çš„ä½™é¢å‡å°‘1000å…ƒï¼Œå°†å°çº¢çš„ä½™é¢å¢åŠ 1000å…ƒã€‚ä¸‡ä¸€åœ¨è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´çªç„¶å‡ºç°é”™è¯¯æ¯”å¦‚é“¶è¡Œç³»ç»Ÿå´©æºƒï¼Œå¯¼è‡´å°æ˜ä½™é¢å‡å°‘è€Œå°çº¢çš„ä½™é¢æ²¡æœ‰å¢åŠ ï¼Œè¿™æ ·å°±ä¸å¯¹äº†ã€‚äº‹åŠ¡å°±æ˜¯ä¿è¯è¿™ä¸¤ä¸ªå…³é”®æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½è¦å¤±è´¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"äº‹åŠ¡çš„ç‰¹æ€§-acid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡çš„ç‰¹æ€§-acid"}},[t._v("#")]),t._v(" äº‹åŠ¡çš„ç‰¹æ€§(ACID)")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-6/%E4%BA%8B%E5%8A%A1%E7%89%B9%E6%80%A7.png",alt:"äº‹åŠ¡çš„ç‰¹æ€§"}})]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("åŸå­æ€§ï¼š")]),t._v(" äº‹åŠ¡æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ï¼Œä¸å…è®¸åˆ†å‰²ã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("ä¸€è‡´æ€§ï¼š")]),t._v(" æ‰§è¡Œäº‹åŠ¡å‰åï¼Œæ•°æ®ä¿æŒä¸€è‡´ï¼Œä¾‹å¦‚è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œæ— è®ºäº‹åŠ¡æ˜¯å¦æˆåŠŸï¼Œè½¬è´¦è€…å’Œæ”¶æ¬¾äººçš„æ€»é¢åº”è¯¥æ˜¯ä¸å˜çš„ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("éš”ç¦»æ€§ï¼š")]),t._v(" å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸è¢«å…¶ä»–äº‹åŠ¡æ‰€å¹²æ‰°ï¼Œå„å¹¶å‘äº‹åŠ¡ä¹‹é—´æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("æŒä¹…æ€§ï¼š")]),t._v(" ä¸€ä¸ªäº‹åŠ¡è¢«æäº¤ä¹‹åã€‚å®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"}},[t._v("#")]),t._v(" å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜")]),t._v(" "),a("p",[t._v("åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œï¼Œç»å¸¸ä¼šæ“ä½œç›¸åŒçš„æ•°æ®æ¥å®Œæˆå„è‡ªçš„ä»»åŠ¡ï¼ˆå¤šä¸ªç”¨æˆ·å¯¹ç»Ÿä¸€æ•°æ®è¿›è¡Œæ“ä½œï¼‰ã€‚å¹¶å‘è™½ç„¶æ˜¯å¿…é¡»çš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ã€‚")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è„è¯»ï¼ˆDirty readï¼‰:")]),t._v(" å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯â€œè„æ•°æ®â€ï¼Œä¾æ®â€œè„æ•°æ®â€æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¸¢å¤±ä¿®æ”¹ï¼ˆLost to modifyï¼‰:")]),t._v(" æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¯¥æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®åï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹äº†è¿™ä¸ªæ•°æ®ã€‚è¿™æ ·ç¬¬ä¸€ä¸ªäº‹åŠ¡å†…çš„ä¿®æ”¹ç»“æœå°±è¢«ä¸¢å¤±ï¼Œå› æ­¤ç§°ä¸ºä¸¢å¤±ä¿®æ”¹ã€‚\tä¾‹å¦‚ï¼šäº‹åŠ¡1è¯»å–æŸè¡¨ä¸­çš„æ•°æ®A=20ï¼Œäº‹åŠ¡2ä¹Ÿè¯»å–A=20ï¼Œäº‹åŠ¡1ä¿®æ”¹A=A-1ï¼Œäº‹åŠ¡2ä¹Ÿä¿®æ”¹A=A-1ï¼Œæœ€ç»ˆç»“æœA=19ï¼Œäº‹åŠ¡1çš„ä¿®æ”¹è¢«ä¸¢å¤±ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¸å¯é‡å¤è¯»ï¼ˆUnrepeatablereadï¼‰:")]),t._v(" æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¹»è¯»ï¼ˆPhantom readï¼‰:")]),t._v(" å¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("ä¸å¯é‡å¤åº¦å’Œå¹»è¯»åŒºåˆ«ï¼š")])]),t._v(" "),a("p",[t._v("ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹1ï¼ˆåŒæ ·çš„æ¡ä»¶, ä½ è¯»å–è¿‡çš„æ•°æ®, å†æ¬¡è¯»å–å‡ºæ¥å‘ç°å€¼ä¸ä¸€æ ·äº† ï¼‰ï¼šäº‹åŠ¡1ä¸­çš„Aå…ˆç”Ÿè¯»å–è‡ªå·±çš„å·¥èµ„ä¸º     1000çš„æ“ä½œè¿˜æ²¡å®Œæˆï¼Œäº‹åŠ¡2ä¸­çš„Bå…ˆç”Ÿå°±ä¿®æ”¹äº†Açš„å·¥èµ„ä¸º2000ï¼Œå¯¼        è‡´Aå†è¯»è‡ªå·±çš„å·¥èµ„æ—¶å·¥èµ„å˜ä¸º  2000ï¼›è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹2ï¼ˆåŒæ ·çš„æ¡ä»¶, ç¬¬1æ¬¡å’Œç¬¬2æ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ · ï¼‰ï¼šå‡æŸå·¥èµ„å•è¡¨ä¸­å·¥èµ„å¤§äº3000çš„æœ‰4äººï¼Œäº‹åŠ¡1è¯»å–äº†æ‰€æœ‰å·¥èµ„å¤§äº3000çš„äººï¼Œå…±æŸ¥åˆ°4æ¡è®°å½•ï¼Œè¿™æ—¶äº‹åŠ¡2 åˆæ’å…¥äº†ä¸€æ¡å·¥èµ„å¤§äº3000çš„è®°å½•ï¼Œäº‹åŠ¡1å†æ¬¡è¯»å–æ—¶æŸ¥åˆ°çš„è®°å½•å°±å˜ä¸ºäº†5æ¡ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å¹»è¯»ã€‚")]),t._v(" "),a("h3",{attrs:{id:"äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[t._v("#")]),t._v(" äº‹åŠ¡éš”ç¦»çº§åˆ«")]),t._v(" "),a("p",[a("strong",[t._v("SQL æ ‡å‡†å®šä¹‰äº†å››ä¸ªéš”ç¦»çº§åˆ«ï¼š")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("READ-UNCOMMITTED(è¯»å–æœªæäº¤)ï¼š")]),t._v(" æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œ"),a("strong",[t._v("å¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»")]),t._v("ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("READ-COMMITTED(è¯»å–å·²æäº¤)ï¼š")]),t._v(" å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œ"),a("strong",[t._v("å¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ")]),t._v("ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("REPEATABLE-READ(å¯é‡å¤è¯»)ï¼š")]),t._v("  å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œ"),a("strong",[t._v("å¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ")]),t._v("ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)ï¼š")]),t._v(" æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ"),a("strong",[t._v("è¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»")]),t._v("ã€‚")])]),t._v(" "),a("hr"),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("éš”ç¦»çº§åˆ«")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("è„è¯»")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("ä¸å¯é‡å¤è¯»")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("å¹»å½±è¯»")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("READ-UNCOMMITTED")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("READ-COMMITTED")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("REPEATABLE-READ")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("âˆš")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("SERIALIZABLE")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Ã—")])])])]),t._v(" "),a("p",[t._v("MySQL InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ "),a("strong",[t._v("REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰")]),t._v("ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡"),a("code",[t._v("SELECT @@tx_isolation;")]),t._v("å‘½ä»¤æ¥æŸ¥çœ‹ï¼ŒMySQL 8.0 è¯¥å‘½ä»¤æ”¹ä¸º"),a("code",[t._v("SELECT @@transaction_isolation;")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@tx_isolation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@tx_isolation")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("REPEATABLE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("READ")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------+")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[a("s",[t._v("è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸ SQL æ ‡å‡†ä¸åŒçš„åœ°æ–¹åœ¨äº InnoDB å­˜å‚¨å¼•æ“åœ¨ "),a("strong",[t._v("REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰")]),t._v(" äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ä½¿ç”¨çš„æ˜¯ Next-Key Lock é”ç®—æ³•ï¼Œå› æ­¤å¯ä»¥é¿å…å¹»è¯»çš„äº§ç”Ÿï¼Œè¿™ä¸å…¶ä»–æ•°æ®åº“ç³»ç»Ÿ(å¦‚ SQL Server)æ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥è¯´ InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ "),a("strong",[t._v("REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰")]),t._v(" å·²ç»å¯ä»¥å®Œå…¨ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§è¦æ±‚ï¼Œå³è¾¾åˆ°äº† SQL æ ‡å‡†çš„ "),a("strong",[t._v("SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)")]),t._v(" éš”ç¦»çº§åˆ«ã€‚")])]),t._v(" "),a("p",[t._v("ğŸ› é—®é¢˜æ›´æ­£ï¼š"),a("strong",[t._v("MySQL InnoDB çš„ REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰å¹¶ä¸ä¿è¯é¿å…å¹»è¯»ï¼Œéœ€è¦åº”ç”¨ä½¿ç”¨åŠ é”è¯»æ¥ä¿è¯ã€‚è€Œè¿™ä¸ªåŠ é”åº¦ä½¿ç”¨åˆ°çš„æœºåˆ¶å°±æ˜¯ Next-Key Locksã€‚")])]),t._v(" "),a("p",[t._v("å› ä¸ºéš”ç¦»çº§åˆ«è¶Šä½ï¼Œäº‹åŠ¡è¯·æ±‚çš„é”è¶Šå°‘ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»Ÿçš„éš”ç¦»çº§åˆ«éƒ½æ˜¯ "),a("strong",[t._v("READ-COMMITTED(è¯»å–æäº¤å†…å®¹)")]),t._v(" ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“çš„æ˜¯ InnoDB å­˜å‚¨å¼•æ“é»˜è®¤ä½¿ç”¨ "),a("strong",[t._v("REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰")]),t._v(" å¹¶ä¸ä¼šæœ‰ä»»ä½•æ€§èƒ½æŸå¤±ã€‚")]),t._v(" "),a("p",[t._v("InnoDB å­˜å‚¨å¼•æ“åœ¨ "),a("strong",[t._v("åˆ†å¸ƒå¼äº‹åŠ¡")]),t._v(" çš„æƒ…å†µä¸‹ä¸€èˆ¬ä¼šç”¨åˆ° "),a("strong",[t._v("SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)")]),t._v(" éš”ç¦»çº§åˆ«ã€‚")]),t._v(" "),a("p",[t._v("ğŸŒˆ æ‹“å±•ä¸€ä¸‹(ä»¥ä¸‹å†…å®¹æ‘˜è‡ªã€ŠMySQL æŠ€æœ¯å†…å¹•ï¼šInnoDB å­˜å‚¨å¼•æ“(ç¬¬ 2 ç‰ˆ)ã€‹7.7 ç« )ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("InnoDB å­˜å‚¨å¼•æ“æä¾›äº†å¯¹ XA äº‹åŠ¡çš„æ”¯æŒï¼Œå¹¶é€šè¿‡ XA äº‹åŠ¡æ¥æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°ã€‚åˆ†å¸ƒå¼äº‹åŠ¡æŒ‡çš„æ˜¯å…è®¸å¤šä¸ªç‹¬ç«‹çš„äº‹åŠ¡èµ„æºï¼ˆtransactional resourcesï¼‰å‚ä¸åˆ°ä¸€ä¸ªå…¨å±€çš„äº‹åŠ¡ä¸­ã€‚äº‹åŠ¡èµ„æºé€šå¸¸æ˜¯å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç±»å‹çš„èµ„æºã€‚å…¨å±€äº‹åŠ¡è¦æ±‚åœ¨å…¶ä¸­çš„æ‰€æœ‰å‚ä¸çš„äº‹åŠ¡è¦ä¹ˆéƒ½æäº¤ï¼Œè¦ä¹ˆéƒ½å›æ»šï¼Œè¿™å¯¹äºäº‹åŠ¡åŸæœ‰çš„ ACID è¦æ±‚åˆæœ‰äº†æé«˜ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼ŒInnoDB å­˜å‚¨å¼•æ“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å¿…é¡»è®¾ç½®ä¸º SERIALIZABLEã€‚")])]),t._v(" "),a("h3",{attrs:{id:"å®é™…æƒ…å†µæ¼”ç¤º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…æƒ…å†µæ¼”ç¤º"}},[t._v("#")]),t._v(" å®é™…æƒ…å†µæ¼”ç¤º")]),t._v(" "),a("p",[t._v("åœ¨ä¸‹é¢æˆ‘ä¼šä½¿ç”¨ 2 ä¸ªå‘½ä»¤è¡Œmysql ï¼Œæ¨¡æ‹Ÿå¤šçº¿ç¨‹ï¼ˆå¤šäº‹åŠ¡ï¼‰å¯¹åŒä¸€ä»½æ•°æ®çš„è„è¯»é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("MySQL å‘½ä»¤è¡Œçš„é»˜è®¤é…ç½®ä¸­äº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡ŒSQLè¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ COMMIT æ“ä½œã€‚å¦‚æœè¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡éœ€è¦ä½¿ç”¨å‘½ä»¤ï¼š"),a("code",[t._v("START TARNSACTION")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥è®¾ç½®éš”ç¦»çº§åˆ«ã€‚")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SESSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TRANSACTION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ISOLATION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LEVEL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("READ")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNCOMMITTED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("READ")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMITTED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("REPEATABLE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("READ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SERIALIZABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬åœ¨ä¸‹é¢å®é™…æ“ä½œä¸­ä½¿ç”¨åˆ°çš„ä¸€äº›å¹¶å‘æ§åˆ¶è¯­å¥:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("START TARNSACTION")]),t._v(" |"),a("code",[t._v("BEGIN")]),t._v("ï¼šæ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("COMMIT")]),t._v("ï¼šæäº¤äº‹åŠ¡ï¼Œä½¿å¾—å¯¹æ•°æ®åº“åšçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§ã€‚")]),t._v(" "),a("li",[a("code",[t._v("ROLLBACK")]),t._v("ï¼šå›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"è„è¯»-è¯»æœªæäº¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è„è¯»-è¯»æœªæäº¤"}},[t._v("#")]),t._v(" è„è¯»(è¯»æœªæäº¤)")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-31-1è„è¯»(è¯»æœªæäº¤)å®ä¾‹.jpg",width:"800px"}})]),t._v(" "),a("h4",{attrs:{id:"é¿å…è„è¯»-è¯»å·²æäº¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¿å…è„è¯»-è¯»å·²æäº¤"}},[t._v("#")]),t._v(" é¿å…è„è¯»(è¯»å·²æäº¤)")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-31-2è¯»å·²æäº¤å®ä¾‹.jpg",width:"800px"}})]),t._v(" "),a("h4",{attrs:{id:"ä¸å¯é‡å¤è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸å¯é‡å¤è¯»"}},[t._v("#")]),t._v(" ä¸å¯é‡å¤è¯»")]),t._v(" "),a("p",[t._v("è¿˜æ˜¯åˆšæ‰ä¸Šé¢çš„è¯»å·²æäº¤çš„å›¾ï¼Œè™½ç„¶é¿å…äº†è¯»æœªæäº¤ï¼Œä½†æ˜¯å´å‡ºç°äº†ï¼Œä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸï¼Œå°±å‘ç”Ÿäº† ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-32-1ä¸å¯é‡å¤è¯»å®ä¾‹.jpg"}})]),t._v(" "),a("h4",{attrs:{id:"å¯é‡å¤è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯é‡å¤è¯»"}},[t._v("#")]),t._v(" å¯é‡å¤è¯»")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-33-2å¯é‡å¤è¯».jpg"}})]),t._v(" "),a("h4",{attrs:{id:"é˜²æ­¢å¹»è¯»-å¯é‡å¤è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é˜²æ­¢å¹»è¯»-å¯é‡å¤è¯»"}},[t._v("#")]),t._v(" é˜²æ­¢å¹»è¯»(å¯é‡å¤è¯»)")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-33é˜²æ­¢å¹»è¯»(ä½¿ç”¨å¯é‡å¤è¯»).jpg"}})]),t._v(" "),a("p",[t._v("ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œè¿™ç§æ“ä½œçš„èŒƒå›´æ˜¯æ•°æ®åº“çš„å…¨éƒ¨è¡Œï¼Œç„¶åç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿåœ¨å¯¹è¿™ä¸ªæ•°æ®åº“æ“ä½œï¼Œè¿™ç§æ“ä½œå¯ä»¥æ˜¯æ’å…¥ä¸€è¡Œè®°å½•æˆ–åˆ é™¤ä¸€è¡Œè®°å½•ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ˜¯äº‹åŠ¡å°±ä¼šè§‰å¾—è‡ªå·±å‡ºç°äº†å¹»è§‰ï¼Œæ€ä¹ˆè¿˜æœ‰æ²¡æœ‰å¤„ç†çš„è®°å½•å‘¢? æˆ–è€… æ€ä¹ˆå¤šå¤„ç†äº†ä¸€è¡Œè®°å½•å‘¢?")]),t._v(" "),a("p",[t._v("å¹»è¯»å’Œä¸å¯é‡å¤è¯»æœ‰äº›ç›¸ä¼¼ä¹‹å¤„ ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å‚è€ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[t._v("#")]),t._v(" å‚è€ƒ")]),t._v(" "),a("ul",[a("li",[t._v("ã€ŠMySQLæŠ€æœ¯å†…å¹•ï¼šInnoDBå­˜å‚¨å¼•æ“ã€‹")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.mysql.com/doc/refman/5.7/en/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tech.youzan.com/seven-questions-about-the-lock-of-mysql/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mysql é”ï¼šçµé­‚ä¸ƒæ‹·é—®"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tech.meituan.com/2014/08/20/innodb-lock.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Innodb ä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);