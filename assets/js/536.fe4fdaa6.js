(window.webpackJsonp=window.webpackJsonp||[]).push([[536],{930:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jdk-监控和故障处理工具总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdk-监控和故障处理工具总结"}},[s._v("#")]),s._v(" JDK 监控和故障处理工具总结")]),s._v(" "),a("h2",{attrs:{id:"jdk-命令行工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdk-命令行工具"}},[s._v("#")]),s._v(" JDK 命令行工具")]),s._v(" "),a("p",[s._v("这些命令在 JDK 安装目录下的 bin 目录下：")]),s._v(" "),a("ul",[a("li",[a("strong",[a("code",[s._v("jps")])]),s._v(" (JVM Process Status）: 类似 UNIX 的 "),a("code",[s._v("ps")]),s._v(" 命令。用于查看所有 Java 进程的启动类、传入参数和 Java 虚拟机参数等信息；")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("jstat")])]),s._v("（JVM Statistics Monitoring Tool）:  用于收集 HotSpot 虚拟机各方面的运行数据;")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("jinfo")])]),s._v(" (Configuration Info for Java) : Configuration Info for Java,显示虚拟机配置信息;")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("jmap")])]),s._v(" (Memory Map for Java) : 生成堆转储快照;")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("jhat")])]),s._v(" (JVM Heap Dump Browser) : 用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果;")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("jstack")])]),s._v(" (Stack Trace for Java) : 生成虚拟机当前时刻的线程快照，线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合。")])]),s._v(" "),a("h3",{attrs:{id:"jps-查看所有-java-进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jps-查看所有-java-进程"}},[s._v("#")]),s._v(" "),a("code",[s._v("jps")]),s._v(":查看所有 Java 进程")]),s._v(" "),a("p",[a("code",[s._v("jps")]),s._v("(JVM Process Status) 命令类似 UNIX 的 "),a("code",[s._v("ps")]),s._v(" 命令。")]),s._v(" "),a("p",[a("code",[s._v("jps")]),s._v("：显示虚拟机执行主类名称以及这些进程的本地虚拟机唯一 ID（Local Virtual Machine Identifier,LVMID）。"),a("code",[s._v("jps -q")]),s._v(" ：只输出进程的本地虚拟机唯一 ID。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jps\n7360 NettyClient2\n17396\n7972 Launcher\n16504 Jps\n17340 NettyServer\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("code",[s._v("jps -l")]),s._v(":输出主类的全名，如果进程执行的是 Jar 包，输出 Jar 路径。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l\n7360 firstNettyDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NettyClient2\n17396\n7972 org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jetbrains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cmdline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Launcher\n16492 sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Jps\n17340 firstNettyDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NettyServer\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("code",[s._v("jps -v")]),s._v("：输出虚拟机进程启动时 JVM 参数。")]),s._v(" "),a("p",[a("code",[s._v("jps -m")]),s._v("：输出传递给 Java 进程 main() 函数的参数。")]),s._v(" "),a("h3",{attrs:{id:"jstat-监视虚拟机各种运行状态信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jstat-监视虚拟机各种运行状态信息"}},[s._v("#")]),s._v(" "),a("code",[s._v("jstat")]),s._v(": 监视虚拟机各种运行状态信息")]),s._v(" "),a("p",[s._v("jstat（JVM Statistics Monitoring Tool） 使用于监视虚拟机各种运行状态信息的命令行工具。 它可以显示本地或者远程（需要远程主机提供 RMI 支持）虚拟机进程中的类信息、内存、垃圾收集、JIT 编译等运行数据，在没有 GUI，只提供了纯文本控制台环境的服务器上，它将是运行期间定位虚拟机性能问题的首选工具。")]),s._v(" "),a("p",[a("strong",[a("code",[s._v("jstat")]),s._v(" 命令使用格式：")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("jstat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("<option> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h<lines>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" <vmid> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("<interval> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("<count>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("比如 "),a("code",[s._v("jstat -gc -h3 31736 1000 10")]),s._v("表示分析进程 id 为 31736 的 gc 情况，每隔 1000ms 打印一次记录，打印 10 次停止，每 3 行后打印指标头部。")]),s._v(" "),a("p",[a("strong",[s._v("常见的 option 如下：")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("jstat -class vmid")]),s._v(" ：显示 ClassLoader 的相关信息；")]),s._v(" "),a("li",[a("code",[s._v("jstat -compiler vmid")]),s._v(" ：显示 JIT 编译的相关信息；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gc vmid")]),s._v(" ：显示与 GC 相关的堆信息；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gccapacity vmid")]),s._v(" ：显示各个代的容量及使用情况；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcnew vmid")]),s._v(" ：显示新生代信息；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcnewcapcacity vmid")]),s._v(" ：显示新生代大小与使用情况；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcold vmid")]),s._v(" ：显示老年代和永久代的行为统计，从jdk1.8开始,该选项仅表示老年代，因为永久代被移除了；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcoldcapacity vmid")]),s._v(" ：显示老年代的大小；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcpermcapacity vmid")]),s._v(" ：显示永久代大小，从jdk1.8开始,该选项不存在了，因为永久代被移除了；")]),s._v(" "),a("li",[a("code",[s._v("jstat -gcutil vmid")]),s._v(" ：显示垃圾收集信息；")])]),s._v(" "),a("p",[s._v("另外，加上 "),a("code",[s._v("-t")]),s._v("参数可以在输出信息上加一个 Timestamp 列，显示程序的运行时间。")]),s._v(" "),a("h3",{attrs:{id:"jinfo-实时地查看和调整虚拟机各项参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jinfo-实时地查看和调整虚拟机各项参数"}},[s._v("#")]),s._v(" "),a("code",[s._v("jinfo")]),s._v(": 实时地查看和调整虚拟机各项参数")]),s._v(" "),a("p",[a("code",[s._v("jinfo vmid")]),s._v(" :输出当前 jvm 进程的全部参数和系统属性 (第一部分是系统的属性，第二部分是 JVM 的参数)。")]),s._v(" "),a("p",[a("code",[s._v("jinfo -flag name vmid")]),s._v(" :输出对应名称的参数的具体值。比如输出 MaxHeapSize、查看当前 jvm 进程是否开启打印 GC 日志 ( "),a("code",[s._v("-XX:PrintGCDetails")]),s._v(" :详细 GC 日志模式，这两个都是默认关闭的)。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jinfo  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("flag MaxHeapSize 17340\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("XX:MaxHeapSize=2124414976\nC:\\Users\\SnailClimb>jinfo  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("flag PrintGC 17340\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("XX:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("PrintGC\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("使用 jinfo 可以在不重启虚拟机的情况下，可以动态的修改 jvm 的参数。尤其在线上的环境特别有用,请看下面的例子：")]),s._v(" "),a("p",[a("code",[s._v("jinfo -flag [+|-]name vmid")]),s._v(" 开启或者关闭对应名称的参数。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jinfo  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("flag  PrintGC 17340\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("XX:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("PrintGC\n\nC:\\Users\\SnailClimb>jinfo  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("flag  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("PrintGC 17340\n\nC:\\Users\\SnailClimb>jinfo  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("flag  PrintGC 17340\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("XX:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("PrintGC\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"jmap-生成堆转储快照"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmap-生成堆转储快照"}},[s._v("#")]),s._v(" "),a("code",[s._v("jmap")]),s._v(":生成堆转储快照")]),s._v(" "),a("p",[a("code",[s._v("jmap")]),s._v("（Memory Map for Java）命令用于生成堆转储快照。 如果不使用 "),a("code",[s._v("jmap")]),s._v(" 命令，要想获取 Java 堆转储，可以使用 "),a("code",[s._v("“-XX:+HeapDumpOnOutOfMemoryError”")]),s._v(" 参数，可以让虚拟机在 OOM 异常出现之后自动生成 dump 文件，Linux 命令下可以通过 "),a("code",[s._v("kill -3")]),s._v(" 发送进程退出信号也能拿到 dump 文件。")]),s._v(" "),a("p",[a("code",[s._v("jmap")]),s._v(" 的作用并不仅仅是为了获取 dump 文件，它还可以查询 finalizer 执行队列、Java 堆和永久代的详细信息，如空间使用率、当前使用的是哪种收集器等。和"),a("code",[s._v("jinfo")]),s._v("一样，"),a("code",[s._v("jmap")]),s._v("有不少功能在 Windows 平台下也是受限制的。")]),s._v(" "),a("p",[s._v("示例：将指定应用程序的堆快照输出到桌面。后面，可以通过 jhat、Visual VM 等工具分析该堆文件。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jmap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dump:format=b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("file=C:\\Users\\SnailClimb\\Desktop\\heap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hprof 17340\nDumping heap to C:\\Users\\SnailClimb\\Desktop\\heap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hprof "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nHeap dump file created\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"jhat-分析-heapdump-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jhat-分析-heapdump-文件"}},[s._v("#")]),s._v(" "),a("strong",[a("code",[s._v("jhat")])]),s._v(": 分析 heapdump 文件")]),s._v(" "),a("p",[a("strong",[a("code",[s._v("jhat")])]),s._v(" 用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果。")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jhat C:\\Users\\SnailClimb\\Desktop\\heap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hprof\nReading "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" C:\\Users\\SnailClimb\\Desktop\\heap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hprof"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nDump file created Sat May 04 12:30:31 CST 2019\nSnapshot read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resolving"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nResolving 131419 objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nChasing references"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expect 26 dots"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nEliminating duplicate references"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nSnapshot resolved"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nStarted HTTP server on port 7000\nServer is ready"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("访问 "),a("a",{attrs:{href:"http://localhost:7000/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:7000/"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"jstack-生成虚拟机当前时刻的线程快照"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jstack-生成虚拟机当前时刻的线程快照"}},[s._v("#")]),s._v(" "),a("strong",[a("code",[s._v("jstack")])]),s._v(" :生成虚拟机当前时刻的线程快照")]),s._v(" "),a("p",[a("code",[s._v("jstack")]),s._v("（Stack Trace for Java）命令用于生成虚拟机当前时刻的线程快照。线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合.")]),s._v(" "),a("p",[s._v("生成线程快照的目的主要是定位线程长时间出现停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等都是导致线程长时间停顿的原因。线程出现停顿的时候通过"),a("code",[s._v("jstack")]),s._v("来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做些什么事情，或者在等待些什么资源。")]),s._v(" "),a("p",[a("strong",[s._v("下面是一个线程死锁的代码。我们下面会通过 "),a("code",[s._v("jstack")]),s._v(" 命令进行死锁检查，输出死锁信息，找到发生死锁的线程。")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeadLockDemo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" resource1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//资源 1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" resource2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//资源 2")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resource1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get resource1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"waiting get resource2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resource2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get resource2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resource2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get resource2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"waiting get resource1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resource1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get resource1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("p",[s._v("Output")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Thread[线程 1,5,main]get resource1\nThread[线程 2,5,main]get resource2\nThread[线程 1,5,main]waiting get resource2\nThread[线程 2,5,main]waiting get resource1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("线程 A 通过 synchronized (resource1) 获得 resource1 的监视器锁，然后通过"),a("code",[s._v("Thread.sleep(1000);")]),s._v("让线程 A 休眠 1s 为的是让线程 B 得到执行然后获取到 resource2 的监视器锁。线程 A 和线程 B 休眠结束了都开始企图请求获取对方的资源，然后这两个线程就会陷入互相等待的状态，这也就产生了死锁。")]),s._v(" "),a("p",[a("strong",[s._v("通过 "),a("code",[s._v("jstack")]),s._v(" 命令分析：")])]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("C:\\Users\\SnailClimb>jps\n13792 KotlinCompileDaemon\n7360 NettyClient2\n17396\n7972 Launcher\n8932 Launcher\n9256 DeadLockDemo\n10764 Jps\n17340 NettyServer\n\nC:\\Users\\SnailClimb>jstack 9256\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("输出的部分内容如下：")]),s._v(" "),a("div",{staticClass:"language-powershell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("Found one Java"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("level deadlock:\n=============================\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 2"')]),s._v(":\n  waiting to lock monitor 0x000000000333e668 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object 0x00000000d5efe1c0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  which is held by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 1"')]),s._v(":\n  waiting to lock monitor 0x000000000333be88 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object 0x00000000d5efe1d0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  which is held by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 2"')]),s._v("\n\nJava stack information "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the threads listed above:\n===================================================\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 2"')]),s._v(":\n        at DeadLockDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lambda"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$main")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DeadLockDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java:31"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" waiting to lock <0x00000000d5efe1c0> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" locked <0x00000000d5efe1d0> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        at DeadLockDemo$"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Lambda")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("1078694789"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown Source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        at java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java:748"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"线程 1"')]),s._v(":\n        at DeadLockDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lambda"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$main")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DeadLockDemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java:16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" waiting to lock <0x00000000d5efe1d0> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" locked <0x00000000d5efe1c0> "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        at DeadLockDemo$"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Lambda")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("1324119927"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown Source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        at java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java:748"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nFound 1 deadlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("p",[s._v("可以看到 "),a("code",[s._v("jstack")]),s._v(" 命令已经帮我们找到发生死锁的线程的具体信息。")]),s._v(" "),a("h2",{attrs:{id:"jdk-可视化分析工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jdk-可视化分析工具"}},[s._v("#")]),s._v(" JDK 可视化分析工具")]),s._v(" "),a("h3",{attrs:{id:"jconsole-java-监视与管理控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jconsole-java-监视与管理控制台"}},[s._v("#")]),s._v(" JConsole:Java 监视与管理控制台")]),s._v(" "),a("p",[s._v("JConsole 是基于 JMX 的可视化监视、管理工具。可以很方便的监视本地及远程服务器的 java 进程的内存使用情况。你可以在控制台输出"),a("code",[s._v("console")]),s._v("命令启动或者在 JDK 目录下的 bin 目录找到"),a("code",[s._v("jconsole.exe")]),s._v("然后双击启动。")]),s._v(" "),a("h4",{attrs:{id:"连接-jconsole"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接-jconsole"}},[s._v("#")]),s._v(" 连接 Jconsole")]),s._v(" "),a("p",[a("img",{attrs:{src:"pictures/jdk%E7%9B%91%E6%8E%A7%E5%92%8C%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E6%80%BB%E7%BB%93/1JConsole%E8%BF%9E%E6%8E%A5.png",alt:"连接 Jconsole"}})]),s._v(" "),a("p",[s._v("如果需要使用 JConsole 连接远程进程，可以在远程 Java 程序启动时加上下面这些参数:")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-Djava.rmi.server.hostname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("外网访问 ip 地址 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-Dcom.sun.management.jmxremote.port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("60001   //监控的端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-Dcom.sun.management.jmxremote.authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("false   //关闭认证")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-Dcom.sun.management.jmxremote.ssl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("false")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("在使用 JConsole 连接时，远程进程地址如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("外网访问 ip 地址:60001 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"查看-java-程序概况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-java-程序概况"}},[s._v("#")]),s._v(" 查看 Java 程序概况")]),s._v(" "),a("p",[a("img",{attrs:{src:"pictures/jdk%E7%9B%91%E6%8E%A7%E5%92%8C%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E6%80%BB%E7%BB%93/2%E6%9F%A5%E7%9C%8BJava%E7%A8%8B%E5%BA%8F%E6%A6%82%E5%86%B5.png",alt:"查看 Java 程序概况 "}})]),s._v(" "),a("h4",{attrs:{id:"内存监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存监控"}},[s._v("#")]),s._v(" 内存监控")]),s._v(" "),a("p",[s._v("JConsole 可以显示当前内存的详细信息。不仅包括堆内存/非堆内存的整体信息，还可以细化到 eden 区、survivor 区等的使用情况，如下图所示。")]),s._v(" "),a("p",[s._v("点击右边的“执行 GC(G)”按钮可以强制应用程序执行一个 Full GC。")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("strong",[s._v("新生代 GC（Minor GC）")]),s._v(":指发生新生代的的垃圾收集动作，Minor GC 非常频繁，回收速度一般也比较快。")]),s._v(" "),a("li",[a("strong",[s._v("老年代 GC（Major GC/Full GC）")]),s._v(":指发生在老年代的 GC，出现了 Major GC 经常会伴随至少一次的 Minor GC（并非绝对），Major GC 的速度一般会比 Minor GC 的慢 10 倍以上。")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"pictures/jdk%E7%9B%91%E6%8E%A7%E5%92%8C%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E6%80%BB%E7%BB%93/3%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7.png",alt:"内存监控 "}})]),s._v(" "),a("h4",{attrs:{id:"线程监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线程监控"}},[s._v("#")]),s._v(" 线程监控")]),s._v(" "),a("p",[s._v("类似我们前面讲的 "),a("code",[s._v("jstack")]),s._v(" 命令，不过这个是可视化的。")]),s._v(" "),a("p",[s._v('最下面有一个"检测死锁 (D)"按钮，点击这个按钮可以自动为你找到发生死锁的线程以及它们的详细信息 。')]),s._v(" "),a("p",[a("img",{attrs:{src:"pictures/jdk%E7%9B%91%E6%8E%A7%E5%92%8C%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E6%80%BB%E7%BB%93/4%E7%BA%BF%E7%A8%8B%E7%9B%91%E6%8E%A7.png",alt:"线程监控 "}})]),s._v(" "),a("h3",{attrs:{id:"visual-vm-多合一故障处理工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#visual-vm-多合一故障处理工具"}},[s._v("#")]),s._v(" Visual VM:多合一故障处理工具")]),s._v(" "),a("p",[s._v("VisualVM 提供在 Java 虚拟机 (Java Virutal Machine, JVM) 上运行的 Java 应用程序的详细信息。在 VisualVM 的图形用户界面中，您可以方便、快捷地查看多个 Java 应用程序的相关信息。Visual VM 官网："),a("a",{attrs:{href:"https://visualvm.github.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://visualvm.github.io/"),a("OutboundLink")],1),s._v(" 。Visual VM 中文文档:"),a("a",{attrs:{href:"https://visualvm.github.io/documentation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://visualvm.github.io/documentation.html"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("下面这段话摘自《深入理解 Java 虚拟机》。")]),s._v(" "),a("blockquote",[a("p",[s._v("VisualVM（All-in-One Java Troubleshooting Tool）是到目前为止随 JDK 发布的功能最强大的运行监视和故障处理程序，官方在 VisualVM 的软件说明中写上了“All-in-One”的描述字样，预示着他除了运行监视、故障处理外，还提供了很多其他方面的功能，如性能分析（Profiling）。VisualVM 的性能分析功能甚至比起 JProfiler、YourKit 等专业且收费的 Profiling 工具都不会逊色多少，而且 VisualVM 还有一个很大的优点：不需要被监视的程序基于特殊 Agent 运行，因此他对应用程序的实际性能的影响很小，使得他可以直接应用在生产环境中。这个优点是 JProfiler、YourKit 等工具无法与之媲美的。")])]),s._v(" "),a("p",[s._v("VisualVM 基于 NetBeans 平台开发，因此他一开始就具备了插件扩展功能的特性，通过插件扩展支持，VisualVM 可以做到：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("显示虚拟机进程以及进程的配置、环境信息（jps、jinfo）。")])]),s._v(" "),a("li",[a("strong",[s._v("监视应用程序的 CPU、GC、堆、方法区以及线程的信息（jstat、jstack）。")])]),s._v(" "),a("li",[a("strong",[s._v("dump 以及分析堆转储快照（jmap、jhat）。")])]),s._v(" "),a("li",[a("strong",[s._v("方法级的程序运行性能分析，找到被调用最多、运行时间最长的方法。")])]),s._v(" "),a("li",[a("strong",[s._v("离线程序快照：收集程序的运行时配置、线程 dump、内存 dump 等信息建立一个快照，可以将快照发送开发者处进行 Bug 反馈。")])]),s._v(" "),a("li",[a("strong",[s._v("其他 plugins 的无限的可能性......")])])]),s._v(" "),a("p",[s._v("这里就不具体介绍 VisualVM 的使用，如果想了解的话可以看:")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://visualvm.github.io/documentation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://visualvm.github.io/documentation.html"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.ibm.com/developerworks/cn/java/j-lo-visualvm/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.ibm.com/developerworks/cn/java/j-lo-visualvm/index.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);