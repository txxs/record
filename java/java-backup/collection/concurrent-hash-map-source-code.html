<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ConcurrentHashMap源码&amp;底层数据结构分析 | Record</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/record/mlogo.svg">
    <link rel="manifest" href="/record/manifest.json">
    <meta name="description" content="本博客主要是用来记录系统化的知识，内容部分来自github上的其他开源仓库，如有问题联系sdlyjhm01@sina.com">
    
    <link rel="preload" href="/record/assets/css/0.styles.0d67cf55.css" as="style"><link rel="preload" href="/record/assets/js/app.b3b2136c.js" as="script"><link rel="preload" href="/record/assets/js/2.8ec10a4b.js" as="script"><link rel="preload" href="/record/assets/js/519.4f6c7a79.js" as="script"><link rel="preload" href="/record/assets/js/5.82344924.js" as="script"><link rel="prefetch" href="/record/assets/js/10.efbebd86.js"><link rel="prefetch" href="/record/assets/js/100.c7b3a714.js"><link rel="prefetch" href="/record/assets/js/1000.1d314a52.js"><link rel="prefetch" href="/record/assets/js/1001.08570d40.js"><link rel="prefetch" href="/record/assets/js/1002.793b8a8b.js"><link rel="prefetch" href="/record/assets/js/1003.f4769969.js"><link rel="prefetch" href="/record/assets/js/1004.221aeeee.js"><link rel="prefetch" href="/record/assets/js/1005.e6d7709e.js"><link rel="prefetch" href="/record/assets/js/1006.ca5b862e.js"><link rel="prefetch" href="/record/assets/js/1007.ddaee3aa.js"><link rel="prefetch" href="/record/assets/js/1008.37c67948.js"><link rel="prefetch" href="/record/assets/js/1009.553cc901.js"><link rel="prefetch" href="/record/assets/js/101.0c6e5802.js"><link rel="prefetch" href="/record/assets/js/1010.31b61309.js"><link rel="prefetch" href="/record/assets/js/1011.84ca68e7.js"><link rel="prefetch" href="/record/assets/js/1012.486bf049.js"><link rel="prefetch" href="/record/assets/js/1013.ae635fa5.js"><link rel="prefetch" href="/record/assets/js/1014.6a39ce57.js"><link rel="prefetch" href="/record/assets/js/1015.1bc2594d.js"><link rel="prefetch" href="/record/assets/js/1016.ac619883.js"><link rel="prefetch" href="/record/assets/js/1017.bb107393.js"><link rel="prefetch" href="/record/assets/js/1018.e2dbdab1.js"><link rel="prefetch" href="/record/assets/js/1019.1d7856e3.js"><link rel="prefetch" href="/record/assets/js/102.6d9387da.js"><link rel="prefetch" href="/record/assets/js/1020.c4c0e091.js"><link rel="prefetch" href="/record/assets/js/1021.2c8b92a5.js"><link rel="prefetch" href="/record/assets/js/1022.44cea5d1.js"><link rel="prefetch" href="/record/assets/js/1023.c39a516e.js"><link rel="prefetch" href="/record/assets/js/1024.d2f5200c.js"><link rel="prefetch" href="/record/assets/js/1025.f0a7d60c.js"><link rel="prefetch" href="/record/assets/js/1026.34a6a9aa.js"><link rel="prefetch" href="/record/assets/js/1027.295c8458.js"><link rel="prefetch" href="/record/assets/js/1028.f5f2d8c0.js"><link rel="prefetch" href="/record/assets/js/1029.46a99313.js"><link rel="prefetch" href="/record/assets/js/103.e5d8bf9f.js"><link rel="prefetch" href="/record/assets/js/1030.d780e739.js"><link rel="prefetch" href="/record/assets/js/1031.67c29429.js"><link rel="prefetch" href="/record/assets/js/1032.8514912e.js"><link rel="prefetch" href="/record/assets/js/1033.cc23c329.js"><link rel="prefetch" href="/record/assets/js/1034.e189f823.js"><link rel="prefetch" href="/record/assets/js/1035.0770902c.js"><link rel="prefetch" href="/record/assets/js/1036.29dc314c.js"><link rel="prefetch" href="/record/assets/js/1037.8d9109ce.js"><link rel="prefetch" href="/record/assets/js/1038.08c846cf.js"><link rel="prefetch" href="/record/assets/js/1039.070219ff.js"><link rel="prefetch" href="/record/assets/js/104.3ef07e6d.js"><link rel="prefetch" href="/record/assets/js/1040.e111aa34.js"><link rel="prefetch" href="/record/assets/js/1041.102a60d5.js"><link rel="prefetch" href="/record/assets/js/1042.f8fc961d.js"><link rel="prefetch" href="/record/assets/js/1043.78caade1.js"><link rel="prefetch" href="/record/assets/js/1044.1a53b2e5.js"><link rel="prefetch" href="/record/assets/js/1045.e4021045.js"><link rel="prefetch" href="/record/assets/js/1046.5ad56f24.js"><link rel="prefetch" href="/record/assets/js/1047.d0aa6ec7.js"><link rel="prefetch" href="/record/assets/js/1048.8acf0137.js"><link rel="prefetch" href="/record/assets/js/1049.76fca331.js"><link rel="prefetch" href="/record/assets/js/105.c48caa8b.js"><link rel="prefetch" href="/record/assets/js/1050.6e907883.js"><link rel="prefetch" href="/record/assets/js/1051.982f0835.js"><link rel="prefetch" href="/record/assets/js/1052.8ab0b8a7.js"><link rel="prefetch" href="/record/assets/js/1053.ad613194.js"><link rel="prefetch" href="/record/assets/js/1054.5b140ada.js"><link rel="prefetch" href="/record/assets/js/1055.171a6362.js"><link rel="prefetch" href="/record/assets/js/1056.d7d4b0e5.js"><link rel="prefetch" href="/record/assets/js/1057.4c5ae6d6.js"><link rel="prefetch" href="/record/assets/js/1058.d0162539.js"><link rel="prefetch" href="/record/assets/js/1059.b01af535.js"><link rel="prefetch" href="/record/assets/js/106.046c1d44.js"><link rel="prefetch" href="/record/assets/js/1060.d064676c.js"><link rel="prefetch" href="/record/assets/js/1061.faf41acc.js"><link rel="prefetch" href="/record/assets/js/1062.6f067438.js"><link rel="prefetch" href="/record/assets/js/1063.7ee050c6.js"><link rel="prefetch" href="/record/assets/js/1064.1b7663fb.js"><link rel="prefetch" href="/record/assets/js/1065.3cb5da93.js"><link rel="prefetch" href="/record/assets/js/1066.bc2fd7bb.js"><link rel="prefetch" href="/record/assets/js/1067.cd5d2245.js"><link rel="prefetch" href="/record/assets/js/1068.9e691fed.js"><link rel="prefetch" href="/record/assets/js/1069.fcf9f79b.js"><link rel="prefetch" href="/record/assets/js/107.bc5cff9b.js"><link rel="prefetch" href="/record/assets/js/1070.cd0868be.js"><link rel="prefetch" href="/record/assets/js/1071.0975a2cd.js"><link rel="prefetch" href="/record/assets/js/1072.009967ea.js"><link rel="prefetch" href="/record/assets/js/1073.a5c80926.js"><link rel="prefetch" href="/record/assets/js/1074.38269b7e.js"><link rel="prefetch" href="/record/assets/js/1075.b50942d2.js"><link rel="prefetch" href="/record/assets/js/1076.3965f8a4.js"><link rel="prefetch" href="/record/assets/js/1077.b1ea22ee.js"><link rel="prefetch" href="/record/assets/js/1078.f8f46822.js"><link rel="prefetch" href="/record/assets/js/1079.dd2f40de.js"><link rel="prefetch" href="/record/assets/js/108.c3fa6a4e.js"><link rel="prefetch" href="/record/assets/js/1080.00c94c56.js"><link rel="prefetch" href="/record/assets/js/1081.586c3b9a.js"><link rel="prefetch" href="/record/assets/js/1082.ee2c3334.js"><link rel="prefetch" href="/record/assets/js/1083.f9fc91ed.js"><link rel="prefetch" href="/record/assets/js/1084.e3b9dba7.js"><link rel="prefetch" href="/record/assets/js/1085.9fb6f4a5.js"><link rel="prefetch" href="/record/assets/js/1086.84ff1321.js"><link rel="prefetch" href="/record/assets/js/1087.360e9383.js"><link rel="prefetch" href="/record/assets/js/1088.ad71b95a.js"><link rel="prefetch" href="/record/assets/js/1089.38a33c1a.js"><link rel="prefetch" href="/record/assets/js/109.a942a87f.js"><link rel="prefetch" href="/record/assets/js/1090.446e21c5.js"><link rel="prefetch" href="/record/assets/js/1091.91cffea2.js"><link rel="prefetch" href="/record/assets/js/1092.d2ef6d5c.js"><link rel="prefetch" href="/record/assets/js/1093.6c11a6e4.js"><link rel="prefetch" href="/record/assets/js/1094.5202cb5d.js"><link rel="prefetch" href="/record/assets/js/1095.4b021428.js"><link rel="prefetch" href="/record/assets/js/1096.ded9697c.js"><link rel="prefetch" href="/record/assets/js/1097.670b7643.js"><link rel="prefetch" href="/record/assets/js/1098.32367389.js"><link rel="prefetch" href="/record/assets/js/1099.4353f094.js"><link rel="prefetch" href="/record/assets/js/11.05d4bb60.js"><link rel="prefetch" href="/record/assets/js/110.6365ebda.js"><link rel="prefetch" href="/record/assets/js/1100.063accbc.js"><link rel="prefetch" href="/record/assets/js/1101.c3068e45.js"><link rel="prefetch" href="/record/assets/js/1102.60a0c053.js"><link rel="prefetch" href="/record/assets/js/1103.0bf78e69.js"><link rel="prefetch" href="/record/assets/js/1104.09621d8f.js"><link rel="prefetch" href="/record/assets/js/1105.89718e20.js"><link rel="prefetch" href="/record/assets/js/1106.282eea3e.js"><link rel="prefetch" href="/record/assets/js/1107.f3fa65b4.js"><link rel="prefetch" href="/record/assets/js/1108.f0ce515c.js"><link rel="prefetch" href="/record/assets/js/1109.eedd769c.js"><link rel="prefetch" href="/record/assets/js/111.10be776e.js"><link rel="prefetch" href="/record/assets/js/1110.dfe1798f.js"><link rel="prefetch" href="/record/assets/js/1111.79482575.js"><link rel="prefetch" href="/record/assets/js/1112.450018db.js"><link rel="prefetch" href="/record/assets/js/1113.e535445e.js"><link rel="prefetch" href="/record/assets/js/1114.e6c296de.js"><link rel="prefetch" href="/record/assets/js/1115.552a2b49.js"><link rel="prefetch" href="/record/assets/js/1116.bf768edc.js"><link rel="prefetch" href="/record/assets/js/1117.3b33a5e2.js"><link rel="prefetch" href="/record/assets/js/1118.d7b0273d.js"><link rel="prefetch" href="/record/assets/js/1119.7ae0d47b.js"><link rel="prefetch" href="/record/assets/js/112.7114d9b1.js"><link rel="prefetch" href="/record/assets/js/1120.742503be.js"><link rel="prefetch" href="/record/assets/js/1121.82e30ef9.js"><link rel="prefetch" href="/record/assets/js/1122.db055a07.js"><link rel="prefetch" href="/record/assets/js/1123.ba0e5b22.js"><link rel="prefetch" href="/record/assets/js/1124.1b78001d.js"><link rel="prefetch" href="/record/assets/js/1125.03e9aff0.js"><link rel="prefetch" href="/record/assets/js/1126.c4a65f90.js"><link rel="prefetch" href="/record/assets/js/1127.1fb539d5.js"><link rel="prefetch" href="/record/assets/js/1128.be1f08d8.js"><link rel="prefetch" href="/record/assets/js/1129.f18cb22d.js"><link rel="prefetch" href="/record/assets/js/113.c716ea9a.js"><link rel="prefetch" href="/record/assets/js/1130.7581b630.js"><link rel="prefetch" href="/record/assets/js/1131.3a1c77c3.js"><link rel="prefetch" href="/record/assets/js/1132.c6a5eaaa.js"><link rel="prefetch" href="/record/assets/js/1133.c1e0c7ed.js"><link rel="prefetch" href="/record/assets/js/1134.d09230f9.js"><link rel="prefetch" href="/record/assets/js/1135.8e210302.js"><link rel="prefetch" href="/record/assets/js/1136.0953e6f9.js"><link rel="prefetch" href="/record/assets/js/1137.1bdcb9d6.js"><link rel="prefetch" href="/record/assets/js/1138.424ec96a.js"><link rel="prefetch" href="/record/assets/js/1139.4fad722c.js"><link rel="prefetch" href="/record/assets/js/114.1d6c8a8a.js"><link rel="prefetch" href="/record/assets/js/1140.d9d98916.js"><link rel="prefetch" href="/record/assets/js/1141.5bed21f9.js"><link rel="prefetch" href="/record/assets/js/1142.0fd942e7.js"><link rel="prefetch" href="/record/assets/js/1143.f45e2fd3.js"><link rel="prefetch" href="/record/assets/js/1144.23fad44c.js"><link rel="prefetch" href="/record/assets/js/1145.62d2fecf.js"><link rel="prefetch" href="/record/assets/js/1146.5a6a539e.js"><link rel="prefetch" href="/record/assets/js/1147.947147ae.js"><link rel="prefetch" href="/record/assets/js/1148.ea4d4abb.js"><link rel="prefetch" href="/record/assets/js/1149.6452061f.js"><link rel="prefetch" href="/record/assets/js/115.0cb7ebd4.js"><link rel="prefetch" href="/record/assets/js/1150.2a2919a3.js"><link rel="prefetch" href="/record/assets/js/1151.fbcec8e2.js"><link rel="prefetch" href="/record/assets/js/1152.51ba6968.js"><link rel="prefetch" href="/record/assets/js/1153.fd8d5963.js"><link rel="prefetch" href="/record/assets/js/1154.e5ec345e.js"><link rel="prefetch" href="/record/assets/js/1155.609a2c7a.js"><link rel="prefetch" href="/record/assets/js/1156.6783fb51.js"><link rel="prefetch" href="/record/assets/js/1157.1c54328e.js"><link rel="prefetch" href="/record/assets/js/1158.e81c1c11.js"><link rel="prefetch" href="/record/assets/js/1159.03e28b6c.js"><link rel="prefetch" href="/record/assets/js/116.6bce2ecd.js"><link rel="prefetch" href="/record/assets/js/1160.5f92ec35.js"><link rel="prefetch" href="/record/assets/js/1161.8d64dd0e.js"><link rel="prefetch" href="/record/assets/js/1162.1c5c1499.js"><link rel="prefetch" href="/record/assets/js/1163.b2f8e193.js"><link rel="prefetch" href="/record/assets/js/1164.2fed98e9.js"><link rel="prefetch" href="/record/assets/js/1165.0288ad02.js"><link rel="prefetch" href="/record/assets/js/1166.840e7c83.js"><link rel="prefetch" href="/record/assets/js/1167.6ececbb6.js"><link rel="prefetch" href="/record/assets/js/1168.52655d5d.js"><link rel="prefetch" href="/record/assets/js/1169.75f42d1b.js"><link rel="prefetch" href="/record/assets/js/117.3cda02ce.js"><link rel="prefetch" href="/record/assets/js/1170.40410f68.js"><link rel="prefetch" href="/record/assets/js/1171.fb07d5f7.js"><link rel="prefetch" href="/record/assets/js/1172.49e432d4.js"><link rel="prefetch" href="/record/assets/js/1173.40b32309.js"><link rel="prefetch" href="/record/assets/js/1174.34b05137.js"><link rel="prefetch" href="/record/assets/js/1175.8e44aee9.js"><link rel="prefetch" href="/record/assets/js/1176.ba96a2e8.js"><link rel="prefetch" href="/record/assets/js/1177.16e21435.js"><link rel="prefetch" href="/record/assets/js/1178.6fdf810a.js"><link rel="prefetch" href="/record/assets/js/1179.515c1973.js"><link rel="prefetch" href="/record/assets/js/118.675e5c06.js"><link rel="prefetch" href="/record/assets/js/1180.e02a1d06.js"><link rel="prefetch" href="/record/assets/js/1181.a8062226.js"><link rel="prefetch" href="/record/assets/js/1182.800eee9a.js"><link rel="prefetch" href="/record/assets/js/1183.f869c078.js"><link rel="prefetch" href="/record/assets/js/1184.6488a933.js"><link rel="prefetch" href="/record/assets/js/1185.fee4646f.js"><link rel="prefetch" href="/record/assets/js/1186.fb8a55e6.js"><link rel="prefetch" href="/record/assets/js/1187.9b4894f4.js"><link rel="prefetch" href="/record/assets/js/1188.33a1d8d1.js"><link rel="prefetch" href="/record/assets/js/1189.f0a6c994.js"><link rel="prefetch" href="/record/assets/js/119.f432d037.js"><link rel="prefetch" href="/record/assets/js/1190.2e342fe0.js"><link rel="prefetch" href="/record/assets/js/1191.110c3fc7.js"><link rel="prefetch" href="/record/assets/js/1192.21060e9c.js"><link rel="prefetch" href="/record/assets/js/1193.fa03527c.js"><link rel="prefetch" href="/record/assets/js/1194.0147ebba.js"><link rel="prefetch" href="/record/assets/js/1195.f6196778.js"><link rel="prefetch" href="/record/assets/js/1196.c6dba4e3.js"><link rel="prefetch" href="/record/assets/js/1197.610e2fd4.js"><link rel="prefetch" href="/record/assets/js/1198.265a721a.js"><link rel="prefetch" href="/record/assets/js/1199.e3afa959.js"><link rel="prefetch" href="/record/assets/js/12.d0bea4a2.js"><link rel="prefetch" href="/record/assets/js/120.2d06e882.js"><link rel="prefetch" href="/record/assets/js/1200.0fa427f4.js"><link rel="prefetch" href="/record/assets/js/1201.653ba35b.js"><link rel="prefetch" href="/record/assets/js/1202.d70b701f.js"><link rel="prefetch" href="/record/assets/js/1203.8ec214ab.js"><link rel="prefetch" href="/record/assets/js/1204.aaa4512d.js"><link rel="prefetch" href="/record/assets/js/1205.649168af.js"><link rel="prefetch" href="/record/assets/js/1206.793a1ada.js"><link rel="prefetch" href="/record/assets/js/1207.efd080c3.js"><link rel="prefetch" href="/record/assets/js/1208.5e6e2119.js"><link rel="prefetch" href="/record/assets/js/1209.68492d67.js"><link rel="prefetch" href="/record/assets/js/121.ee4ecf5a.js"><link rel="prefetch" href="/record/assets/js/1210.0692db63.js"><link rel="prefetch" href="/record/assets/js/1211.20e5c15c.js"><link rel="prefetch" href="/record/assets/js/1212.9c8de5d7.js"><link rel="prefetch" href="/record/assets/js/1213.5b9e1897.js"><link rel="prefetch" href="/record/assets/js/1214.3b971896.js"><link rel="prefetch" href="/record/assets/js/1215.4017cd35.js"><link rel="prefetch" href="/record/assets/js/1216.e2abee07.js"><link rel="prefetch" href="/record/assets/js/1217.814809dd.js"><link rel="prefetch" href="/record/assets/js/1218.dc7966b3.js"><link rel="prefetch" href="/record/assets/js/1219.91520ea8.js"><link rel="prefetch" href="/record/assets/js/122.48e8ea50.js"><link rel="prefetch" href="/record/assets/js/1220.4cd4d209.js"><link rel="prefetch" href="/record/assets/js/1221.88ee0191.js"><link rel="prefetch" href="/record/assets/js/1222.6668a4cf.js"><link rel="prefetch" href="/record/assets/js/1223.69990c9a.js"><link rel="prefetch" href="/record/assets/js/1224.a78d5a35.js"><link rel="prefetch" href="/record/assets/js/1225.5c2748a1.js"><link rel="prefetch" href="/record/assets/js/1226.968510e4.js"><link rel="prefetch" href="/record/assets/js/1227.0141d87a.js"><link rel="prefetch" href="/record/assets/js/1228.fed34582.js"><link rel="prefetch" href="/record/assets/js/1229.ca53d367.js"><link rel="prefetch" href="/record/assets/js/123.ad5baf5f.js"><link rel="prefetch" href="/record/assets/js/1230.56f63040.js"><link rel="prefetch" href="/record/assets/js/1231.00e88c75.js"><link rel="prefetch" href="/record/assets/js/1232.91986f96.js"><link rel="prefetch" href="/record/assets/js/1233.5d06849d.js"><link rel="prefetch" href="/record/assets/js/1234.3dcfbc9d.js"><link rel="prefetch" href="/record/assets/js/1235.68552733.js"><link rel="prefetch" href="/record/assets/js/1236.c3e009d1.js"><link rel="prefetch" href="/record/assets/js/1237.5939f823.js"><link rel="prefetch" href="/record/assets/js/1238.519ab8ab.js"><link rel="prefetch" href="/record/assets/js/1239.84df67d3.js"><link rel="prefetch" href="/record/assets/js/124.d6e2bd5b.js"><link rel="prefetch" href="/record/assets/js/1240.5e0af8c1.js"><link rel="prefetch" href="/record/assets/js/1241.b72c2a82.js"><link rel="prefetch" href="/record/assets/js/1242.1faf2684.js"><link rel="prefetch" href="/record/assets/js/1243.13d4fe0c.js"><link rel="prefetch" href="/record/assets/js/1244.a3e55b3a.js"><link rel="prefetch" href="/record/assets/js/1245.23b4939a.js"><link rel="prefetch" href="/record/assets/js/1246.d4e1452f.js"><link rel="prefetch" href="/record/assets/js/1247.6724bd71.js"><link rel="prefetch" href="/record/assets/js/1248.ba5ddccd.js"><link rel="prefetch" href="/record/assets/js/1249.d7248c46.js"><link rel="prefetch" href="/record/assets/js/125.99ef0b71.js"><link rel="prefetch" href="/record/assets/js/1250.1ec0828b.js"><link rel="prefetch" href="/record/assets/js/1251.f0d9ebdc.js"><link rel="prefetch" href="/record/assets/js/1252.b66915cc.js"><link rel="prefetch" href="/record/assets/js/1253.6692c845.js"><link rel="prefetch" href="/record/assets/js/1254.2f831be5.js"><link rel="prefetch" href="/record/assets/js/1255.437772bc.js"><link rel="prefetch" href="/record/assets/js/1256.e3190e4d.js"><link rel="prefetch" href="/record/assets/js/1257.8cb75d45.js"><link rel="prefetch" href="/record/assets/js/1258.ad1829ab.js"><link rel="prefetch" href="/record/assets/js/1259.8aa98c08.js"><link rel="prefetch" href="/record/assets/js/126.94f40334.js"><link rel="prefetch" href="/record/assets/js/1260.46399027.js"><link rel="prefetch" href="/record/assets/js/1261.eabe8daa.js"><link rel="prefetch" href="/record/assets/js/1262.4f1531d2.js"><link rel="prefetch" href="/record/assets/js/1263.fd6d1647.js"><link rel="prefetch" href="/record/assets/js/1264.5c302d1a.js"><link rel="prefetch" href="/record/assets/js/1265.61f331ec.js"><link rel="prefetch" href="/record/assets/js/1266.65c45513.js"><link rel="prefetch" href="/record/assets/js/1267.af9fdb99.js"><link rel="prefetch" href="/record/assets/js/1268.90e3ab7e.js"><link rel="prefetch" href="/record/assets/js/1269.6b15cf5e.js"><link rel="prefetch" href="/record/assets/js/127.85e80e75.js"><link rel="prefetch" href="/record/assets/js/1270.7c3e0e32.js"><link rel="prefetch" href="/record/assets/js/1271.0ffd8d9b.js"><link rel="prefetch" href="/record/assets/js/1272.fb46819e.js"><link rel="prefetch" href="/record/assets/js/1273.63fc7cf2.js"><link rel="prefetch" href="/record/assets/js/1274.cd6617dc.js"><link rel="prefetch" href="/record/assets/js/1275.f14be758.js"><link rel="prefetch" href="/record/assets/js/1276.ca24fcfd.js"><link rel="prefetch" href="/record/assets/js/1277.95d3a850.js"><link rel="prefetch" href="/record/assets/js/1278.5d881af2.js"><link rel="prefetch" href="/record/assets/js/1279.a0b8f7fc.js"><link rel="prefetch" href="/record/assets/js/128.df6bcd7b.js"><link rel="prefetch" href="/record/assets/js/1280.c5d2cc6c.js"><link rel="prefetch" href="/record/assets/js/1281.9876f492.js"><link rel="prefetch" href="/record/assets/js/1282.1cd16d59.js"><link rel="prefetch" href="/record/assets/js/1283.449d88bb.js"><link rel="prefetch" href="/record/assets/js/1284.ed3164e9.js"><link rel="prefetch" href="/record/assets/js/1285.d7a7cd97.js"><link rel="prefetch" href="/record/assets/js/1286.0cb2e710.js"><link rel="prefetch" href="/record/assets/js/1287.a4ad1fbc.js"><link rel="prefetch" href="/record/assets/js/1288.db505ddb.js"><link rel="prefetch" href="/record/assets/js/1289.b30db76e.js"><link rel="prefetch" href="/record/assets/js/129.f9151dae.js"><link rel="prefetch" href="/record/assets/js/1290.e0624ebf.js"><link rel="prefetch" href="/record/assets/js/1291.cb504821.js"><link rel="prefetch" href="/record/assets/js/1292.0b5a3240.js"><link rel="prefetch" href="/record/assets/js/1293.d566d0fd.js"><link rel="prefetch" href="/record/assets/js/1294.56cd9419.js"><link rel="prefetch" href="/record/assets/js/1295.7b1e5264.js"><link rel="prefetch" href="/record/assets/js/1296.fe6689a9.js"><link rel="prefetch" href="/record/assets/js/1297.4b4bf0a3.js"><link rel="prefetch" href="/record/assets/js/1298.491b5118.js"><link rel="prefetch" href="/record/assets/js/1299.f3abe2ec.js"><link rel="prefetch" href="/record/assets/js/13.15098364.js"><link rel="prefetch" href="/record/assets/js/130.4903a6d5.js"><link rel="prefetch" href="/record/assets/js/1300.3a15820c.js"><link rel="prefetch" href="/record/assets/js/1301.9a425a41.js"><link rel="prefetch" href="/record/assets/js/1302.30a3e8ea.js"><link rel="prefetch" href="/record/assets/js/1303.39f34c2a.js"><link rel="prefetch" href="/record/assets/js/1304.13688ef7.js"><link rel="prefetch" href="/record/assets/js/1305.9e0a1f05.js"><link rel="prefetch" href="/record/assets/js/1306.fc9b7a56.js"><link rel="prefetch" href="/record/assets/js/1307.1493dae9.js"><link rel="prefetch" href="/record/assets/js/1308.0a2fda35.js"><link rel="prefetch" href="/record/assets/js/1309.a5cf932c.js"><link rel="prefetch" href="/record/assets/js/131.766509ba.js"><link rel="prefetch" href="/record/assets/js/1310.609bf048.js"><link rel="prefetch" href="/record/assets/js/1311.ecba46a2.js"><link rel="prefetch" href="/record/assets/js/1312.bbfc59da.js"><link rel="prefetch" href="/record/assets/js/1313.6b856b62.js"><link rel="prefetch" href="/record/assets/js/1314.972efb78.js"><link rel="prefetch" href="/record/assets/js/1315.512a6540.js"><link rel="prefetch" href="/record/assets/js/1316.da9bc51f.js"><link rel="prefetch" href="/record/assets/js/1317.fc66d988.js"><link rel="prefetch" href="/record/assets/js/1318.b73fe5fe.js"><link rel="prefetch" href="/record/assets/js/1319.758f408c.js"><link rel="prefetch" href="/record/assets/js/132.4f5176cc.js"><link rel="prefetch" href="/record/assets/js/1320.0eda5f9a.js"><link rel="prefetch" href="/record/assets/js/1321.e39b0359.js"><link rel="prefetch" href="/record/assets/js/1322.183aa494.js"><link rel="prefetch" href="/record/assets/js/1323.13b221d8.js"><link rel="prefetch" href="/record/assets/js/1324.73d3a950.js"><link rel="prefetch" href="/record/assets/js/1325.18579128.js"><link rel="prefetch" href="/record/assets/js/1326.6464eacb.js"><link rel="prefetch" href="/record/assets/js/1327.adfcbb0c.js"><link rel="prefetch" href="/record/assets/js/1328.d4bcf5ed.js"><link rel="prefetch" href="/record/assets/js/1329.80801037.js"><link rel="prefetch" href="/record/assets/js/133.52393df3.js"><link rel="prefetch" href="/record/assets/js/1330.fd953312.js"><link rel="prefetch" href="/record/assets/js/1331.9790ca31.js"><link rel="prefetch" href="/record/assets/js/1332.0c38666d.js"><link rel="prefetch" href="/record/assets/js/1333.10dda06e.js"><link rel="prefetch" href="/record/assets/js/1334.256c2004.js"><link rel="prefetch" href="/record/assets/js/1335.3bc4b4be.js"><link rel="prefetch" href="/record/assets/js/1336.f1e92bda.js"><link rel="prefetch" href="/record/assets/js/1337.a118bae4.js"><link rel="prefetch" href="/record/assets/js/1338.380e8d5d.js"><link rel="prefetch" href="/record/assets/js/1339.e9b3c92b.js"><link rel="prefetch" href="/record/assets/js/134.f1e27e0e.js"><link rel="prefetch" href="/record/assets/js/1340.ac7e2d73.js"><link rel="prefetch" href="/record/assets/js/1341.1bd14dc0.js"><link rel="prefetch" href="/record/assets/js/1342.b9d2dbf6.js"><link rel="prefetch" href="/record/assets/js/1343.c33828d6.js"><link rel="prefetch" href="/record/assets/js/1344.8c1eca55.js"><link rel="prefetch" href="/record/assets/js/1345.459f824b.js"><link rel="prefetch" href="/record/assets/js/1346.98b96df8.js"><link rel="prefetch" href="/record/assets/js/1347.93bcbcc1.js"><link rel="prefetch" href="/record/assets/js/1348.618551ee.js"><link rel="prefetch" href="/record/assets/js/1349.0f4e4dfb.js"><link rel="prefetch" href="/record/assets/js/135.7bcb30aa.js"><link rel="prefetch" href="/record/assets/js/1350.bbddf7de.js"><link rel="prefetch" href="/record/assets/js/1351.2d7938f4.js"><link rel="prefetch" href="/record/assets/js/1352.7d19139d.js"><link rel="prefetch" href="/record/assets/js/1353.8cf38d46.js"><link rel="prefetch" href="/record/assets/js/1354.1640b0f2.js"><link rel="prefetch" href="/record/assets/js/1355.047539bf.js"><link rel="prefetch" href="/record/assets/js/1356.b5e187b4.js"><link rel="prefetch" href="/record/assets/js/1357.458be03e.js"><link rel="prefetch" href="/record/assets/js/1358.94d85306.js"><link rel="prefetch" href="/record/assets/js/1359.f7ca8644.js"><link rel="prefetch" href="/record/assets/js/136.0098f5c1.js"><link rel="prefetch" href="/record/assets/js/1360.7d09c2af.js"><link rel="prefetch" href="/record/assets/js/1361.5e57759f.js"><link rel="prefetch" href="/record/assets/js/1362.7a7a355d.js"><link rel="prefetch" href="/record/assets/js/1363.6d2143b0.js"><link rel="prefetch" href="/record/assets/js/1364.1553ad4d.js"><link rel="prefetch" href="/record/assets/js/1365.5fbe271b.js"><link rel="prefetch" href="/record/assets/js/1366.6b7fe9e9.js"><link rel="prefetch" href="/record/assets/js/1367.0f7e2418.js"><link rel="prefetch" href="/record/assets/js/1368.d551ef26.js"><link rel="prefetch" href="/record/assets/js/1369.82fee56c.js"><link rel="prefetch" href="/record/assets/js/137.51cf468b.js"><link rel="prefetch" href="/record/assets/js/1370.939a094a.js"><link rel="prefetch" href="/record/assets/js/1371.f1c60c63.js"><link rel="prefetch" href="/record/assets/js/1372.7838f793.js"><link rel="prefetch" href="/record/assets/js/1373.28ed1343.js"><link rel="prefetch" href="/record/assets/js/1374.4a1bfa5c.js"><link rel="prefetch" href="/record/assets/js/1375.4b349c9e.js"><link rel="prefetch" href="/record/assets/js/1376.517a2919.js"><link rel="prefetch" href="/record/assets/js/1377.f33c3c8c.js"><link rel="prefetch" href="/record/assets/js/1378.c3ef14d1.js"><link rel="prefetch" href="/record/assets/js/1379.2ec9c136.js"><link rel="prefetch" href="/record/assets/js/138.8d377b2b.js"><link rel="prefetch" href="/record/assets/js/1380.4179d20c.js"><link rel="prefetch" href="/record/assets/js/1381.1ced1165.js"><link rel="prefetch" href="/record/assets/js/1382.0c5f8a7d.js"><link rel="prefetch" href="/record/assets/js/1383.8c563d21.js"><link rel="prefetch" href="/record/assets/js/1384.28a29787.js"><link rel="prefetch" href="/record/assets/js/1385.625d9b2b.js"><link rel="prefetch" href="/record/assets/js/1386.e09ff0a7.js"><link rel="prefetch" href="/record/assets/js/1387.61017b38.js"><link rel="prefetch" href="/record/assets/js/1388.025e30b6.js"><link rel="prefetch" href="/record/assets/js/1389.3b3650dc.js"><link rel="prefetch" href="/record/assets/js/139.f47b9976.js"><link rel="prefetch" href="/record/assets/js/1390.51d79f66.js"><link rel="prefetch" href="/record/assets/js/1391.af99f05b.js"><link rel="prefetch" href="/record/assets/js/1392.2b89fb85.js"><link rel="prefetch" href="/record/assets/js/1393.f57d362a.js"><link rel="prefetch" href="/record/assets/js/1394.5171f70d.js"><link rel="prefetch" href="/record/assets/js/1395.5e61c463.js"><link rel="prefetch" href="/record/assets/js/1396.d3974265.js"><link rel="prefetch" href="/record/assets/js/1397.7c7f67a5.js"><link rel="prefetch" href="/record/assets/js/1398.d1ef96c6.js"><link rel="prefetch" href="/record/assets/js/1399.9db29a39.js"><link rel="prefetch" href="/record/assets/js/14.581ee0b9.js"><link rel="prefetch" href="/record/assets/js/140.887045af.js"><link rel="prefetch" href="/record/assets/js/1400.5ba621d3.js"><link rel="prefetch" href="/record/assets/js/1401.00034ce6.js"><link rel="prefetch" href="/record/assets/js/1402.9e611759.js"><link rel="prefetch" href="/record/assets/js/1403.fc479beb.js"><link rel="prefetch" href="/record/assets/js/1404.3ded3bf2.js"><link rel="prefetch" href="/record/assets/js/1405.645984c5.js"><link rel="prefetch" href="/record/assets/js/1406.cc38f07d.js"><link rel="prefetch" href="/record/assets/js/1407.b50b3328.js"><link rel="prefetch" href="/record/assets/js/1408.61caed5c.js"><link rel="prefetch" href="/record/assets/js/1409.8cade362.js"><link rel="prefetch" href="/record/assets/js/141.0fd611a1.js"><link rel="prefetch" href="/record/assets/js/1410.3556ed54.js"><link rel="prefetch" href="/record/assets/js/1411.c03169c3.js"><link rel="prefetch" href="/record/assets/js/1412.c68f9776.js"><link rel="prefetch" href="/record/assets/js/1413.93c0d5ba.js"><link rel="prefetch" href="/record/assets/js/1414.20d5d06b.js"><link rel="prefetch" href="/record/assets/js/1415.4d395211.js"><link rel="prefetch" href="/record/assets/js/1416.19d4fe7a.js"><link rel="prefetch" href="/record/assets/js/142.c9d2d58f.js"><link rel="prefetch" href="/record/assets/js/143.6957dd2b.js"><link rel="prefetch" href="/record/assets/js/144.7b1ee56a.js"><link rel="prefetch" href="/record/assets/js/145.d0d258a1.js"><link rel="prefetch" href="/record/assets/js/146.83bef296.js"><link rel="prefetch" href="/record/assets/js/147.9af40e5d.js"><link rel="prefetch" href="/record/assets/js/148.e616ec01.js"><link rel="prefetch" href="/record/assets/js/149.d2637326.js"><link rel="prefetch" href="/record/assets/js/15.5d47c480.js"><link rel="prefetch" href="/record/assets/js/150.b6c3084c.js"><link rel="prefetch" href="/record/assets/js/151.f4b661fe.js"><link rel="prefetch" href="/record/assets/js/152.ba81bb86.js"><link rel="prefetch" href="/record/assets/js/153.fc171257.js"><link rel="prefetch" href="/record/assets/js/154.57982d14.js"><link rel="prefetch" href="/record/assets/js/155.c67ebbca.js"><link rel="prefetch" href="/record/assets/js/156.fe88ecec.js"><link rel="prefetch" href="/record/assets/js/157.24477e8e.js"><link rel="prefetch" href="/record/assets/js/158.f7693431.js"><link rel="prefetch" href="/record/assets/js/159.8c134f49.js"><link rel="prefetch" href="/record/assets/js/16.60e768c8.js"><link rel="prefetch" href="/record/assets/js/160.a3ef2f36.js"><link rel="prefetch" href="/record/assets/js/161.32c834be.js"><link rel="prefetch" href="/record/assets/js/162.ede9d842.js"><link rel="prefetch" href="/record/assets/js/163.3b705a37.js"><link rel="prefetch" href="/record/assets/js/164.d65d5b04.js"><link rel="prefetch" href="/record/assets/js/165.da0dc096.js"><link rel="prefetch" href="/record/assets/js/166.5a8fb738.js"><link rel="prefetch" href="/record/assets/js/167.da3ea357.js"><link rel="prefetch" href="/record/assets/js/168.f09badd7.js"><link rel="prefetch" href="/record/assets/js/169.5ed85f20.js"><link rel="prefetch" href="/record/assets/js/17.cb59d171.js"><link rel="prefetch" href="/record/assets/js/170.79ae6198.js"><link rel="prefetch" href="/record/assets/js/171.6ec67bd2.js"><link rel="prefetch" href="/record/assets/js/172.1c3dfb17.js"><link rel="prefetch" href="/record/assets/js/173.9031bb13.js"><link rel="prefetch" href="/record/assets/js/174.922e7582.js"><link rel="prefetch" href="/record/assets/js/175.54e256eb.js"><link rel="prefetch" href="/record/assets/js/176.e0b438a8.js"><link rel="prefetch" href="/record/assets/js/177.13f3bc61.js"><link rel="prefetch" href="/record/assets/js/178.0d44f698.js"><link rel="prefetch" href="/record/assets/js/179.f9a3b461.js"><link rel="prefetch" href="/record/assets/js/18.e86ee14f.js"><link rel="prefetch" href="/record/assets/js/180.5c8960c0.js"><link rel="prefetch" href="/record/assets/js/181.f1a77cc2.js"><link rel="prefetch" href="/record/assets/js/182.ea3b537f.js"><link rel="prefetch" href="/record/assets/js/183.4c7602ce.js"><link rel="prefetch" href="/record/assets/js/184.c252134a.js"><link rel="prefetch" href="/record/assets/js/185.a54ac446.js"><link rel="prefetch" href="/record/assets/js/186.20f359af.js"><link rel="prefetch" href="/record/assets/js/187.54710fdf.js"><link rel="prefetch" href="/record/assets/js/188.0b2e0c3a.js"><link rel="prefetch" href="/record/assets/js/189.92d25633.js"><link rel="prefetch" href="/record/assets/js/19.cf1cddee.js"><link rel="prefetch" href="/record/assets/js/190.a18c694a.js"><link rel="prefetch" href="/record/assets/js/191.54f12d13.js"><link rel="prefetch" href="/record/assets/js/192.b1431d47.js"><link rel="prefetch" href="/record/assets/js/193.9bfcc65d.js"><link rel="prefetch" href="/record/assets/js/194.6385f1fe.js"><link rel="prefetch" href="/record/assets/js/195.c09651af.js"><link rel="prefetch" href="/record/assets/js/196.11804eb1.js"><link rel="prefetch" href="/record/assets/js/197.d72f89d0.js"><link rel="prefetch" href="/record/assets/js/198.f3a93060.js"><link rel="prefetch" href="/record/assets/js/199.4a5180a8.js"><link rel="prefetch" href="/record/assets/js/20.f918639f.js"><link rel="prefetch" href="/record/assets/js/200.f68bcf86.js"><link rel="prefetch" href="/record/assets/js/201.d1905e22.js"><link rel="prefetch" href="/record/assets/js/202.8913bd39.js"><link rel="prefetch" href="/record/assets/js/203.27c8a7aa.js"><link rel="prefetch" href="/record/assets/js/204.469dc69f.js"><link rel="prefetch" href="/record/assets/js/205.a9442e13.js"><link rel="prefetch" href="/record/assets/js/206.790259f3.js"><link rel="prefetch" href="/record/assets/js/207.4433822c.js"><link rel="prefetch" href="/record/assets/js/208.c2ee97b2.js"><link rel="prefetch" href="/record/assets/js/209.5d0f32b4.js"><link rel="prefetch" href="/record/assets/js/21.29804543.js"><link rel="prefetch" href="/record/assets/js/210.42cd938b.js"><link rel="prefetch" href="/record/assets/js/211.2d665567.js"><link rel="prefetch" href="/record/assets/js/212.48369175.js"><link rel="prefetch" href="/record/assets/js/213.99680fac.js"><link rel="prefetch" href="/record/assets/js/214.609ff47e.js"><link rel="prefetch" href="/record/assets/js/215.119755f0.js"><link rel="prefetch" href="/record/assets/js/216.003d69fa.js"><link rel="prefetch" href="/record/assets/js/217.5a602151.js"><link rel="prefetch" href="/record/assets/js/218.f30d4480.js"><link rel="prefetch" href="/record/assets/js/219.f556ea81.js"><link rel="prefetch" href="/record/assets/js/22.6454c1c8.js"><link rel="prefetch" href="/record/assets/js/220.06ad9936.js"><link rel="prefetch" href="/record/assets/js/221.e5472b1c.js"><link rel="prefetch" href="/record/assets/js/222.eca0874e.js"><link rel="prefetch" href="/record/assets/js/223.2ad79f4b.js"><link rel="prefetch" href="/record/assets/js/224.3bfc677d.js"><link rel="prefetch" href="/record/assets/js/225.629bdf69.js"><link rel="prefetch" href="/record/assets/js/226.33a0733b.js"><link rel="prefetch" href="/record/assets/js/227.78ce55ad.js"><link rel="prefetch" href="/record/assets/js/228.c1be7d67.js"><link rel="prefetch" href="/record/assets/js/229.c0474374.js"><link rel="prefetch" href="/record/assets/js/23.b46cb835.js"><link rel="prefetch" href="/record/assets/js/230.c1ea91eb.js"><link rel="prefetch" href="/record/assets/js/231.00cfb4aa.js"><link rel="prefetch" href="/record/assets/js/232.8add370a.js"><link rel="prefetch" href="/record/assets/js/233.2c424b74.js"><link rel="prefetch" href="/record/assets/js/234.c35f0e5a.js"><link rel="prefetch" href="/record/assets/js/235.f8fb594a.js"><link rel="prefetch" href="/record/assets/js/236.9719cf76.js"><link rel="prefetch" href="/record/assets/js/237.1420b94f.js"><link rel="prefetch" href="/record/assets/js/238.554c6233.js"><link rel="prefetch" href="/record/assets/js/239.9db746b2.js"><link rel="prefetch" href="/record/assets/js/24.be498a19.js"><link rel="prefetch" href="/record/assets/js/240.bffc6fe6.js"><link rel="prefetch" href="/record/assets/js/241.1adaa9c6.js"><link rel="prefetch" href="/record/assets/js/242.c1229e5c.js"><link rel="prefetch" href="/record/assets/js/243.eddcc6e0.js"><link rel="prefetch" href="/record/assets/js/244.999ba72f.js"><link rel="prefetch" href="/record/assets/js/245.46f207d4.js"><link rel="prefetch" href="/record/assets/js/246.df59f48c.js"><link rel="prefetch" href="/record/assets/js/247.7e60ebe2.js"><link rel="prefetch" href="/record/assets/js/248.75eb4feb.js"><link rel="prefetch" href="/record/assets/js/249.f3a12bc8.js"><link rel="prefetch" href="/record/assets/js/25.05cf3a9e.js"><link rel="prefetch" href="/record/assets/js/250.fd8cdc6e.js"><link rel="prefetch" href="/record/assets/js/251.21abac3b.js"><link rel="prefetch" href="/record/assets/js/252.1c26596f.js"><link rel="prefetch" href="/record/assets/js/253.6eb3a63f.js"><link rel="prefetch" href="/record/assets/js/254.7d2dff94.js"><link rel="prefetch" href="/record/assets/js/255.f943787e.js"><link rel="prefetch" href="/record/assets/js/256.8b9d33a4.js"><link rel="prefetch" href="/record/assets/js/257.3c682b20.js"><link rel="prefetch" href="/record/assets/js/258.6ecdce6d.js"><link rel="prefetch" href="/record/assets/js/259.1469e60e.js"><link rel="prefetch" href="/record/assets/js/26.7325d066.js"><link rel="prefetch" href="/record/assets/js/260.ab44cbfe.js"><link rel="prefetch" href="/record/assets/js/261.b3318216.js"><link rel="prefetch" href="/record/assets/js/262.af684b53.js"><link rel="prefetch" href="/record/assets/js/263.e023219c.js"><link rel="prefetch" href="/record/assets/js/264.0141650f.js"><link rel="prefetch" href="/record/assets/js/265.62bc319e.js"><link rel="prefetch" href="/record/assets/js/266.9053dd0e.js"><link rel="prefetch" href="/record/assets/js/267.2a5bc014.js"><link rel="prefetch" href="/record/assets/js/268.8f2ace37.js"><link rel="prefetch" href="/record/assets/js/269.6fda2751.js"><link rel="prefetch" href="/record/assets/js/27.e3fa089e.js"><link rel="prefetch" href="/record/assets/js/270.da815e1c.js"><link rel="prefetch" href="/record/assets/js/271.d4d913c9.js"><link rel="prefetch" href="/record/assets/js/272.b6d8f83a.js"><link rel="prefetch" href="/record/assets/js/273.dbca5a12.js"><link rel="prefetch" href="/record/assets/js/274.f392b28f.js"><link rel="prefetch" href="/record/assets/js/275.aabd3750.js"><link rel="prefetch" href="/record/assets/js/276.1b4146e2.js"><link rel="prefetch" href="/record/assets/js/277.c4e0fcad.js"><link rel="prefetch" href="/record/assets/js/278.c3ae7ab1.js"><link rel="prefetch" href="/record/assets/js/279.7aabacad.js"><link rel="prefetch" href="/record/assets/js/28.a1d21d27.js"><link rel="prefetch" href="/record/assets/js/280.597a32bc.js"><link rel="prefetch" href="/record/assets/js/281.003da26f.js"><link rel="prefetch" href="/record/assets/js/282.be81e8d0.js"><link rel="prefetch" href="/record/assets/js/283.75503747.js"><link rel="prefetch" href="/record/assets/js/284.ab6d8695.js"><link rel="prefetch" href="/record/assets/js/285.96e2414a.js"><link rel="prefetch" href="/record/assets/js/286.4be9daf4.js"><link rel="prefetch" href="/record/assets/js/287.0ff8edec.js"><link rel="prefetch" href="/record/assets/js/288.dd078c21.js"><link rel="prefetch" href="/record/assets/js/289.6ba268fa.js"><link rel="prefetch" href="/record/assets/js/29.933c3015.js"><link rel="prefetch" href="/record/assets/js/290.6cfc6e8a.js"><link rel="prefetch" href="/record/assets/js/291.786d3b7b.js"><link rel="prefetch" href="/record/assets/js/292.f04d1647.js"><link rel="prefetch" href="/record/assets/js/293.c30fc2b3.js"><link rel="prefetch" href="/record/assets/js/294.c2d341e3.js"><link rel="prefetch" href="/record/assets/js/295.1212fe7e.js"><link rel="prefetch" href="/record/assets/js/296.251edd79.js"><link rel="prefetch" href="/record/assets/js/297.745ea47b.js"><link rel="prefetch" href="/record/assets/js/298.0c448ca7.js"><link rel="prefetch" href="/record/assets/js/299.83f8381e.js"><link rel="prefetch" href="/record/assets/js/3.2637eec6.js"><link rel="prefetch" href="/record/assets/js/30.a96c3ab2.js"><link rel="prefetch" href="/record/assets/js/300.85000d3b.js"><link rel="prefetch" href="/record/assets/js/301.acffb4e6.js"><link rel="prefetch" href="/record/assets/js/302.4ad721d8.js"><link rel="prefetch" href="/record/assets/js/303.e86b1418.js"><link rel="prefetch" href="/record/assets/js/304.b8f91b1e.js"><link rel="prefetch" href="/record/assets/js/305.fa8e56e2.js"><link rel="prefetch" href="/record/assets/js/306.aeab42db.js"><link rel="prefetch" href="/record/assets/js/307.6db9f828.js"><link rel="prefetch" href="/record/assets/js/308.5d7ec37e.js"><link rel="prefetch" href="/record/assets/js/309.bb7a58fb.js"><link rel="prefetch" href="/record/assets/js/31.88247d9d.js"><link rel="prefetch" href="/record/assets/js/310.57c585e0.js"><link rel="prefetch" href="/record/assets/js/311.2f497daa.js"><link rel="prefetch" href="/record/assets/js/312.d71ad657.js"><link rel="prefetch" href="/record/assets/js/313.76df0b13.js"><link rel="prefetch" href="/record/assets/js/314.016e3489.js"><link rel="prefetch" href="/record/assets/js/315.8261c8a0.js"><link rel="prefetch" href="/record/assets/js/316.0c0e71a9.js"><link rel="prefetch" href="/record/assets/js/317.00747d48.js"><link rel="prefetch" href="/record/assets/js/318.32ba77db.js"><link rel="prefetch" href="/record/assets/js/319.e2f81c41.js"><link rel="prefetch" href="/record/assets/js/32.de562f31.js"><link rel="prefetch" href="/record/assets/js/320.c4c791c2.js"><link rel="prefetch" href="/record/assets/js/321.194adf9a.js"><link rel="prefetch" href="/record/assets/js/322.5e840b01.js"><link rel="prefetch" href="/record/assets/js/323.9c93b90f.js"><link rel="prefetch" href="/record/assets/js/324.a461586b.js"><link rel="prefetch" href="/record/assets/js/325.cb89d99a.js"><link rel="prefetch" href="/record/assets/js/326.b5c590f4.js"><link rel="prefetch" href="/record/assets/js/327.26a4c6cc.js"><link rel="prefetch" href="/record/assets/js/328.8a5af0ff.js"><link rel="prefetch" href="/record/assets/js/329.fd06990b.js"><link rel="prefetch" href="/record/assets/js/33.bdefdae0.js"><link rel="prefetch" href="/record/assets/js/330.6e960eac.js"><link rel="prefetch" href="/record/assets/js/331.0ba2dbae.js"><link rel="prefetch" href="/record/assets/js/332.acdb3a81.js"><link rel="prefetch" href="/record/assets/js/333.8fdec189.js"><link rel="prefetch" href="/record/assets/js/334.9d42e9b9.js"><link rel="prefetch" href="/record/assets/js/335.a06165e8.js"><link rel="prefetch" href="/record/assets/js/336.b37347c5.js"><link rel="prefetch" href="/record/assets/js/337.9a5d5e8f.js"><link rel="prefetch" href="/record/assets/js/338.ce7acf74.js"><link rel="prefetch" href="/record/assets/js/339.63887ade.js"><link rel="prefetch" href="/record/assets/js/34.d002317d.js"><link rel="prefetch" href="/record/assets/js/340.13640b48.js"><link rel="prefetch" href="/record/assets/js/341.003c7b4a.js"><link rel="prefetch" href="/record/assets/js/342.c97ecffe.js"><link rel="prefetch" href="/record/assets/js/343.8a915361.js"><link rel="prefetch" href="/record/assets/js/344.0bd7be56.js"><link rel="prefetch" href="/record/assets/js/345.7a46a94e.js"><link rel="prefetch" href="/record/assets/js/346.70914db7.js"><link rel="prefetch" href="/record/assets/js/347.5cffe944.js"><link rel="prefetch" href="/record/assets/js/348.a1f9380e.js"><link rel="prefetch" href="/record/assets/js/349.55fe3d46.js"><link rel="prefetch" href="/record/assets/js/35.ff42fed4.js"><link rel="prefetch" href="/record/assets/js/350.c5188cc2.js"><link rel="prefetch" href="/record/assets/js/351.7e92a7de.js"><link rel="prefetch" href="/record/assets/js/352.941d5955.js"><link rel="prefetch" href="/record/assets/js/353.5faa15ee.js"><link rel="prefetch" href="/record/assets/js/354.126dc219.js"><link rel="prefetch" href="/record/assets/js/355.494dcc6d.js"><link rel="prefetch" href="/record/assets/js/356.499aaf8a.js"><link rel="prefetch" href="/record/assets/js/357.370563d8.js"><link rel="prefetch" href="/record/assets/js/358.963a24cd.js"><link rel="prefetch" href="/record/assets/js/359.fa28f257.js"><link rel="prefetch" href="/record/assets/js/36.de0055e8.js"><link rel="prefetch" href="/record/assets/js/360.8ded8183.js"><link rel="prefetch" href="/record/assets/js/361.eac0bd94.js"><link rel="prefetch" href="/record/assets/js/362.7070e01c.js"><link rel="prefetch" href="/record/assets/js/363.fc06e081.js"><link rel="prefetch" href="/record/assets/js/364.354f679d.js"><link rel="prefetch" href="/record/assets/js/365.2fcd8627.js"><link rel="prefetch" href="/record/assets/js/366.1aaa49be.js"><link rel="prefetch" href="/record/assets/js/367.27347f6f.js"><link rel="prefetch" href="/record/assets/js/368.fcafb993.js"><link rel="prefetch" href="/record/assets/js/369.30a7dd96.js"><link rel="prefetch" href="/record/assets/js/37.0e6f5e81.js"><link rel="prefetch" href="/record/assets/js/370.91838911.js"><link rel="prefetch" href="/record/assets/js/371.5d750ef3.js"><link rel="prefetch" href="/record/assets/js/372.3b56ae1c.js"><link rel="prefetch" href="/record/assets/js/373.4db9677d.js"><link rel="prefetch" href="/record/assets/js/374.d372d093.js"><link rel="prefetch" href="/record/assets/js/375.9444dda7.js"><link rel="prefetch" href="/record/assets/js/376.9e7c551e.js"><link rel="prefetch" href="/record/assets/js/377.c539d833.js"><link rel="prefetch" href="/record/assets/js/378.ce8429bc.js"><link rel="prefetch" href="/record/assets/js/379.bc227cf9.js"><link rel="prefetch" href="/record/assets/js/38.1e0d7d84.js"><link rel="prefetch" href="/record/assets/js/380.07c5a82a.js"><link rel="prefetch" href="/record/assets/js/381.ad988199.js"><link rel="prefetch" href="/record/assets/js/382.62e1713e.js"><link rel="prefetch" href="/record/assets/js/383.cff819e1.js"><link rel="prefetch" href="/record/assets/js/384.2288ca83.js"><link rel="prefetch" href="/record/assets/js/385.1d3cd3c0.js"><link rel="prefetch" href="/record/assets/js/386.cda6c4ed.js"><link rel="prefetch" href="/record/assets/js/387.c782c137.js"><link rel="prefetch" href="/record/assets/js/388.c68a3846.js"><link rel="prefetch" href="/record/assets/js/389.bac09e67.js"><link rel="prefetch" href="/record/assets/js/39.2a8c4c8f.js"><link rel="prefetch" href="/record/assets/js/390.3d7f669c.js"><link rel="prefetch" href="/record/assets/js/391.86aa7512.js"><link rel="prefetch" href="/record/assets/js/392.dc3c8036.js"><link rel="prefetch" href="/record/assets/js/393.2cb913f5.js"><link rel="prefetch" href="/record/assets/js/394.9747f5dd.js"><link rel="prefetch" href="/record/assets/js/395.cdaeacc0.js"><link rel="prefetch" href="/record/assets/js/396.dcbb2484.js"><link rel="prefetch" href="/record/assets/js/397.a0a12255.js"><link rel="prefetch" href="/record/assets/js/398.a0712957.js"><link rel="prefetch" href="/record/assets/js/399.6bcba568.js"><link rel="prefetch" href="/record/assets/js/4.affb7fc9.js"><link rel="prefetch" href="/record/assets/js/40.e7b38188.js"><link rel="prefetch" href="/record/assets/js/400.c8c945ff.js"><link rel="prefetch" href="/record/assets/js/401.96477311.js"><link rel="prefetch" href="/record/assets/js/402.da6f19d9.js"><link rel="prefetch" href="/record/assets/js/403.b6dde36f.js"><link rel="prefetch" href="/record/assets/js/404.d3ee3b56.js"><link rel="prefetch" href="/record/assets/js/405.d52e846e.js"><link rel="prefetch" href="/record/assets/js/406.fbf23c82.js"><link rel="prefetch" href="/record/assets/js/407.2b0f1fed.js"><link rel="prefetch" href="/record/assets/js/408.fc51a81f.js"><link rel="prefetch" href="/record/assets/js/409.27fd9980.js"><link rel="prefetch" href="/record/assets/js/41.3573775d.js"><link rel="prefetch" href="/record/assets/js/410.ad5017db.js"><link rel="prefetch" href="/record/assets/js/411.807da38d.js"><link rel="prefetch" href="/record/assets/js/412.31c58368.js"><link rel="prefetch" href="/record/assets/js/413.55c7a447.js"><link rel="prefetch" href="/record/assets/js/414.14855b79.js"><link rel="prefetch" href="/record/assets/js/415.4b6f9af9.js"><link rel="prefetch" href="/record/assets/js/416.a6813eec.js"><link rel="prefetch" href="/record/assets/js/417.6f7cd370.js"><link rel="prefetch" href="/record/assets/js/418.376c6e23.js"><link rel="prefetch" href="/record/assets/js/419.9dc31a68.js"><link rel="prefetch" href="/record/assets/js/42.23cff203.js"><link rel="prefetch" href="/record/assets/js/420.89efcf46.js"><link rel="prefetch" href="/record/assets/js/421.d7bfce03.js"><link rel="prefetch" href="/record/assets/js/422.52e3a875.js"><link rel="prefetch" href="/record/assets/js/423.62cfac8e.js"><link rel="prefetch" href="/record/assets/js/424.ecc6e00b.js"><link rel="prefetch" href="/record/assets/js/425.a158226b.js"><link rel="prefetch" href="/record/assets/js/426.68942932.js"><link rel="prefetch" href="/record/assets/js/427.465128f3.js"><link rel="prefetch" href="/record/assets/js/428.27d942a5.js"><link rel="prefetch" href="/record/assets/js/429.762d6b3d.js"><link rel="prefetch" href="/record/assets/js/43.367e12d0.js"><link rel="prefetch" href="/record/assets/js/430.0c6d35f4.js"><link rel="prefetch" href="/record/assets/js/431.b52a1ec6.js"><link rel="prefetch" href="/record/assets/js/432.3cb44eff.js"><link rel="prefetch" href="/record/assets/js/433.eeba90ff.js"><link rel="prefetch" href="/record/assets/js/434.ec86ac8d.js"><link rel="prefetch" href="/record/assets/js/435.aaa2033f.js"><link rel="prefetch" href="/record/assets/js/436.c622dd1b.js"><link rel="prefetch" href="/record/assets/js/437.f7df4336.js"><link rel="prefetch" href="/record/assets/js/438.772c38c4.js"><link rel="prefetch" href="/record/assets/js/439.dd249204.js"><link rel="prefetch" href="/record/assets/js/44.38ac60f3.js"><link rel="prefetch" href="/record/assets/js/440.0f1bc150.js"><link rel="prefetch" href="/record/assets/js/441.31ecd6ad.js"><link rel="prefetch" href="/record/assets/js/442.d869e5da.js"><link rel="prefetch" href="/record/assets/js/443.a82cd5d4.js"><link rel="prefetch" href="/record/assets/js/444.12ef7f19.js"><link rel="prefetch" href="/record/assets/js/445.e669e57b.js"><link rel="prefetch" href="/record/assets/js/446.72267293.js"><link rel="prefetch" href="/record/assets/js/447.85991f0b.js"><link rel="prefetch" href="/record/assets/js/448.d507e2e4.js"><link rel="prefetch" href="/record/assets/js/449.1aa5892f.js"><link rel="prefetch" href="/record/assets/js/45.a8f6e2e5.js"><link rel="prefetch" href="/record/assets/js/450.0e3120c3.js"><link rel="prefetch" href="/record/assets/js/451.a977a2e0.js"><link rel="prefetch" href="/record/assets/js/452.0b870bf9.js"><link rel="prefetch" href="/record/assets/js/453.ffc7f245.js"><link rel="prefetch" href="/record/assets/js/454.7d9d6576.js"><link rel="prefetch" href="/record/assets/js/455.b057aa34.js"><link rel="prefetch" href="/record/assets/js/456.a45f4775.js"><link rel="prefetch" href="/record/assets/js/457.79ffa2c6.js"><link rel="prefetch" href="/record/assets/js/458.6f6b9e22.js"><link rel="prefetch" href="/record/assets/js/459.bbf1f9cf.js"><link rel="prefetch" href="/record/assets/js/46.4a9c53f7.js"><link rel="prefetch" href="/record/assets/js/460.c0620db9.js"><link rel="prefetch" href="/record/assets/js/461.39eb5840.js"><link rel="prefetch" href="/record/assets/js/462.4d0515a6.js"><link rel="prefetch" href="/record/assets/js/463.19e4171b.js"><link rel="prefetch" href="/record/assets/js/464.95036073.js"><link rel="prefetch" href="/record/assets/js/465.b27d4fa5.js"><link rel="prefetch" href="/record/assets/js/466.a0247d26.js"><link rel="prefetch" href="/record/assets/js/467.ebd223ed.js"><link rel="prefetch" href="/record/assets/js/468.c697b611.js"><link rel="prefetch" href="/record/assets/js/469.3e85a3b4.js"><link rel="prefetch" href="/record/assets/js/47.2aa7d948.js"><link rel="prefetch" href="/record/assets/js/470.5d71923e.js"><link rel="prefetch" href="/record/assets/js/471.f084d3f3.js"><link rel="prefetch" href="/record/assets/js/472.98575541.js"><link rel="prefetch" href="/record/assets/js/473.f6b55c0c.js"><link rel="prefetch" href="/record/assets/js/474.5a4fb0c3.js"><link rel="prefetch" href="/record/assets/js/475.4d6f1590.js"><link rel="prefetch" href="/record/assets/js/476.12caef5c.js"><link rel="prefetch" href="/record/assets/js/477.ff88c4da.js"><link rel="prefetch" href="/record/assets/js/478.2dfac3ca.js"><link rel="prefetch" href="/record/assets/js/479.19458def.js"><link rel="prefetch" href="/record/assets/js/48.2454fdc0.js"><link rel="prefetch" href="/record/assets/js/480.53992965.js"><link rel="prefetch" href="/record/assets/js/481.41f6462a.js"><link rel="prefetch" href="/record/assets/js/482.64a60786.js"><link rel="prefetch" href="/record/assets/js/483.b2867727.js"><link rel="prefetch" href="/record/assets/js/484.792ceeee.js"><link rel="prefetch" href="/record/assets/js/485.c3b9a562.js"><link rel="prefetch" href="/record/assets/js/486.13aac49e.js"><link rel="prefetch" href="/record/assets/js/487.bd8952bd.js"><link rel="prefetch" href="/record/assets/js/488.e95ce373.js"><link rel="prefetch" href="/record/assets/js/489.b32259a5.js"><link rel="prefetch" href="/record/assets/js/49.6e1b9e9b.js"><link rel="prefetch" href="/record/assets/js/490.7195a09d.js"><link rel="prefetch" href="/record/assets/js/491.2213d4ba.js"><link rel="prefetch" href="/record/assets/js/492.61838452.js"><link rel="prefetch" href="/record/assets/js/493.ec1d5170.js"><link rel="prefetch" href="/record/assets/js/494.33ebb6ca.js"><link rel="prefetch" href="/record/assets/js/495.79fb0a0a.js"><link rel="prefetch" href="/record/assets/js/496.e76689c6.js"><link rel="prefetch" href="/record/assets/js/497.79563bad.js"><link rel="prefetch" href="/record/assets/js/498.73770c26.js"><link rel="prefetch" href="/record/assets/js/499.20a0fd7c.js"><link rel="prefetch" href="/record/assets/js/50.65d83733.js"><link rel="prefetch" href="/record/assets/js/500.5ca4c151.js"><link rel="prefetch" href="/record/assets/js/501.b81afb44.js"><link rel="prefetch" href="/record/assets/js/502.89566cb3.js"><link rel="prefetch" href="/record/assets/js/503.e107650b.js"><link rel="prefetch" href="/record/assets/js/504.0108159f.js"><link rel="prefetch" href="/record/assets/js/505.f1fd201d.js"><link rel="prefetch" href="/record/assets/js/506.b3f83e6c.js"><link rel="prefetch" href="/record/assets/js/507.48478e4c.js"><link rel="prefetch" href="/record/assets/js/508.47c14190.js"><link rel="prefetch" href="/record/assets/js/509.f406a87a.js"><link rel="prefetch" href="/record/assets/js/51.33a27a00.js"><link rel="prefetch" href="/record/assets/js/510.41223657.js"><link rel="prefetch" href="/record/assets/js/511.283c8b94.js"><link rel="prefetch" href="/record/assets/js/512.0de434ca.js"><link rel="prefetch" href="/record/assets/js/513.97140f4f.js"><link rel="prefetch" href="/record/assets/js/514.b36986c8.js"><link rel="prefetch" href="/record/assets/js/515.a2210923.js"><link rel="prefetch" href="/record/assets/js/516.edfd4ae9.js"><link rel="prefetch" href="/record/assets/js/517.345823f3.js"><link rel="prefetch" href="/record/assets/js/518.f27f27be.js"><link rel="prefetch" href="/record/assets/js/52.c9f03fd2.js"><link rel="prefetch" href="/record/assets/js/520.e3281f30.js"><link rel="prefetch" href="/record/assets/js/521.98a372ce.js"><link rel="prefetch" href="/record/assets/js/522.c0e3f0ee.js"><link rel="prefetch" href="/record/assets/js/523.6b1e1064.js"><link rel="prefetch" href="/record/assets/js/524.57323ac8.js"><link rel="prefetch" href="/record/assets/js/525.76808b7d.js"><link rel="prefetch" href="/record/assets/js/526.11cfb5ab.js"><link rel="prefetch" href="/record/assets/js/527.c36d0a3f.js"><link rel="prefetch" href="/record/assets/js/528.40c8ae0c.js"><link rel="prefetch" href="/record/assets/js/529.76cd4fc0.js"><link rel="prefetch" href="/record/assets/js/53.828f4a9b.js"><link rel="prefetch" href="/record/assets/js/530.d8987236.js"><link rel="prefetch" href="/record/assets/js/531.86ccf98c.js"><link rel="prefetch" href="/record/assets/js/532.66004fce.js"><link rel="prefetch" href="/record/assets/js/533.b5d53811.js"><link rel="prefetch" href="/record/assets/js/534.facd8405.js"><link rel="prefetch" href="/record/assets/js/535.122c5671.js"><link rel="prefetch" href="/record/assets/js/536.fe4fdaa6.js"><link rel="prefetch" href="/record/assets/js/537.4e433246.js"><link rel="prefetch" href="/record/assets/js/538.288c6973.js"><link rel="prefetch" href="/record/assets/js/539.b7ba9426.js"><link rel="prefetch" href="/record/assets/js/54.85b41edf.js"><link rel="prefetch" href="/record/assets/js/540.25e012c6.js"><link rel="prefetch" href="/record/assets/js/541.fec7f946.js"><link rel="prefetch" href="/record/assets/js/542.fe031590.js"><link rel="prefetch" href="/record/assets/js/543.cc6f8809.js"><link rel="prefetch" href="/record/assets/js/544.7e0df06e.js"><link rel="prefetch" href="/record/assets/js/545.ed712fe6.js"><link rel="prefetch" href="/record/assets/js/546.de557795.js"><link rel="prefetch" href="/record/assets/js/547.45b1c49f.js"><link rel="prefetch" href="/record/assets/js/548.cbf9d0d5.js"><link rel="prefetch" href="/record/assets/js/549.e5cc213a.js"><link rel="prefetch" href="/record/assets/js/55.9d60c3ee.js"><link rel="prefetch" href="/record/assets/js/550.8570ae4f.js"><link rel="prefetch" href="/record/assets/js/551.63c2a394.js"><link rel="prefetch" href="/record/assets/js/552.6bfae8a1.js"><link rel="prefetch" href="/record/assets/js/553.a26cf23f.js"><link rel="prefetch" href="/record/assets/js/554.84b1685d.js"><link rel="prefetch" href="/record/assets/js/555.59be1bbd.js"><link rel="prefetch" href="/record/assets/js/556.131fea71.js"><link rel="prefetch" href="/record/assets/js/557.2f0cd02d.js"><link rel="prefetch" href="/record/assets/js/558.48a6834d.js"><link rel="prefetch" href="/record/assets/js/559.6c26347b.js"><link rel="prefetch" href="/record/assets/js/56.66ebfcba.js"><link rel="prefetch" href="/record/assets/js/560.02eac24e.js"><link rel="prefetch" href="/record/assets/js/561.36d98e1f.js"><link rel="prefetch" href="/record/assets/js/562.65581fa4.js"><link rel="prefetch" href="/record/assets/js/563.c98c5cb2.js"><link rel="prefetch" href="/record/assets/js/564.0dcc8b3b.js"><link rel="prefetch" href="/record/assets/js/565.e2adaf31.js"><link rel="prefetch" href="/record/assets/js/566.cd054f0a.js"><link rel="prefetch" href="/record/assets/js/567.460c064f.js"><link rel="prefetch" href="/record/assets/js/568.2c4086da.js"><link rel="prefetch" href="/record/assets/js/569.c35f4c32.js"><link rel="prefetch" href="/record/assets/js/57.2a53015a.js"><link rel="prefetch" href="/record/assets/js/570.7c50098f.js"><link rel="prefetch" href="/record/assets/js/571.974a3469.js"><link rel="prefetch" href="/record/assets/js/572.472e6da8.js"><link rel="prefetch" href="/record/assets/js/573.23cd0fb1.js"><link rel="prefetch" href="/record/assets/js/574.14de9a63.js"><link rel="prefetch" href="/record/assets/js/575.5bc1027e.js"><link rel="prefetch" href="/record/assets/js/576.29c53b9e.js"><link rel="prefetch" href="/record/assets/js/577.7a2cab8c.js"><link rel="prefetch" href="/record/assets/js/578.f65ff19c.js"><link rel="prefetch" href="/record/assets/js/579.597363d4.js"><link rel="prefetch" href="/record/assets/js/58.4737740f.js"><link rel="prefetch" href="/record/assets/js/580.4ab66f65.js"><link rel="prefetch" href="/record/assets/js/581.346a4b1b.js"><link rel="prefetch" href="/record/assets/js/582.27964d8b.js"><link rel="prefetch" href="/record/assets/js/583.a772cce6.js"><link rel="prefetch" href="/record/assets/js/584.03c115bc.js"><link rel="prefetch" href="/record/assets/js/585.e3e97139.js"><link rel="prefetch" href="/record/assets/js/586.5d409556.js"><link rel="prefetch" href="/record/assets/js/587.2b47c2b1.js"><link rel="prefetch" href="/record/assets/js/588.514b8f76.js"><link rel="prefetch" href="/record/assets/js/589.c2ebb9d5.js"><link rel="prefetch" href="/record/assets/js/59.58b70b39.js"><link rel="prefetch" href="/record/assets/js/590.260f04b9.js"><link rel="prefetch" href="/record/assets/js/591.5a1de88b.js"><link rel="prefetch" href="/record/assets/js/592.8afdaf79.js"><link rel="prefetch" href="/record/assets/js/593.7b29b175.js"><link rel="prefetch" href="/record/assets/js/594.afec5f22.js"><link rel="prefetch" href="/record/assets/js/595.683ba1ae.js"><link rel="prefetch" href="/record/assets/js/596.8d22cd18.js"><link rel="prefetch" href="/record/assets/js/597.c1a6f149.js"><link rel="prefetch" href="/record/assets/js/598.3db11dbd.js"><link rel="prefetch" href="/record/assets/js/599.77dd260a.js"><link rel="prefetch" href="/record/assets/js/6.68a4fad5.js"><link rel="prefetch" href="/record/assets/js/60.0c13cb6b.js"><link rel="prefetch" href="/record/assets/js/600.0867785f.js"><link rel="prefetch" href="/record/assets/js/601.daf18bfb.js"><link rel="prefetch" href="/record/assets/js/602.c62a375c.js"><link rel="prefetch" href="/record/assets/js/603.367ded4c.js"><link rel="prefetch" href="/record/assets/js/604.69d1ccb0.js"><link rel="prefetch" href="/record/assets/js/605.7a7e3d51.js"><link rel="prefetch" href="/record/assets/js/606.72611ee6.js"><link rel="prefetch" href="/record/assets/js/607.df4fca50.js"><link rel="prefetch" href="/record/assets/js/608.cecad84b.js"><link rel="prefetch" href="/record/assets/js/609.ed6b85ad.js"><link rel="prefetch" href="/record/assets/js/61.ad47283c.js"><link rel="prefetch" href="/record/assets/js/610.2f5e8e88.js"><link rel="prefetch" href="/record/assets/js/611.e93b5690.js"><link rel="prefetch" href="/record/assets/js/612.c96f3172.js"><link rel="prefetch" href="/record/assets/js/613.261b2a5d.js"><link rel="prefetch" href="/record/assets/js/614.d583ea89.js"><link rel="prefetch" href="/record/assets/js/615.0362b865.js"><link rel="prefetch" href="/record/assets/js/616.233a007d.js"><link rel="prefetch" href="/record/assets/js/617.755e3a21.js"><link rel="prefetch" href="/record/assets/js/618.2059064e.js"><link rel="prefetch" href="/record/assets/js/619.4cba1b8d.js"><link rel="prefetch" href="/record/assets/js/62.80eff078.js"><link rel="prefetch" href="/record/assets/js/620.baddf980.js"><link rel="prefetch" href="/record/assets/js/621.df50054e.js"><link rel="prefetch" href="/record/assets/js/622.0f17d3e2.js"><link rel="prefetch" href="/record/assets/js/623.3989ab3a.js"><link rel="prefetch" href="/record/assets/js/624.2975bbd0.js"><link rel="prefetch" href="/record/assets/js/625.11754027.js"><link rel="prefetch" href="/record/assets/js/626.fc575ef7.js"><link rel="prefetch" href="/record/assets/js/627.a30d10c9.js"><link rel="prefetch" href="/record/assets/js/628.f580d738.js"><link rel="prefetch" href="/record/assets/js/629.bc0a0632.js"><link rel="prefetch" href="/record/assets/js/63.55ca0057.js"><link rel="prefetch" href="/record/assets/js/630.8c58e75e.js"><link rel="prefetch" href="/record/assets/js/631.cd33f026.js"><link rel="prefetch" href="/record/assets/js/632.fbdf335f.js"><link rel="prefetch" href="/record/assets/js/633.0b78e5cf.js"><link rel="prefetch" href="/record/assets/js/634.a9dcd1e2.js"><link rel="prefetch" href="/record/assets/js/635.9ca28724.js"><link rel="prefetch" href="/record/assets/js/636.ff8af63f.js"><link rel="prefetch" href="/record/assets/js/637.98dcdd27.js"><link rel="prefetch" href="/record/assets/js/638.988fce97.js"><link rel="prefetch" href="/record/assets/js/639.201df997.js"><link rel="prefetch" href="/record/assets/js/64.3c7cc6ac.js"><link rel="prefetch" href="/record/assets/js/640.440986a3.js"><link rel="prefetch" href="/record/assets/js/641.500bb3e9.js"><link rel="prefetch" href="/record/assets/js/642.fa574047.js"><link rel="prefetch" href="/record/assets/js/643.df0f43e9.js"><link rel="prefetch" href="/record/assets/js/644.ecb69bc8.js"><link rel="prefetch" href="/record/assets/js/645.006a4ae0.js"><link rel="prefetch" href="/record/assets/js/646.e1fc149f.js"><link rel="prefetch" href="/record/assets/js/647.5e9ee120.js"><link rel="prefetch" href="/record/assets/js/648.e7ee9ad8.js"><link rel="prefetch" href="/record/assets/js/649.6b8215f4.js"><link rel="prefetch" href="/record/assets/js/65.c369190f.js"><link rel="prefetch" href="/record/assets/js/650.063587c8.js"><link rel="prefetch" href="/record/assets/js/651.994d9d14.js"><link rel="prefetch" href="/record/assets/js/652.20ff4afc.js"><link rel="prefetch" href="/record/assets/js/653.35b6db17.js"><link rel="prefetch" href="/record/assets/js/654.60833e8d.js"><link rel="prefetch" href="/record/assets/js/655.e8905e6a.js"><link rel="prefetch" href="/record/assets/js/656.5794c096.js"><link rel="prefetch" href="/record/assets/js/657.4a3216f9.js"><link rel="prefetch" href="/record/assets/js/658.52ae6261.js"><link rel="prefetch" href="/record/assets/js/659.0a6c791d.js"><link rel="prefetch" href="/record/assets/js/66.2348751f.js"><link rel="prefetch" href="/record/assets/js/660.c1a60d31.js"><link rel="prefetch" href="/record/assets/js/661.5acbac04.js"><link rel="prefetch" href="/record/assets/js/662.32af37c5.js"><link rel="prefetch" href="/record/assets/js/663.ee20f548.js"><link rel="prefetch" href="/record/assets/js/664.9721aa84.js"><link rel="prefetch" href="/record/assets/js/665.e998b7aa.js"><link rel="prefetch" href="/record/assets/js/666.0a137201.js"><link rel="prefetch" href="/record/assets/js/667.b9a87923.js"><link rel="prefetch" href="/record/assets/js/668.4192e76e.js"><link rel="prefetch" href="/record/assets/js/669.4568e2df.js"><link rel="prefetch" href="/record/assets/js/67.c0df52c9.js"><link rel="prefetch" href="/record/assets/js/670.127f5e90.js"><link rel="prefetch" href="/record/assets/js/671.9c6564d3.js"><link rel="prefetch" href="/record/assets/js/672.01e29046.js"><link rel="prefetch" href="/record/assets/js/673.2a1cc479.js"><link rel="prefetch" href="/record/assets/js/674.ca15a7f4.js"><link rel="prefetch" href="/record/assets/js/675.ec2758b1.js"><link rel="prefetch" href="/record/assets/js/676.0a0ab380.js"><link rel="prefetch" href="/record/assets/js/677.468cf8fd.js"><link rel="prefetch" href="/record/assets/js/678.128f2cce.js"><link rel="prefetch" href="/record/assets/js/679.740736c2.js"><link rel="prefetch" href="/record/assets/js/68.7ce90ec7.js"><link rel="prefetch" href="/record/assets/js/680.6d8ec945.js"><link rel="prefetch" href="/record/assets/js/681.4f3b4bec.js"><link rel="prefetch" href="/record/assets/js/682.553f01d1.js"><link rel="prefetch" href="/record/assets/js/683.e51a9567.js"><link rel="prefetch" href="/record/assets/js/684.e6487c6f.js"><link rel="prefetch" href="/record/assets/js/685.0a9d821c.js"><link rel="prefetch" href="/record/assets/js/686.88e3d0c4.js"><link rel="prefetch" href="/record/assets/js/687.917a9fcb.js"><link rel="prefetch" href="/record/assets/js/688.8a63bb98.js"><link rel="prefetch" href="/record/assets/js/689.20ef9d4d.js"><link rel="prefetch" href="/record/assets/js/69.6f2a9cd7.js"><link rel="prefetch" href="/record/assets/js/690.5b0fa45f.js"><link rel="prefetch" href="/record/assets/js/691.7b5a8e28.js"><link rel="prefetch" href="/record/assets/js/692.6c8e1601.js"><link rel="prefetch" href="/record/assets/js/693.57f23f31.js"><link rel="prefetch" href="/record/assets/js/694.7b2ef73c.js"><link rel="prefetch" href="/record/assets/js/695.98a23bbe.js"><link rel="prefetch" href="/record/assets/js/696.0686b689.js"><link rel="prefetch" href="/record/assets/js/697.7ba0afa3.js"><link rel="prefetch" href="/record/assets/js/698.0168eff6.js"><link rel="prefetch" href="/record/assets/js/699.3d0f175e.js"><link rel="prefetch" href="/record/assets/js/7.d1422b53.js"><link rel="prefetch" href="/record/assets/js/70.e3530170.js"><link rel="prefetch" href="/record/assets/js/700.203d59a0.js"><link rel="prefetch" href="/record/assets/js/701.9ebabb93.js"><link rel="prefetch" href="/record/assets/js/702.209dd902.js"><link rel="prefetch" href="/record/assets/js/703.e169874f.js"><link rel="prefetch" href="/record/assets/js/704.6b5eeca7.js"><link rel="prefetch" href="/record/assets/js/705.3d9a4213.js"><link rel="prefetch" href="/record/assets/js/706.d2b73116.js"><link rel="prefetch" href="/record/assets/js/707.8573d1be.js"><link rel="prefetch" href="/record/assets/js/708.e78f1494.js"><link rel="prefetch" href="/record/assets/js/709.fd7b71e0.js"><link rel="prefetch" href="/record/assets/js/71.b6b2b43b.js"><link rel="prefetch" href="/record/assets/js/710.8adfbfb9.js"><link rel="prefetch" href="/record/assets/js/711.62bb8b55.js"><link rel="prefetch" href="/record/assets/js/712.012f7bb2.js"><link rel="prefetch" href="/record/assets/js/713.b55991f0.js"><link rel="prefetch" href="/record/assets/js/714.56ecdd50.js"><link rel="prefetch" href="/record/assets/js/715.51dedbe6.js"><link rel="prefetch" href="/record/assets/js/716.c85e399d.js"><link rel="prefetch" href="/record/assets/js/717.358ff7ea.js"><link rel="prefetch" href="/record/assets/js/718.cfa5cb1d.js"><link rel="prefetch" href="/record/assets/js/719.00a52c90.js"><link rel="prefetch" href="/record/assets/js/72.12626a3e.js"><link rel="prefetch" href="/record/assets/js/720.ee550f14.js"><link rel="prefetch" href="/record/assets/js/721.8961b97b.js"><link rel="prefetch" href="/record/assets/js/722.961b6ad3.js"><link rel="prefetch" href="/record/assets/js/723.17bff2d5.js"><link rel="prefetch" href="/record/assets/js/724.7f0b96a1.js"><link rel="prefetch" href="/record/assets/js/725.a2063df9.js"><link rel="prefetch" href="/record/assets/js/726.011f6f74.js"><link rel="prefetch" href="/record/assets/js/727.c184721a.js"><link rel="prefetch" href="/record/assets/js/728.9da1e130.js"><link rel="prefetch" href="/record/assets/js/729.462c455b.js"><link rel="prefetch" href="/record/assets/js/73.2acf4667.js"><link rel="prefetch" href="/record/assets/js/730.6c14cfac.js"><link rel="prefetch" href="/record/assets/js/731.2b8fb399.js"><link rel="prefetch" href="/record/assets/js/732.7376bfe5.js"><link rel="prefetch" href="/record/assets/js/733.10dac317.js"><link rel="prefetch" href="/record/assets/js/734.bf1ae21c.js"><link rel="prefetch" href="/record/assets/js/735.3743e866.js"><link rel="prefetch" href="/record/assets/js/736.bb12cf78.js"><link rel="prefetch" href="/record/assets/js/737.cbe4f92f.js"><link rel="prefetch" href="/record/assets/js/738.6980317e.js"><link rel="prefetch" href="/record/assets/js/739.35b98f9d.js"><link rel="prefetch" href="/record/assets/js/74.f97c5ad2.js"><link rel="prefetch" href="/record/assets/js/740.30715f43.js"><link rel="prefetch" href="/record/assets/js/741.e3f29d77.js"><link rel="prefetch" href="/record/assets/js/742.7816af43.js"><link rel="prefetch" href="/record/assets/js/743.2ae44586.js"><link rel="prefetch" href="/record/assets/js/744.8ccd149b.js"><link rel="prefetch" href="/record/assets/js/745.60cffed8.js"><link rel="prefetch" href="/record/assets/js/746.15a8288a.js"><link rel="prefetch" href="/record/assets/js/747.af40cf93.js"><link rel="prefetch" href="/record/assets/js/748.44940f36.js"><link rel="prefetch" href="/record/assets/js/749.3d3618b6.js"><link rel="prefetch" href="/record/assets/js/75.7e745984.js"><link rel="prefetch" href="/record/assets/js/750.62614f7a.js"><link rel="prefetch" href="/record/assets/js/751.19593ed1.js"><link rel="prefetch" href="/record/assets/js/752.7b6c020d.js"><link rel="prefetch" href="/record/assets/js/753.971df9e2.js"><link rel="prefetch" href="/record/assets/js/754.be7620d5.js"><link rel="prefetch" href="/record/assets/js/755.30071bd7.js"><link rel="prefetch" href="/record/assets/js/756.07426e26.js"><link rel="prefetch" href="/record/assets/js/757.e4c1e469.js"><link rel="prefetch" href="/record/assets/js/758.e0806fb0.js"><link rel="prefetch" href="/record/assets/js/759.e216ab22.js"><link rel="prefetch" href="/record/assets/js/76.79b9805c.js"><link rel="prefetch" href="/record/assets/js/760.dee41228.js"><link rel="prefetch" href="/record/assets/js/761.84db804f.js"><link rel="prefetch" href="/record/assets/js/762.e94eb365.js"><link rel="prefetch" href="/record/assets/js/763.cf6398f8.js"><link rel="prefetch" href="/record/assets/js/764.85f44902.js"><link rel="prefetch" href="/record/assets/js/765.ba14f4fa.js"><link rel="prefetch" href="/record/assets/js/766.1cff9022.js"><link rel="prefetch" href="/record/assets/js/767.d2da209f.js"><link rel="prefetch" href="/record/assets/js/768.38be2dd2.js"><link rel="prefetch" href="/record/assets/js/769.b7ca5dbf.js"><link rel="prefetch" href="/record/assets/js/77.8373421b.js"><link rel="prefetch" href="/record/assets/js/770.594c0bce.js"><link rel="prefetch" href="/record/assets/js/771.dd8b1e89.js"><link rel="prefetch" href="/record/assets/js/772.774714b9.js"><link rel="prefetch" href="/record/assets/js/773.10d362f5.js"><link rel="prefetch" href="/record/assets/js/774.99358d14.js"><link rel="prefetch" href="/record/assets/js/775.7b4f5492.js"><link rel="prefetch" href="/record/assets/js/776.febfae9b.js"><link rel="prefetch" href="/record/assets/js/777.6a928fa8.js"><link rel="prefetch" href="/record/assets/js/778.a6b21adc.js"><link rel="prefetch" href="/record/assets/js/779.8a1c4af7.js"><link rel="prefetch" href="/record/assets/js/78.ff15740a.js"><link rel="prefetch" href="/record/assets/js/780.6a073fea.js"><link rel="prefetch" href="/record/assets/js/781.952bbe1a.js"><link rel="prefetch" href="/record/assets/js/782.77684be9.js"><link rel="prefetch" href="/record/assets/js/783.8e014662.js"><link rel="prefetch" href="/record/assets/js/784.31f4e5b1.js"><link rel="prefetch" href="/record/assets/js/785.141b26f1.js"><link rel="prefetch" href="/record/assets/js/786.cf03bf67.js"><link rel="prefetch" href="/record/assets/js/787.fb0f6141.js"><link rel="prefetch" href="/record/assets/js/788.cd4a0f85.js"><link rel="prefetch" href="/record/assets/js/789.657e6d07.js"><link rel="prefetch" href="/record/assets/js/79.0738362d.js"><link rel="prefetch" href="/record/assets/js/790.11e1d0d7.js"><link rel="prefetch" href="/record/assets/js/791.4222c59b.js"><link rel="prefetch" href="/record/assets/js/792.2443c8a2.js"><link rel="prefetch" href="/record/assets/js/793.1ff53625.js"><link rel="prefetch" href="/record/assets/js/794.1c9e7ff9.js"><link rel="prefetch" href="/record/assets/js/795.66da3957.js"><link rel="prefetch" href="/record/assets/js/796.34e7094a.js"><link rel="prefetch" href="/record/assets/js/797.c2164e1d.js"><link rel="prefetch" href="/record/assets/js/798.321873cc.js"><link rel="prefetch" href="/record/assets/js/799.1abefe08.js"><link rel="prefetch" href="/record/assets/js/8.7347f746.js"><link rel="prefetch" href="/record/assets/js/80.e578f917.js"><link rel="prefetch" href="/record/assets/js/800.5c0f8715.js"><link rel="prefetch" href="/record/assets/js/801.74aa3915.js"><link rel="prefetch" href="/record/assets/js/802.934e3b8d.js"><link rel="prefetch" href="/record/assets/js/803.5bdec9ae.js"><link rel="prefetch" href="/record/assets/js/804.f28ac4b9.js"><link rel="prefetch" href="/record/assets/js/805.fd556604.js"><link rel="prefetch" href="/record/assets/js/806.69b3af6f.js"><link rel="prefetch" href="/record/assets/js/807.8eff37ad.js"><link rel="prefetch" href="/record/assets/js/808.0e71c572.js"><link rel="prefetch" href="/record/assets/js/809.227f1b16.js"><link rel="prefetch" href="/record/assets/js/81.f983e2b3.js"><link rel="prefetch" href="/record/assets/js/810.9e3386e9.js"><link rel="prefetch" href="/record/assets/js/811.8175e776.js"><link rel="prefetch" href="/record/assets/js/812.95be92fa.js"><link rel="prefetch" href="/record/assets/js/813.89b94fac.js"><link rel="prefetch" href="/record/assets/js/814.7d335c6a.js"><link rel="prefetch" href="/record/assets/js/815.42605a44.js"><link rel="prefetch" href="/record/assets/js/816.227d866c.js"><link rel="prefetch" href="/record/assets/js/817.8897077a.js"><link rel="prefetch" href="/record/assets/js/818.27d88273.js"><link rel="prefetch" href="/record/assets/js/819.e7d8d06b.js"><link rel="prefetch" href="/record/assets/js/82.24ec3997.js"><link rel="prefetch" href="/record/assets/js/820.3e1d47e7.js"><link rel="prefetch" href="/record/assets/js/821.f8618de5.js"><link rel="prefetch" href="/record/assets/js/822.ef4b7495.js"><link rel="prefetch" href="/record/assets/js/823.2a17e79f.js"><link rel="prefetch" href="/record/assets/js/824.34378df8.js"><link rel="prefetch" href="/record/assets/js/825.a7c49fcf.js"><link rel="prefetch" href="/record/assets/js/826.131d5ec5.js"><link rel="prefetch" href="/record/assets/js/827.7e407e96.js"><link rel="prefetch" href="/record/assets/js/828.31df3cd1.js"><link rel="prefetch" href="/record/assets/js/829.017c0ff4.js"><link rel="prefetch" href="/record/assets/js/83.c453f524.js"><link rel="prefetch" href="/record/assets/js/830.7e47d1b0.js"><link rel="prefetch" href="/record/assets/js/831.8e50d16c.js"><link rel="prefetch" href="/record/assets/js/832.350dc28e.js"><link rel="prefetch" href="/record/assets/js/833.d2571dd0.js"><link rel="prefetch" href="/record/assets/js/834.1879380a.js"><link rel="prefetch" href="/record/assets/js/835.60546596.js"><link rel="prefetch" href="/record/assets/js/836.0eacb6e2.js"><link rel="prefetch" href="/record/assets/js/837.8b166aae.js"><link rel="prefetch" href="/record/assets/js/838.df642306.js"><link rel="prefetch" href="/record/assets/js/839.96e65be9.js"><link rel="prefetch" href="/record/assets/js/84.56de9889.js"><link rel="prefetch" href="/record/assets/js/840.56a63211.js"><link rel="prefetch" href="/record/assets/js/841.c0e2034b.js"><link rel="prefetch" href="/record/assets/js/842.beb5bc98.js"><link rel="prefetch" href="/record/assets/js/843.a8e09677.js"><link rel="prefetch" href="/record/assets/js/844.5e4c2a32.js"><link rel="prefetch" href="/record/assets/js/845.c985e2a8.js"><link rel="prefetch" href="/record/assets/js/846.b9f78d64.js"><link rel="prefetch" href="/record/assets/js/847.548c2251.js"><link rel="prefetch" href="/record/assets/js/848.c4528de0.js"><link rel="prefetch" href="/record/assets/js/849.58631c19.js"><link rel="prefetch" href="/record/assets/js/85.a9854dab.js"><link rel="prefetch" href="/record/assets/js/850.1a2b03ab.js"><link rel="prefetch" href="/record/assets/js/851.d23a0ed1.js"><link rel="prefetch" href="/record/assets/js/852.1d5812a5.js"><link rel="prefetch" href="/record/assets/js/853.6f50d462.js"><link rel="prefetch" href="/record/assets/js/854.ef677ad7.js"><link rel="prefetch" href="/record/assets/js/855.2fab1b8f.js"><link rel="prefetch" href="/record/assets/js/856.40d6b3b7.js"><link rel="prefetch" href="/record/assets/js/857.c0ec9239.js"><link rel="prefetch" href="/record/assets/js/858.7aff369d.js"><link rel="prefetch" href="/record/assets/js/859.add4c03f.js"><link rel="prefetch" href="/record/assets/js/86.5385b48c.js"><link rel="prefetch" href="/record/assets/js/860.ce7a4b76.js"><link rel="prefetch" href="/record/assets/js/861.5db8ae3f.js"><link rel="prefetch" href="/record/assets/js/862.e37d3ba5.js"><link rel="prefetch" href="/record/assets/js/863.2b0462ea.js"><link rel="prefetch" href="/record/assets/js/864.0d4e4b08.js"><link rel="prefetch" href="/record/assets/js/865.56d9df09.js"><link rel="prefetch" href="/record/assets/js/866.07444b69.js"><link rel="prefetch" href="/record/assets/js/867.5b62e6bc.js"><link rel="prefetch" href="/record/assets/js/868.b10a8516.js"><link rel="prefetch" href="/record/assets/js/869.2fdae5a7.js"><link rel="prefetch" href="/record/assets/js/87.ca8c0499.js"><link rel="prefetch" href="/record/assets/js/870.5881d693.js"><link rel="prefetch" href="/record/assets/js/871.0e8e6282.js"><link rel="prefetch" href="/record/assets/js/872.df3f518e.js"><link rel="prefetch" href="/record/assets/js/873.6fac2c48.js"><link rel="prefetch" href="/record/assets/js/874.78005f94.js"><link rel="prefetch" href="/record/assets/js/875.0518b0e5.js"><link rel="prefetch" href="/record/assets/js/876.acb5752f.js"><link rel="prefetch" href="/record/assets/js/877.ce014d02.js"><link rel="prefetch" href="/record/assets/js/878.c1ee0fbb.js"><link rel="prefetch" href="/record/assets/js/879.320a0e74.js"><link rel="prefetch" href="/record/assets/js/88.d1be30ec.js"><link rel="prefetch" href="/record/assets/js/880.9a93a8e9.js"><link rel="prefetch" href="/record/assets/js/881.50a3ce06.js"><link rel="prefetch" href="/record/assets/js/882.197f936f.js"><link rel="prefetch" href="/record/assets/js/883.9763d158.js"><link rel="prefetch" href="/record/assets/js/884.8a59f61d.js"><link rel="prefetch" href="/record/assets/js/885.785197ac.js"><link rel="prefetch" href="/record/assets/js/886.0731acad.js"><link rel="prefetch" href="/record/assets/js/887.e70e9f6c.js"><link rel="prefetch" href="/record/assets/js/888.414a9221.js"><link rel="prefetch" href="/record/assets/js/889.6a318198.js"><link rel="prefetch" href="/record/assets/js/89.64b0ef7e.js"><link rel="prefetch" href="/record/assets/js/890.68373df9.js"><link rel="prefetch" href="/record/assets/js/891.533706a9.js"><link rel="prefetch" href="/record/assets/js/892.2efde888.js"><link rel="prefetch" href="/record/assets/js/893.32070e68.js"><link rel="prefetch" href="/record/assets/js/894.30038b74.js"><link rel="prefetch" href="/record/assets/js/895.c045bade.js"><link rel="prefetch" href="/record/assets/js/896.b56fd350.js"><link rel="prefetch" href="/record/assets/js/897.a271ab56.js"><link rel="prefetch" href="/record/assets/js/898.70620275.js"><link rel="prefetch" href="/record/assets/js/899.a2848490.js"><link rel="prefetch" href="/record/assets/js/9.386fe4d6.js"><link rel="prefetch" href="/record/assets/js/90.c7f53dfa.js"><link rel="prefetch" href="/record/assets/js/900.f1905002.js"><link rel="prefetch" href="/record/assets/js/901.7955d021.js"><link rel="prefetch" href="/record/assets/js/902.e43413e1.js"><link rel="prefetch" href="/record/assets/js/903.c953a224.js"><link rel="prefetch" href="/record/assets/js/904.ba760b04.js"><link rel="prefetch" href="/record/assets/js/905.39140dd2.js"><link rel="prefetch" href="/record/assets/js/906.d1d3bf16.js"><link rel="prefetch" href="/record/assets/js/907.b9377364.js"><link rel="prefetch" href="/record/assets/js/908.30346af5.js"><link rel="prefetch" href="/record/assets/js/909.37bf2025.js"><link rel="prefetch" href="/record/assets/js/91.70ce029e.js"><link rel="prefetch" href="/record/assets/js/910.45e87140.js"><link rel="prefetch" href="/record/assets/js/911.9145f6fe.js"><link rel="prefetch" href="/record/assets/js/912.6d8f70e2.js"><link rel="prefetch" href="/record/assets/js/913.5d4bd67f.js"><link rel="prefetch" href="/record/assets/js/914.e8bac23c.js"><link rel="prefetch" href="/record/assets/js/915.dfe96a53.js"><link rel="prefetch" href="/record/assets/js/916.b4222d78.js"><link rel="prefetch" href="/record/assets/js/917.d2ddc9a3.js"><link rel="prefetch" href="/record/assets/js/918.0df5d56d.js"><link rel="prefetch" href="/record/assets/js/919.c39c8dbd.js"><link rel="prefetch" href="/record/assets/js/92.d414e22b.js"><link rel="prefetch" href="/record/assets/js/920.cafcbc12.js"><link rel="prefetch" href="/record/assets/js/921.0ec550ac.js"><link rel="prefetch" href="/record/assets/js/922.c5641571.js"><link rel="prefetch" href="/record/assets/js/923.8c9dbcd6.js"><link rel="prefetch" href="/record/assets/js/924.195ab0ea.js"><link rel="prefetch" href="/record/assets/js/925.ade5ed6d.js"><link rel="prefetch" href="/record/assets/js/926.c48648ee.js"><link rel="prefetch" href="/record/assets/js/927.d0478d03.js"><link rel="prefetch" href="/record/assets/js/928.8465feb4.js"><link rel="prefetch" href="/record/assets/js/929.b56f268a.js"><link rel="prefetch" href="/record/assets/js/93.93580ad0.js"><link rel="prefetch" href="/record/assets/js/930.07cbc683.js"><link rel="prefetch" href="/record/assets/js/931.ed943423.js"><link rel="prefetch" href="/record/assets/js/932.ebb54556.js"><link rel="prefetch" href="/record/assets/js/933.d5765528.js"><link rel="prefetch" href="/record/assets/js/934.bdee04bb.js"><link rel="prefetch" href="/record/assets/js/935.2f0ee3df.js"><link rel="prefetch" href="/record/assets/js/936.b6db959f.js"><link rel="prefetch" href="/record/assets/js/937.227f5549.js"><link rel="prefetch" href="/record/assets/js/938.6aaa32ca.js"><link rel="prefetch" href="/record/assets/js/939.c1ad4ea9.js"><link rel="prefetch" href="/record/assets/js/94.a0738a48.js"><link rel="prefetch" href="/record/assets/js/940.541de53a.js"><link rel="prefetch" href="/record/assets/js/941.cd793ba8.js"><link rel="prefetch" href="/record/assets/js/942.7532dc45.js"><link rel="prefetch" href="/record/assets/js/943.38559870.js"><link rel="prefetch" href="/record/assets/js/944.16dc3c43.js"><link rel="prefetch" href="/record/assets/js/945.5e07b835.js"><link rel="prefetch" href="/record/assets/js/946.68c0182d.js"><link rel="prefetch" href="/record/assets/js/947.d1fb52ed.js"><link rel="prefetch" href="/record/assets/js/948.e6c7c3e3.js"><link rel="prefetch" href="/record/assets/js/949.02618dfe.js"><link rel="prefetch" href="/record/assets/js/95.3403b601.js"><link rel="prefetch" href="/record/assets/js/950.3ab0dd01.js"><link rel="prefetch" href="/record/assets/js/951.734ab7b8.js"><link rel="prefetch" href="/record/assets/js/952.8e3fa239.js"><link rel="prefetch" href="/record/assets/js/953.bc5452d6.js"><link rel="prefetch" href="/record/assets/js/954.4ec6d1cb.js"><link rel="prefetch" href="/record/assets/js/955.63373206.js"><link rel="prefetch" href="/record/assets/js/956.d962be0e.js"><link rel="prefetch" href="/record/assets/js/957.0ed7cba6.js"><link rel="prefetch" href="/record/assets/js/958.c4d099df.js"><link rel="prefetch" href="/record/assets/js/959.63463c41.js"><link rel="prefetch" href="/record/assets/js/96.954bfdd4.js"><link rel="prefetch" href="/record/assets/js/960.b58efb9b.js"><link rel="prefetch" href="/record/assets/js/961.ed853164.js"><link rel="prefetch" href="/record/assets/js/962.7aaa459e.js"><link rel="prefetch" href="/record/assets/js/963.eb5326c1.js"><link rel="prefetch" href="/record/assets/js/964.b4c92ea3.js"><link rel="prefetch" href="/record/assets/js/965.8ace5cce.js"><link rel="prefetch" href="/record/assets/js/966.0fa3fc40.js"><link rel="prefetch" href="/record/assets/js/967.65bf3ee6.js"><link rel="prefetch" href="/record/assets/js/968.658e45d1.js"><link rel="prefetch" href="/record/assets/js/969.171373a0.js"><link rel="prefetch" href="/record/assets/js/97.2c77c180.js"><link rel="prefetch" href="/record/assets/js/970.44bb52c1.js"><link rel="prefetch" href="/record/assets/js/971.e9f13af6.js"><link rel="prefetch" href="/record/assets/js/972.07ee0eb6.js"><link rel="prefetch" href="/record/assets/js/973.30c76dee.js"><link rel="prefetch" href="/record/assets/js/974.0da48822.js"><link rel="prefetch" href="/record/assets/js/975.35ace791.js"><link rel="prefetch" href="/record/assets/js/976.19a7fbf1.js"><link rel="prefetch" href="/record/assets/js/977.0f625ee0.js"><link rel="prefetch" href="/record/assets/js/978.d4233000.js"><link rel="prefetch" href="/record/assets/js/979.b90afbff.js"><link rel="prefetch" href="/record/assets/js/98.2d869380.js"><link rel="prefetch" href="/record/assets/js/980.040cd9e4.js"><link rel="prefetch" href="/record/assets/js/981.f5251614.js"><link rel="prefetch" href="/record/assets/js/982.06704947.js"><link rel="prefetch" href="/record/assets/js/983.b6ade6bb.js"><link rel="prefetch" href="/record/assets/js/984.73ed79e5.js"><link rel="prefetch" href="/record/assets/js/985.015e5283.js"><link rel="prefetch" href="/record/assets/js/986.ec097aed.js"><link rel="prefetch" href="/record/assets/js/987.ec049e73.js"><link rel="prefetch" href="/record/assets/js/988.b26fc8c6.js"><link rel="prefetch" href="/record/assets/js/989.e8646bed.js"><link rel="prefetch" href="/record/assets/js/99.bdcf796b.js"><link rel="prefetch" href="/record/assets/js/990.10b18e26.js"><link rel="prefetch" href="/record/assets/js/991.93ac0c49.js"><link rel="prefetch" href="/record/assets/js/992.1c539cf3.js"><link rel="prefetch" href="/record/assets/js/993.22910144.js"><link rel="prefetch" href="/record/assets/js/994.91c39bab.js"><link rel="prefetch" href="/record/assets/js/995.237d6b8c.js"><link rel="prefetch" href="/record/assets/js/996.eab54736.js"><link rel="prefetch" href="/record/assets/js/997.8831c27d.js"><link rel="prefetch" href="/record/assets/js/998.6c0f4360.js"><link rel="prefetch" href="/record/assets/js/999.47e1a369.js">
    <link rel="stylesheet" href="/record/assets/css/0.styles.0d67cf55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/record/" class="home-link router-link-active"><img src="/record/mlogo.svg" alt="Record" class="logo"> <span class="site-name can-hide">Record</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://blog.csdn.net/maoyeqiu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客（csdn）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/leetcode/daimasuixiang/" class="nav-link">
  代码随想
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/algorithms/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/algorithmsmore/" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/leetcodetop/" class="nav-link">
  针对算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">java</span> <span class="arrow down"></span></button> <button type="button" aria-label="java" class="mobile-dropdown-title"><span class="title">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/java/collection/" class="nav-link">
  集合
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/con/" class="nav-link">
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/jacoco/" class="nav-link">
  jacoco
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/Java8/" class="nav-link">
  Java8
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/jvm/" class="nav-link">
  JVM一
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jvm/" class="nav-link">
  JVM二
</a></li><li class="dropdown-item"><!----> <a href="/record/java/source/" class="nav-link">
  源码
</a></li><li class="dropdown-item"><!----> <a href="/record/java/spring/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/record/java/thread/" class="nav-link">
  线程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/middleware/cache/" class="nav-link">
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/dubbo/" class="nav-link">
  dubbo
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/es/" class="nav-link">
  es
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/MyBatis/" class="nav-link">
  MyBatis
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/" class="nav-link">
  mysql1
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/database/" class="nav-link">
  mysql2
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/MySQL/" class="nav-link">
  mysql3
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/" class="nav-link">
  redis1
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/cache/" class="nav-link">
  redis2
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/Redis/" class="nav-link">
  redis3
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/zk/" class="nav-link">
  zk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="q&amp;a" class="dropdown-title"><span class="title">q&amp;a</span> <span class="arrow down"></span></button> <button type="button" aria-label="q&amp;a" class="mobile-dropdown-title"><span class="title">q&amp;a</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/q&amp;a/interview/" class="nav-link">
  问答
</a></li><li class="dropdown-item"><!----> <a href="/record/q&amp;a/self/" class="nav-link">
  详细
</a></li><li class="dropdown-item"><!----> <a href="/record/q&amp;a/tuji/" class="nav-link">
  突击
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程" class="dropdown-title"><span class="title">课程</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程" class="mobile-dropdown-title"><span class="title">课程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/design_pattern_li/" class="nav-link">
  研磨设计模式（李兴华）
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/elasticsearch-core/" class="nav-link">
  ES核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/comdesign/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/elasticsearch-senior/" class="nav-link">
  ES高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计" class="mobile-dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/design/back-end-storage/" class="nav-link">
  后端存储实战
</a></li><li class="dropdown-item"><!----> <a href="/record/design/cache-pdp/" class="nav-link">
  复杂缓存架构
</a></li><li class="dropdown-item"><!----> <a href="/record/design/big-backEnd/" class="nav-link">
  大数据后端
</a></li><li class="dropdown-item"><!----> <a href="/record/design/ddd/" class="nav-link">
  ddd
</a></li><li class="dropdown-item"><!----> <a href="/record/design/distrubuted/" class="nav-link">
  分布式1
</a></li><li class="dropdown-item"><!----> <a href="/record/design/system/" class="nav-link">
  分布式2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/important/" class="nav-link">
  重要入口
</a></li><li class="dropdown-item"><!----> <a href="/record/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/record/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/record/introduce/" class="nav-link">
  本笔记介绍
</a></li></ul></div></div> <a href="https://github.com/txxs/record" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://blog.csdn.net/maoyeqiu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客（csdn）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/leetcode/daimasuixiang/" class="nav-link">
  代码随想
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/algorithms/" class="nav-link">
  剑指offer
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/algorithmsmore/" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/record/leetcode/leetcodetop/" class="nav-link">
  针对算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">java</span> <span class="arrow down"></span></button> <button type="button" aria-label="java" class="mobile-dropdown-title"><span class="title">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/java/collection/" class="nav-link">
  集合
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/con/" class="nav-link">
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/jacoco/" class="nav-link">
  jacoco
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/Java8/" class="nav-link">
  Java8
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jdk/jvm/" class="nav-link">
  JVM一
</a></li><li class="dropdown-item"><!----> <a href="/record/java/jvm/" class="nav-link">
  JVM二
</a></li><li class="dropdown-item"><!----> <a href="/record/java/source/" class="nav-link">
  源码
</a></li><li class="dropdown-item"><!----> <a href="/record/java/spring/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/record/java/thread/" class="nav-link">
  线程
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/middleware/cache/" class="nav-link">
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/dubbo/" class="nav-link">
  dubbo
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/es/" class="nav-link">
  es
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/MyBatis/" class="nav-link">
  MyBatis
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/" class="nav-link">
  mysql1
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/database/" class="nav-link">
  mysql2
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/mysql/MySQL/" class="nav-link">
  mysql3
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/" class="nav-link">
  redis1
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/cache/" class="nav-link">
  redis2
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/redis/Redis/" class="nav-link">
  redis3
</a></li><li class="dropdown-item"><!----> <a href="/record/middleware/zk/" class="nav-link">
  zk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="q&amp;a" class="dropdown-title"><span class="title">q&amp;a</span> <span class="arrow down"></span></button> <button type="button" aria-label="q&amp;a" class="mobile-dropdown-title"><span class="title">q&amp;a</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/q&amp;a/interview/" class="nav-link">
  问答
</a></li><li class="dropdown-item"><!----> <a href="/record/q&amp;a/self/" class="nav-link">
  详细
</a></li><li class="dropdown-item"><!----> <a href="/record/q&amp;a/tuji/" class="nav-link">
  突击
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程" class="dropdown-title"><span class="title">课程</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程" class="mobile-dropdown-title"><span class="title">课程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/design_pattern_li/" class="nav-link">
  研磨设计模式（李兴华）
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/elasticsearch-core/" class="nav-link">
  ES核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/comdesign/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/record/imocc/elasticsearch-senior/" class="nav-link">
  ES高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><span class="title">设计</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计" class="mobile-dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/design/back-end-storage/" class="nav-link">
  后端存储实战
</a></li><li class="dropdown-item"><!----> <a href="/record/design/cache-pdp/" class="nav-link">
  复杂缓存架构
</a></li><li class="dropdown-item"><!----> <a href="/record/design/big-backEnd/" class="nav-link">
  大数据后端
</a></li><li class="dropdown-item"><!----> <a href="/record/design/ddd/" class="nav-link">
  ddd
</a></li><li class="dropdown-item"><!----> <a href="/record/design/distrubuted/" class="nav-link">
  分布式1
</a></li><li class="dropdown-item"><!----> <a href="/record/design/system/" class="nav-link">
  分布式2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/record/important/" class="nav-link">
  重要入口
</a></li><li class="dropdown-item"><!----> <a href="/record/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/record/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/record/introduce/" class="nav-link">
  本笔记介绍
</a></li></ul></div></div> <a href="https://github.com/txxs/record" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>本文来自公众号：末读代码的投稿，原文地址：https://mp.weixin.qq.com/s/AHWzboztt53ZfFZmsSnMSw  。</p></blockquote> <p>上一篇文章介绍了 HashMap 源码，反响不错，也有很多同学发表了自己的观点，这次又来了，这次是 <code>ConcurrentHashMap</code> 了，作为线程安全的HashMap ，它的使用频率也是很高。那么它的存储结构和实现原理是怎么样的呢？</p> <h2 id="_1-concurrenthashmap-1-7"><a href="#_1-concurrenthashmap-1-7" class="header-anchor">#</a> 1. ConcurrentHashMap 1.7</h2> <h3 id="_1-存储结构"><a href="#_1-存储结构" class="header-anchor">#</a> 1. 存储结构</h3> <blockquote><p>下图存在一个笔误 Segmeng -&gt; Segment</p></blockquote> <p><img src="images/image-20200405151029416.png" alt="Java 7 ConcurrentHashMap 存储结构"></p> <p>Java 7 中 <code>ConcurrentHashMap</code> 的存储结构如上图，<code>ConcurrnetHashMap</code> 由很多个 <code>Segment</code>  组合，而每一个 <code>Segment</code> 是一个类似于 HashMap 的结构，所以每一个 <code>HashMap</code> 的内部可以进行扩容。但是 <code>Segment</code> 的个数一旦<strong>初始化就不能改变</strong>，默认 <code>Segment</code> 的个数是 16 个，你也可以认为 <code>ConcurrentHashMap</code> 默认支持最多 16 个线程并发。</p> <h3 id="_2-初始化"><a href="#_2-初始化" class="header-anchor">#</a> 2. 初始化</h3> <p>通过 ConcurrentHashMap 的无参构造探寻 ConcurrentHashMap 的初始化流程。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * Creates a new, empty map with a default initial capacity (16),
     * load factor (0.75) and concurrencyLevel (16).
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ConcurrentHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span>DEFAULT_INITIAL_CAPACITY<span class="token punctuation">,</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">,</span> DEFAULT_CONCURRENCY_LEVEL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>无参构造中调用了有参构造，传入了三个参数的默认值，他们的值是。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * 默认初始化容量
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INITIAL_CAPACITY <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 默认负载因子
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 默认并发级别
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CONCURRENCY_LEVEL <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>接着看下这个有参构造函数的内部实现逻辑。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ConcurrentHashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span><span class="token keyword">float</span> loadFactor<span class="token punctuation">,</span> <span class="token keyword">int</span> concurrencyLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 参数校验</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>loadFactor <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> initialCapacity <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> concurrencyLevel <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 校验并发级别大小，大于 1&lt;&lt;16，重置为 65536</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>concurrencyLevel <span class="token operator">&gt;</span> MAX_SEGMENTS<span class="token punctuation">)</span>
        concurrencyLevel <span class="token operator">=</span> MAX_SEGMENTS<span class="token punctuation">;</span>
    <span class="token comment">// Find power-of-two sizes best matching arguments</span>
    <span class="token comment">// 2的多少次方</span>
    <span class="token keyword">int</span> sshift <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ssize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 这个循环可以找到 concurrencyLevel 之上最近的 2的次方值</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>ssize <span class="token operator">&lt;</span> concurrencyLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">++</span>sshift<span class="token punctuation">;</span>
        ssize <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 记录段偏移量</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>segmentShift <span class="token operator">=</span> <span class="token number">32</span> <span class="token operator">-</span> sshift<span class="token punctuation">;</span>
    <span class="token comment">// 记录段掩码</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>segmentMask <span class="token operator">=</span> ssize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置容量</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span>
        initialCapacity <span class="token operator">=</span> MAXIMUM_CAPACITY<span class="token punctuation">;</span>
    <span class="token comment">// c = 容量 / ssize ，默认 16 / 16 = 1，这里是计算每个 Segment 中的类似于 HashMap 的容量</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> initialCapacity <span class="token operator">/</span> ssize<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">*</span> ssize <span class="token operator">&lt;</span> initialCapacity<span class="token punctuation">)</span>
        <span class="token operator">++</span>c<span class="token punctuation">;</span>
    <span class="token keyword">int</span> cap <span class="token operator">=</span> MIN_SEGMENT_TABLE_CAPACITY<span class="token punctuation">;</span>
    <span class="token comment">//Segment 中的类似于 HashMap 的容量至少是2或者2的倍数</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cap <span class="token operator">&lt;</span> c<span class="token punctuation">)</span>
        cap <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// create segments and segments[0]</span>
    <span class="token comment">// 创建 Segment 数组，设置 segments[0]</span>
    <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> s0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>loadFactor<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>cap <span class="token operator">*</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">,</span>
                         <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token punctuation">[</span>cap<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> ss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Segment</span><span class="token punctuation">[</span>ssize<span class="token punctuation">]</span><span class="token punctuation">;</span>
    UNSAFE<span class="token punctuation">.</span><span class="token function">putOrderedObject</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> SBASE<span class="token punctuation">,</span> s0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ordered write of segments[0]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>segments <span class="token operator">=</span> ss<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>总结一下在 Java 7 中 ConcurrnetHashMap 的初始化逻辑。</p> <ol><li>必要参数校验。</li> <li>校验并发级别 concurrencyLevel 大小，如果大于最大值，重置为最大值。无参构造<strong>默认值是 16.</strong></li> <li>寻找并发级别 concurrencyLevel 之上最近的 <strong>2 的幂次方</strong>值，作为初始化容量大小，<strong>默认是 16</strong>。</li> <li>记录 segmentShift 偏移量，这个值为【容量 =  2 的N次方】中的 N，在后面 Put 时计算位置时会用到。<strong>默认是 32 - sshift = 28</strong>.</li> <li>记录 segmentMask，默认是 ssize - 1 = 16 -1 = 15.</li> <li><strong>初始化 segments[0]</strong>，<strong>默认大小为 2</strong>，<strong>负载因子 0.75</strong>，<strong>扩容阀值是 2*0.75=1.5</strong>，插入第二个值时才会进行扩容。</li></ol> <h3 id="_3-put"><a href="#_3-put" class="header-anchor">#</a> 3. put</h3> <p>接着上面的初始化参数继续查看 put 方法源码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Maps the specified key to the specified value in this table.
 * Neither the key nor the value can be null.
 *
 * &lt;p&gt; The value can be retrieved by calling the &lt;tt&gt;get&lt;/tt&gt; method
 * with a key that is equal to the original key.
 *
 * @param key key with which the specified value is to be associated
 * @param value value to be associated with the specified key
 * @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or
 *         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;
 * @throws NullPointerException if the specified key or value is null
 */</span>
<span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// hash 值无符号右移 28位（初始化时获得），然后与 segmentMask=15 做与运算</span>
    <span class="token comment">// 其实也就是把高4位与segmentMask（1111）做与运算</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token punctuation">(</span>hash <span class="token operator">&gt;&gt;&gt;</span> segmentShift<span class="token punctuation">)</span> <span class="token operator">&amp;</span> segmentMask<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>UNSAFE<span class="token punctuation">.</span>getObject          <span class="token comment">// nonvolatile; recheck</span>
         <span class="token punctuation">(</span>segments<span class="token punctuation">,</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;&lt;</span> SSHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> SBASE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">//  in ensureSegment</span>
        <span class="token comment">// 如果查找到的 Segment 为空，初始化</span>
        s <span class="token operator">=</span> <span class="token function">ensureSegment</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Returns the segment for the given index, creating it and
 * recording in segment table (via CAS) if not already present.
 *
 * @param k the index
 * @return the segment
 */</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">ensureSegment</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> ss <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>segments<span class="token punctuation">;</span>
    <span class="token keyword">long</span> u <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;&lt;</span> SSHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> SBASE<span class="token punctuation">;</span> <span class="token comment">// raw offset</span>
    <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> seg<span class="token punctuation">;</span>
    <span class="token comment">// 判断 u 位置的 Segment 是否为null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>UNSAFE<span class="token punctuation">.</span><span class="token function">getObjectVolatile</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> proto <span class="token operator">=</span> ss<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// use segment 0 as prototype</span>
        <span class="token comment">// 获取0号 segment 里的 HashEntry&lt;K,V&gt; 初始化长度</span>
        <span class="token keyword">int</span> cap <span class="token operator">=</span> proto<span class="token punctuation">.</span>table<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">// 获取0号 segment 里的 hash 表里的扩容负载因子，所有的 segment 的 loadFactor 是相同的</span>
        <span class="token keyword">float</span> lf <span class="token operator">=</span> proto<span class="token punctuation">.</span>loadFactor<span class="token punctuation">;</span>
        <span class="token comment">// 计算扩容阀值</span>
        <span class="token keyword">int</span> threshold <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>cap <span class="token operator">*</span> lf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个 cap 容量的 HashEntry 数组</span>
        <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token punctuation">[</span>cap<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>UNSAFE<span class="token punctuation">.</span><span class="token function">getObjectVolatile</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// recheck</span>
            <span class="token comment">// 再次检查 u 位置的 Segment 是否为null，因为这时可能有其他线程进行了操作</span>
            <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>lf<span class="token punctuation">,</span> threshold<span class="token punctuation">,</span> tab<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 自旋检查 u 位置的 Segment 是否为null</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>UNSAFE<span class="token punctuation">.</span><span class="token function">getObjectVolatile</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">)</span>
                   <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 使用CAS 赋值，只会成功一次</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>UNSAFE<span class="token punctuation">.</span><span class="token function">compareAndSwapObject</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> u<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> seg <span class="token operator">=</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> seg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><p>上面的源码分析了 ConcurrentHashMap 在 put 一个数据时的处理流程，下面梳理下具体流程。</p> <ol><li><p>计算要 put 的 key 的位置，获取指定位置的 Segment。</p></li> <li><p>如果指定位置的 Segment 为空，则初始化这个 Segment.</p> <p><strong>初始化 Segment 流程：</strong></p> <ol><li>检查计算得到的位置的 Segment 是否为null.</li> <li>为 null 继续初始化，使用 Segment[0] 的容量和负载因子创建一个 HashEntry 数组。</li> <li>再次检查计算得到的指定位置的 Segment 是否为null.</li> <li>使用创建的 HashEntry 数组初始化这个 Segment.</li> <li>自旋判断计算得到的指定位置的 Segment 是否为null，使用 CAS 在这个位置赋值为 Segment.</li></ol></li> <li><p>Segment.put 插入 key,value 值。</p></li></ol> <p>上面探究了获取 Segment 段和初始化 Segment 段的操作。最后一行的 Segment 的 put 方法还没有查看，继续分析。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取 ReentrantLock 独占锁，获取不到，scanAndLockForPut 获取。</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> node <span class="token operator">=</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">scanAndLockForPut</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">V</span> oldValue<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> table<span class="token punctuation">;</span>
        <span class="token comment">// 计算要put的数据位置</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">;</span>
        <span class="token comment">// CAS 获取 index 坐标的值</span>
        <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> first <span class="token operator">=</span> <span class="token function">entryAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> first<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 检查是否 key 已经存在，如果存在，则遍历链表寻找位置，找到后替换 value</span>
                <span class="token class-name">K</span> k<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span>
                    <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
                        <span class="token operator">++</span>modCount<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// first 有值没说明 index 位置已经有值了，有冲突，链表头插法。</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    node<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> c <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token comment">// 容量大于扩容阀值，小于最大容量，进行扩容</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;</span> threshold <span class="token operator">&amp;&amp;</span> tab<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span>
                    <span class="token function">rehash</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    <span class="token comment">// index 位置赋值 node，node 可能是一个元素，也可能是一个链表的表头</span>
                    <span class="token function">setEntryAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> index<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">++</span>modCount<span class="token punctuation">;</span>
                count <span class="token operator">=</span> c<span class="token punctuation">;</span>
                oldValue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>由于 Segment 继承了 ReentrantLock，所以 Segment 内部可以很方便的获取锁，put 流程就用到了这个功能。</p> <ol><li><p>tryLock() 获取锁，获取不到使用  <strong><code>scanAndLockForPut</code></strong> 方法继续获取。</p></li> <li><p>计算 put 的数据要放入的 index 位置，然后获取这个位置上的 HashEntry 。</p></li> <li><p>遍历 put 新元素，为什么要遍历？因为这里获取的 HashEntry 可能是一个空元素，也可能是链表已存在，所以要区别对待。</p> <p>如果这个位置上的 <strong>HashEntry 不存在</strong>：</p> <ol><li>如果当前容量大于扩容阀值，小于最大容量，<strong>进行扩容</strong>。</li> <li>直接头插法插入。</li></ol> <p>如果这个位置上的 <strong>HashEntry 存在</strong>：</p> <ol><li>判断链表当前元素 Key 和 hash 值是否和要 put 的 key 和 hash 值一致。一致则替换值</li> <li>不一致，获取链表下一个节点，直到发现相同进行值替换，或者链表表里完毕没有相同的。
<ol><li>如果当前容量大于扩容阀值，小于最大容量，<strong>进行扩容</strong>。</li> <li>直接链表头插法插入。</li></ol></li></ol></li> <li><p>如果要插入的位置之前已经存在，替换后返回旧值，否则返回 null.</p></li></ol> <p>这里面的第一步中的 scanAndLockForPut 操作这里没有介绍，这个方法做的操作就是不断的自旋 <code>tryLock()</code> 获取锁。当自旋次数大于指定次数时，使用 <code>lock()</code> 阻塞获取锁。在自旋时顺表获取下 hash 位置的 HashEntry。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">scanAndLockForPut</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> first <span class="token operator">=</span> <span class="token function">entryForHash</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> first<span class="token punctuation">;</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> retries <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// negative while locating node</span>
    <span class="token comment">// 自旋获取锁</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">;</span> <span class="token comment">// to recheck first below</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>retries <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// speculatively create node</span>
                    node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                retries <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
                retries <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>retries <span class="token operator">&gt;</span> MAX_SCAN_RETRIES<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 自旋达到指定次数后，阻塞等到只到获取到锁</span>
            <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>retries <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                 <span class="token punctuation">(</span>f <span class="token operator">=</span> <span class="token function">entryForHash</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e <span class="token operator">=</span> first <span class="token operator">=</span> f<span class="token punctuation">;</span> <span class="token comment">// re-traverse if entry changed</span>
            retries <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="_4-扩容-rehash"><a href="#_4-扩容-rehash" class="header-anchor">#</a> 4. 扩容 rehash</h3> <p>ConcurrentHashMap 的扩容只会扩容到原来的两倍。老数组里的数据移动到新的数组时，位置要么不变，要么变为 index+ oldSize，参数里的 node 会在扩容之后使用链表<strong>头插法</strong>插入到指定位置。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rehash</span><span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTable <span class="token operator">=</span> table<span class="token punctuation">;</span>
    <span class="token comment">// 老容量</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> oldTable<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// 新容量，扩大两倍</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 新的扩容阀值 </span>
    threshold <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>newCapacity <span class="token operator">*</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建新的数组</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token punctuation">[</span>newCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 新的掩码，默认2扩容后是4，-1是3，二进制就是11。</span>
    <span class="token keyword">int</span> sizeMask <span class="token operator">=</span> newCapacity <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oldCapacity <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 遍历老数组</span>
        <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> oldTable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token comment">// 计算新的位置，新的位置只可能是不便或者是老的位置+老的容量。</span>
            <span class="token keyword">int</span> idx <span class="token operator">=</span> e<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> sizeMask<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>   <span class="token comment">//  Single node on list</span>
                <span class="token comment">// 如果当前位置还不是链表，只是一个元素，直接赋值</span>
                newTable<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// Reuse consecutive sequence at same slot</span>
                <span class="token comment">// 如果是链表了</span>
                <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> lastRun <span class="token operator">=</span> e<span class="token punctuation">;</span>
                <span class="token keyword">int</span> lastIdx <span class="token operator">=</span> idx<span class="token punctuation">;</span>
                <span class="token comment">// 新的位置只可能是不便或者是老的位置+老的容量。</span>
                <span class="token comment">// 遍历结束后，lastRun 后面的元素位置都是相同的</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> last <span class="token operator">=</span> next<span class="token punctuation">;</span> last <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> last <span class="token operator">=</span> last<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> k <span class="token operator">=</span> last<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> sizeMask<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">!=</span> lastIdx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        lastIdx <span class="token operator">=</span> k<span class="token punctuation">;</span>
                        lastRun <span class="token operator">=</span> last<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// ，lastRun 后面的元素位置都是相同的，直接作为链表赋值到新位置。</span>
                newTable<span class="token punctuation">[</span>lastIdx<span class="token punctuation">]</span> <span class="token operator">=</span> lastRun<span class="token punctuation">;</span>
                <span class="token comment">// Clone remaining nodes</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> e<span class="token punctuation">;</span> p <span class="token operator">!=</span> lastRun<span class="token punctuation">;</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 遍历剩余元素，头插法到指定 k 位置。</span>
                    <span class="token class-name">V</span> v <span class="token operator">=</span> p<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                    <span class="token keyword">int</span> h <span class="token operator">=</span> p<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
                    <span class="token keyword">int</span> k <span class="token operator">=</span> h <span class="token operator">&amp;</span> sizeMask<span class="token punctuation">;</span>
                    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> n <span class="token operator">=</span> newTable<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    newTable<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> p<span class="token punctuation">.</span>key<span class="token punctuation">,</span> v<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 头插法插入新的节点</span>
    <span class="token keyword">int</span> nodeIndex <span class="token operator">=</span> node<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> sizeMask<span class="token punctuation">;</span> <span class="token comment">// add the new node</span>
    node<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>newTable<span class="token punctuation">[</span>nodeIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newTable<span class="token punctuation">[</span>nodeIndex<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
    table <span class="token operator">=</span> newTable<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><p>有些同学可能会对最后的两个 for 循环有疑惑，这里第一个 for 是为了寻找这样一个节点，这个节点后面的所有 next 节点的新位置都是相同的。然后把这个作为一个链表赋值到新位置。第二个 for 循环是为了把剩余的元素通过头插法插入到指定位置链表。这样实现的原因可能是基于概率统计，有深入研究的同学可以发表下意见。</p> <h3 id="_5-get"><a href="#_5-get" class="header-anchor">#</a> 5. get</h3> <p>到这里就很简单了，get 方法只需要两步即可。</p> <ol><li>计算得到 key 的存放位置。</li> <li>遍历指定位置查找相同 key 的 value 值。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">;</span> <span class="token comment">// manually integrate access methods to reduce overhead</span>
    <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>h <span class="token operator">&gt;&gt;&gt;</span> segmentShift<span class="token punctuation">)</span> <span class="token operator">&amp;</span> segmentMask<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> SSHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> SBASE<span class="token punctuation">;</span>
    <span class="token comment">// 计算得到 key 的存放位置</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>UNSAFE<span class="token punctuation">.</span><span class="token function">getObjectVolatile</span><span class="token punctuation">(</span>segments<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span>tab <span class="token operator">=</span> s<span class="token punctuation">.</span>table<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> UNSAFE<span class="token punctuation">.</span>getObjectVolatile
                 <span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> TSHIFT<span class="token punctuation">)</span> <span class="token operator">+</span> TBASE<span class="token punctuation">)</span><span class="token punctuation">;</span>
             e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果是链表，遍历查找到相同 key 的 value。</span>
            <span class="token class-name">K</span> k<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> h <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_2-concurrenthashmap-1-8"><a href="#_2-concurrenthashmap-1-8" class="header-anchor">#</a> 2. ConcurrentHashMap 1.8</h2> <h3 id="_1-存储结构-2"><a href="#_1-存储结构-2" class="header-anchor">#</a> 1. 存储结构</h3> <p><img src="images/java8_concurrenthashmap.png" alt="Java8 ConcurrentHashMap 存储结构（图片来自 javadoop）"></p> <p>可以发现 Java8 的 ConcurrentHashMap  相对于 Java7 来说变化比较大，不再是之前的 <strong>Segment 数组 + HashEntry 数组 + 链表</strong>，而是 <strong>Node 数组 + 链表 / 红黑树</strong>。当冲突链表达到一定长度时，链表会转换成红黑树。</p> <h3 id="_2-初始化-inittable"><a href="#_2-初始化-inittable" class="header-anchor">#</a> 2. 初始化 initTable</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Initializes table, using the size recorded in sizeCtl.
 */</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token keyword">int</span> sc<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> tab<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ／／　如果 sizeCtl <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">,</span>说明另外的线程执行CAS 成功，正在进行初始化。
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>sc <span class="token operator">=</span> sizeCtl<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// 让出 CPU 使用权</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lost initialization race; just spin</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">U</span><span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> SIZECTL<span class="token punctuation">,</span> sc<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> tab<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>sc <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> sc <span class="token operator">:</span> DEFAULT_CAPACITY<span class="token punctuation">;</span>
                    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
                    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> nt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    table <span class="token operator">=</span> tab <span class="token operator">=</span> nt<span class="token punctuation">;</span>
                    sc <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                sizeCtl <span class="token operator">=</span> sc<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> tab<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>从源码中可以发现 ConcurrentHashMap 的初始化是通过<strong>自旋和 CAS</strong> 操作完成的。里面需要注意的是变量 <code>sizeCtl</code> ，它的值决定着当前的初始化状态。</p> <ol><li>-1  说明正在初始化</li> <li>-N 说明有N-1个线程正在进行扩容</li> <li>表示 table 初始化大小，如果 table 没有初始化</li> <li>表示 table 容量，如果 table　已经初始化。</li></ol> <h3 id="_3-put-2"><a href="#_3-put-2" class="header-anchor">#</a> 3. put</h3> <p>直接过一遍 put 源码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** Implementation for put and putIfAbsent */</span>
<span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// key 和 value 不能为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> table<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// f = 目标位置元素</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> fh<span class="token punctuation">;</span><span class="token comment">// fh 后面存放目标位置的元素 hash 值</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// 数组桶为空，初始化数组桶（自旋+CAS)</span>
            tab <span class="token operator">=</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>f <span class="token operator">=</span> <span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 桶内为空，CAS 放入，不加锁，成功了就直接 break 跳出</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">casTabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">// no lock when adding to empty bin</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fh <span class="token operator">=</span> f<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">==</span> MOVED<span class="token punctuation">)</span>
            tab <span class="token operator">=</span> <span class="token function">helpTransfer</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">V</span> oldVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token comment">// 使用 synchronized 加锁加入节点</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 说明是链表</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>fh <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        binCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token comment">// 循环加入新的或者覆盖节点</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> f<span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token class-name">K</span> ek<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                                <span class="token punctuation">(</span><span class="token punctuation">(</span>ek <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span>
                                 <span class="token punctuation">(</span>ek <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ek<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                oldVal <span class="token operator">=</span> e<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                    e<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> e<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                pred<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                                                          value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">TreeBin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 红黑树</span>
                        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">;</span>
                        binCount <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeBin</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                                                       value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            oldVal <span class="token operator">=</span> p<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                p<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">&gt;=</span> TREEIFY_THRESHOLD<span class="token punctuation">)</span>
                    <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVal <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> binCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><ol><li><p>根据 key 计算出 hashcode 。</p></li> <li><p>判断是否需要进行初始化。</p></li> <li><p>即为当前 key 定位出的 Node，如果为空表示当前位置可以写入数据，利用 CAS 尝试写入，失败则自旋保证成功。</p></li> <li><p>如果当前位置的 <code>hashcode == MOVED == -1</code>,则需要进行扩容。</p></li> <li><p>如果都不满足，则利用 synchronized 锁写入数据。</p></li> <li><p>如果数量大于 <code>TREEIFY_THRESHOLD</code> 则要执行树化方法，在treeifyBin中会首先判断当前数组长度≥64时才会将链表转换为红黑树。</p></li></ol> <h3 id="_4-get"><a href="#_4-get" class="header-anchor">#</a> 4. get</h3> <p>get 流程比较简单，直接过一遍源码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">,</span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> eh<span class="token punctuation">;</span> <span class="token class-name">K</span> ek<span class="token punctuation">;</span>
    <span class="token comment">// key 所在的 hash 位置</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果指定位置元素存在，头结点hash值相同</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>eh <span class="token operator">=</span> e<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">==</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ek <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>ek <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ek<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">// key hash 值相等，key值相同，直接返回元素 value</span>
                <span class="token keyword">return</span> e<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>eh <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// 头结点hash值小于0，说明正在扩容或者是红黑树，find查找</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>p <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> p<span class="token punctuation">.</span>val <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 是链表，遍历查找</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> h <span class="token operator">&amp;&amp;</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span>ek <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>ek <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ek<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> e<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>总结一下 get 过程：</p> <ol><li>根据 hash 值计算位置。</li> <li>查找到指定位置，如果头节点就是要找的，直接返回它的 value.</li> <li>如果头节点 hash 值小于 0 ，说明正在扩容或者是红黑树，查找之。</li> <li>如果是链表，遍历查找之。</li></ol> <p>总结：</p> <p>总的来说 ConcurrentHashMap 在 Java8 中相对于 Java7 来说变化还是挺大的，</p> <h2 id="_3-总结"><a href="#_3-总结" class="header-anchor">#</a> 3.  总结</h2> <p>Java7 中 ConcurrentHashMap 使用的分段锁，也就是每一个 Segment 上同时只有一个线程可以操作，每一个 Segment 都是一个类似 HashMap 数组的结构，它可以扩容，它的冲突会转化为链表。但是 Segment 的个数一但初始化就不能改变。</p> <p>Java8 中的 ConcurrentHashMap  使用的 Synchronized 锁加 CAS 的机制。结构也由 Java7 中的 <strong>Segment 数组 + HashEntry 数组 + 链表</strong> 进化成了  <strong>Node 数组 + 链表 / 红黑树</strong>，Node 是类似于一个 HashEntry 的结构。它的冲突再达到一定大小时会转化成红黑树，在冲突小于一定数量时又退回链表。</p> <p>有些同学可能对 Synchronized 的性能存在疑问，其实 Synchronized 锁自从引入锁升级策略后，性能不再是问题，有兴趣的同学可以自己了解下 Synchronized 的<strong>锁升级</strong>。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/txxs/record/edit/master/docs/java/java-backup/collection/concurrent-hash-map-source-code.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022-01-02 17:08:46</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/record/assets/js/app.b3b2136c.js" defer></script><script src="/record/assets/js/2.8ec10a4b.js" defer></script><script src="/record/assets/js/519.4f6c7a79.js" defer></script><script src="/record/assets/js/5.82344924.js" defer></script>
  </body>
</html>
